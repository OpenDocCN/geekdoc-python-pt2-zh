## 1

使用海龟模块绘制多边形

*几个世纪前，一位西方人听到一位印度教徒说地球是靠在海龟背上。当被问到海龟站在什么上面时，印度教徒解释道：“是海龟，一直是海龟。”*

![image](../images/fintro-01.jpg)

在你开始使用数学构建书中展示的所有酷炫内容之前，你需要学习如何使用一种名为 Python 的编程语言来给计算机下指令。在本章中，你将通过使用 Python 内置的海龟工具绘制不同的图形，熟悉一些基本的编程概念，如循环、变量和函数。正如你将看到的，海龟模块是学习 Python 基本特性的一种有趣方式，同时也能让你品尝到编程能够创造的精彩成果。

### Python 的海龟模块

Python 的海龟工具基于原始的“海龟”代理，该代理来自 1960 年代的 Logo 编程语言，Logo 旨在使计算机编程更加易于理解，面向大众。Logo 的图形化环境使与计算机的互动变得直观且富有趣味。（查看 Seymour Papert 的精彩著作 *Mindstorms*，了解更多使用 Logo 虚拟海龟学习数学的绝妙创意。）Python 编程语言的创始人非常喜欢 Logo 中的海龟，以至于他们写了一个名为 *turtle* 的模块，用 Python 来复制 Logo 海龟的功能。

Python 的海龟模块允许你控制一个小图像，它的形状像一只海龟，就像视频游戏中的角色一样。你需要给出精确的指令来引导海龟在屏幕上移动。因为海龟走到哪里都会留下痕迹，我们可以利用它来编写程序，绘制不同的图形。

让我们从导入海龟模块开始吧！

#### 导入海龟模块

在 IDLE 中打开一个新的 Python 文件，并将其保存为 *myturtle.py*，保存在 Python 文件夹中。你应该看到一个空白页面。要在 Python 中使用海龟，你首先需要导入海龟模块中的函数。

*函数* 是一组可重复使用的代码，用于在程序中执行特定的操作。Python 中有许多内置函数可以使用，但你也可以编写自己的函数（稍后你将学习如何编写自己的函数）。

Python 中的 *模块* 是一个包含预定义函数和语句的文件，这些函数和语句可以在另一个程序中使用。例如，海龟模块包含了许多有用的代码，这些代码会在你安装 Python 时自动下载。

虽然可以通过多种方式从模块中导入函数，但在这里我们将使用一种简单的方法。在你刚创建的 *myturtle.py* 文件中，输入以下内容作为开头：

from turtle import *

from命令表示我们正在从文件外部导入内容。接着，我们给出要导入的模块的名称，这里是turtle。我们使用import关键字来获取我们需要的turtle模块中的有用代码。我们在这里使用星号（*）作为*通配符命令*，意味着“从该模块导入所有内容。”确保在import和星号之间留有空格。

保存文件并确保它位于Python文件夹中，否则程序会抛出错误。

**警告**

*不要将文件保存为* turtle.py。*这个文件名已经存在，会与turtle模块的导入发生冲突！其他任何文件名都可以：* myturtle.py, turtle2.py, mondayturtle.py, *等等*。

#### 移动你的海龟

现在你已经导入了海龟模块，可以开始输入指令来移动海龟了。我们将使用forward()函数（简称fd）来让海龟向前移动一定步数，并且在它后面留下痕迹。请注意，forward()是我们刚刚从海龟模块导入的函数之一。输入以下内容来让海龟向前移动：

forward(100)

在这里，我们使用forward()函数，并在括号内输入数字100，表示海龟应该向前走多少步。在这种情况下，100是我们传递给forward()函数的*参数*。所有函数都接受一个或多个参数。你可以自由传递其他数字给这个函数。当你按下F5运行程序时，应该会打开一个新窗口，中央有一个箭头，如[图 1-1](ch01.xhtml#ch01fig1)所示。

![image](../images/f005-01.jpg)

*图 1-1：运行你的第一行代码！*

如你所见，海龟从屏幕中间开始，向前走了100步（实际上是100像素）。注意，默认形状是箭头而不是海龟，且箭头默认朝向右方。要将箭头改成海龟，更新你的代码，使其如下所示：

*myturtle.py*

from turtle import *

forward(100)

shape('turtle')

正如你可能已经猜到的，shape()是海龟模块中定义的另一个函数。它允许你将默认的箭头形状更改为其他形状，如圆形、方形或箭头。这里，shape()函数的参数是字符串值'turtle'，而不是数字。（你将在下一章学习更多关于字符串和不同数据类型的内容。）再次保存并运行*myturtle.py*文件。你应该能看到类似于[图 1-2](ch01.xhtml#ch01fig2)的效果。

![image](../images/f006-01.jpg)

*图 1-2：将箭头变成海龟！*

现在你的箭头应该看起来像一个小海龟了！

#### 改变方向

海龟只能朝着它当前所面向的方向前进。要改变海龟的方向，必须先使用right()或left()函数让海龟转动指定的角度，然后再向前移动。通过添加下面的最后两行代码，更新你的*myturtle.py*程序：

*myturtle.py*

from turtle import *

forward(100)

shape('turtle')

right(45)

forward(150)

在这里，我们将使用right()函数（或者简写为rt()）让海龟右转45度，然后再向前走150步。当你运行这段代码时，输出应该像[图 1-3](ch01.xhtml#ch01fig3)一样。

![image](../images/f006-02.jpg)

*图 1-3：改变海龟的方向*

如你所见，海龟从屏幕的中间开始，向前走了100步，右转45度，然后再向前走150步。请注意，Python按顺序逐行运行代码，从上到下。

练习 1-1：广场舞

返回到*myturtle.py*程序。你的第一个挑战是仅使用forward和right函数修改程序中的代码，让海龟画出一个正方形。

### 使用循环重复代码

每种编程语言都有一种方法可以自动重复执行命令一定次数。这非常有用，因为它可以避免你不断重复输入相同的代码，从而让程序更简洁。它还帮助你避免因输入错误而导致程序无法正常运行。

#### 使用FOR循环

在Python中，我们使用for循环来重复代码。我们还使用range关键字来指定循环的次数。在IDLE中打开一个新程序文件，保存为*for_loop.py*，然后输入以下内容：

*for_loop.py*

for i in range(2):

print('hello')

在这里，range()函数为每个for循环创建了i，或者称为*迭代器*。迭代器是一个每次使用时增加的值。括号中的数字2是我们传递给函数的参数，用来控制它的行为。这类似于我们在前面的章节中将不同的值传递给forward()和right()函数的方式。

在这种情况下，range(2)创建了一个包含两个数字0和1的序列。对于这两个数字中的每一个，for命令会执行冒号后指定的动作，即打印*hello*。

确保通过按TAB键（一个Tab键等于四个空格）缩进你想要重复的所有代码行。缩进告诉Python哪些代码行在循环内，这样for循环就知道确切要重复哪些代码。别忘了冒号，它告诉计算机循环后面会执行什么内容。当你运行程序时，你应该看到以下内容被打印到shell中：

hello

hello

如你所见，程序打印了两次hello，因为range(2)创建了一个包含两个数字0和1的序列。这意味着for命令会遍历序列中的两个项，每次打印“hello”。让我们像这样更新括号中的数字：

*for_loop.py*

for i in range(10):

print('hello')

当你运行这个程序时，你应该看到hello打印十次，像这样：

hello

hello

hello

hello

hello

hello

hello

hello

hello

hello

让我们试试另一个例子，因为在本书中你将会写很多的for循环：

*for_loop.py*

for i in range(10):

print(i)

因为 Python 中的计数从 0 开始，而不是从 1，所以 `for i in range(10)` 会给我们从 0 到 9 的数字。这段示例代码的意思是：“对于 0 到 9 范围内的每个值，显示当前的数字。”然后，for 循环会重复这段代码，直到数字用完。运行这段代码时，你应该看到类似这样的输出：

0

1

2

3

4

5

6

7

8

9

以后你需要记住，使用 `range` 循环时，`i` 从 0 开始，到循环中的最后一个数字之前结束，但现在，如果你想让某些操作重复四次，你可以这样做：

`for i in range(4):`

就这么简单！让我们看看如何将其应用到实际中。

#### 使用 for 循环绘制正方形

在练习 1-1 中，你的挑战是仅使用 `forward()` 和 `right()` 函数来绘制一个正方形。为此，你必须四次重复调用 `forward(100)` 和 `right(90)`。但这样就需要多次输入相同的代码，既费时又容易出错。

让我们使用一个 for 循环来避免重复相同的代码。这里是 *myturtle.py* 程序，它使用一个 for 循环来代替重复调用 `forward()` 和 `right()` 函数四次：

*myturtle.py*

`from turtle import *`

`shape('turtle')`

`for i in range(4):`

`forward(100)`

`right(90)`

请注意，`shape('turtle')` 应该在导入 turtle 模块后、开始绘图之前使用。这个 for 循环中的两行代码指示海龟向前移动 100 步，然后右转 90 度。（你可能需要和海龟面对同一个方向才能知道“右”是哪个方向！）因为一个正方形有四条边，我们使用 `range(4)` 来重复这两行代码四次。运行程序，你应该看到类似于 [图 1-4](ch01.xhtml#ch01fig4) 的效果。

![image](../images/f009-01.jpg)

*图 1-4：用 for 循环绘制的正方形*

你应该能看到海龟总共向前移动并右转四次，最终返回到原来的位置。你成功地使用 for 循环绘制了一个正方形！

### 使用函数创建快捷方式

现在我们已经写好了绘制正方形的代码，我们可以将这些代码保存到一个魔法关键词中，以便我们以后随时调用这个正方形的代码。每种编程语言都有办法做到这一点，而在 Python 中，它被称为 *函数*，是计算机编程中最重要的特性。函数使代码更加简洁，且更易于维护，分解问题为多个函数通常能帮助我们找到最好的解决方法。之前你已经使用了一些 turtle 模块中的内置函数，在这一节中你将学习如何定义自己的函数。

要定义一个函数，首先给它起个名字。这个名字可以是任何你想要的，只要它不是 Python 关键字，比如 `list`、`range` 等等。在命名函数时，最好使用具有描述性的名字，这样以后使用时可以记得它的用途。我们将我们的函数命名为 `square()`，因为我们将用它来绘制一个正方形：

*myturtle.py*

`def square():`

`for i in range(4):`

forward(100)

right(90)

def命令告诉Python我们正在定义一个函数，接下来列出的单词将成为函数名称；这里是square()。不要忘记square后面的圆括号！它们在Python中表示你正在处理一个函数。稍后我们会在括号中放入值，但即使括号内没有任何值，也需要包括括号，这样Python才知道你正在定义一个函数。还有，别忘了在函数定义的末尾加上冒号。注意，我们会缩进函数内部的所有代码，让Python知道哪些代码是属于函数内部的。

如果你现在运行这个程序，什么也不会发生。你已经定义了一个函数，但你还没有告诉程序去运行它。要做到这一点，你需要在*myturtle.py*文件末尾的函数定义后面*调用*这个函数。输入[列表1-1](ch01.xhtml#ch01list1)中显示的代码。

*myturtle.py*

from turtle import *

shape('turtle')

def square():

for i in range(4):

forward(100)

right(90)

square()

*列表1-1：square()函数在文件末尾被调用*。

当你像这样在最后调用square()时，程序应该可以正常运行。现在你可以在程序的任何地方再次使用square()函数，快速绘制另一个正方形。

你还可以在循环中使用这个函数来构建更复杂的图形。例如，要绘制一个正方形，稍微向右转一下，画另一个正方形，再向右转一下，重复这些步骤多次，把函数放在循环内会更有意义。

下一个练习展示了一种由正方形组成的有趣形状！可能需要一段时间才能绘制出这个形状，因此你可以通过在*myturtle.py*中shape('turtle')后添加speed()函数来加速它的绘制。使用speed(0)使乌龟移动得最快，而speed(1)则是最慢的。如果你愿意，可以尝试不同的速度，比如speed(5)和speed(10)。

练习 1-2：正方形的圆

编写并运行一个绘制60个正方形的函数，每个正方形绘制完后向右转5度。使用循环！你的结果应该像这样：

![image](../images/f011-01.jpg)

### 使用变量绘制图形

到目前为止，我们的所有正方形大小都一样。为了绘制不同大小的正方形，我们需要改变乌龟每条边前进的距离。与其每次想要不同的大小时都修改square()函数的定义，我们可以使用一个*变量*，在Python中，变量是代表可以更改的值的一个单词。这类似于代数中的*x*，它可以表示一个在方程中可以变化的值。

在数学课上，变量通常是单个字母，但在编程中，你可以给变量任何你想要的名称！就像函数一样，我建议给变量取一些具有描述性的名字，这样有助于更容易地阅读和理解你的代码。

#### 在函数中使用变量

当你定义一个函数时，可以使用变量作为函数的参数放在括号内。例如，你可以将 *myturtle.py* 程序中的 square() 函数定义更改为如下，来创建任何大小的正方形，而不是固定大小的正方形：

*myturtle.py*

def square(sidelength):

for i in range(4):

forward(sidelength)

right(90)

在这里，我们使用 sidelength 来定义 square() 函数。现在，当你调用这个函数时，必须在括号内放入一个值，我们称之为 *参数*，无论括号内的数字是什么，它都会取代 sidelength。比如，调用 square(50) 和 square(80) 将如下所示：[图 1-5](ch01.xhtml#ch01fig5)。

![image](../images/f012-01.jpg)

*图 1-5：一个大小为50的正方形和一个大小为80的正方形*

当你使用一个变量来定义一个函数时，你可以简单地通过输入不同的数字来调用 square() 函数，而无需每次更新函数定义。

#### 变量错误

目前，如果我们忘记在函数的括号中填入值，我们将得到这个错误：

Traceback (most recent call last):

文件 "C:/Something/Something/my_turtle.py"，第12行，位于 <module>

square()

TypeError: square() 缺少 1 个必需的位置参数：'sidelength'

这个错误告诉我们，我们缺少了边长的值，因此Python不知道正方形的大小。为避免此问题，我们可以在函数定义的第一行为边长设置一个默认值，像这样：

def square(sidelength=100):

在这里，我们为 sidelength 设置了一个默认值100。现在，如果我们在 square 后面的括号内输入一个值，它将画出那个长度的正方形；如果我们留空括号，它将默认画出边长为100的正方形，并且不会给我们错误。更新后的代码应生成如下所示的图形：[图 1-6](ch01.xhtml#ch01fig6)：

square(50)

square(30)

square()

![image](../images/f012-02.jpg)

*图 1-6：一个默认大小为100的正方形，一个大小为50的正方形，一个大小为30的正方形*

设置像这样的默认值使得使用我们的函数变得更容易，不必担心如果做错了什么会出错。在编程中，这被称为让程序变得更加 *健壮*。

练习 1-3：尝试再试

编写一个 triangle() 函数，绘制一个给定“边长”的三角形。

### 等边三角形

一个 *多边形* 是一个多边形的图形。一个 *等边三角形* 是一种特殊类型的多边形，它有三个相等的边。[图 1-7](ch01.xhtml#ch01fig7) 展示了它的样子。

![image](../images/f013-01.jpg)

*图 1-7：等边三角形的角度，包括一个外角*

等边三角形有三个相等的内角，角度为60度。这是你可能从几何课上记得的一个规则：所有等边三角形的三个角度加起来为180度。实际上，这对于所有三角形都适用，不仅仅是等边三角形。

#### 编写 triangle() 函数

让我们利用你迄今为止学到的知识，编写一个函数，使海龟沿着三角形路径行走。因为等边三角形的每个角度都是60度，你可以将 `square()` 函数中的 `right()` 移动更新为60度，像这样：

*myturtle.py*

def triangle(sidelength=100):

for i in range(3):

forward(sidelength)

right(60)

triangle()

但当你保存并运行这个程序时，你不会得到一个三角形。相反，你会看到类似 [图 1-8](ch01.xhtml#ch01fig8) 的内容。

![image](../images/f014-01.jpg)

*图 1-8：首次尝试绘制三角形*

看起来我们开始绘制的是一个六边形（六边形多边形），而不是三角形。我们得到一个六边形而不是三角形，是因为我们输入了60度，这是等边三角形的*内角*。我们需要将*外角*输入到 `right()` 函数中，因为海龟是转动外角，而不是内角。正方形没有这个问题，因为正方形的内角和外角恰好是相同的：90度。

要找到三角形的外角，只需从180度中减去内角的值。也就是说，等边三角形的外角是120度。将代码中的60更新为120，你就应该得到一个三角形。

练习 1-4：多边形函数

编写一个名为 `polygon` 的函数，该函数接收一个整数作为参数，并让海龟绘制一个具有该整数个边的多边形。

#### 让变量变化

变量还有更多的用途：我们可以自动增加变量的值，使得每次运行函数时，绘制的正方形比上一个更大。例如，使用一个长度变量，我们可以绘制一个正方形，然后在绘制下一个正方形之前稍微增加该长度变量，如下所示：

length = length + 5

作为一个数学爱好者，当我第一次看到这行代码时，我完全不理解！怎么可能“length 等于 length + 5”？这不可能！但是代码并不是方程式，在这种情况下，等号（=）并不意味着“这一边等于那一边”。*在编程中，等号意味着我们在赋值*。

参考以下示例。打开 Python 终端并输入以下代码：

>>> radius = 10

这意味着我们正在创建一个名为 `radius` 的变量（如果它还不存在的话），并将其赋值为 10。你以后可以随时为它赋不同的值，像这样：

radius = 20

按下 ENTER 键，代码将会被执行。这意味着值 20 将被赋给 `radius` 变量。要检查一个变量是否等于某个值，可以使用双等号（==）。例如，要检查 `radius` 变量的值是否为 20，你可以在终端中输入以下代码：

>>> radius == 20

按下 ENTER 键，它应该打印出以下内容：

True

现在半径变量的值是 20。递增变量通常比手动赋值更有用。你可以使用一个叫做 count 的变量来计数程序中某个事件发生了多少次。它应该从 0 开始，每发生一次事件就增加 1。为了使一个变量的值增加 1，你可以将其值加 1 然后将新值赋给该变量，像这样：

count = count + 1

你也可以按如下方式编写代码，使代码更加简洁：

count += 1

这意味着“把 1 加到我的 count 变量”。你可以使用加法、减法、乘法和除法来表示这种语法。让我们通过在 Python shell 中运行以下代码来看看实际效果。我们将 x 赋值为 12，y 赋值为 3，然后让 x 增加 y 的值：

>>> x = 12

>>> y = 3

>>> x += y

>>> x

15

>>> y

3

注意 y 没有变化。我们可以使用加法、减法、乘法和除法来递增 x，方法类似：

>>> x += 2

>>> x

17

现在我们将 x 设置为当前值减去 1：

>>> x -= 1

>>> x

16

我们知道 x 是 16。现在让我们将 x 设置为当前值的两倍：

>>> x *= 2

>>> x

32

最后，我们可以通过将 x 除以 4 来将它设置为当前值的四分之一：

>>> x /= 4

>>> x

8.0

现在你知道如何使用算术运算符和等号递增一个变量了。总结一下，x += 3 会使 x 增加 3，而 x -= 1 会使它减少 1，依此类推。

你可以使用以下代码使长度在每次循环时递增 5，这将在接下来的练习中派上用场：

length += 5

使用这种语法，每次使用 length 变量时，5 会被加到该值上并保存在变量中。

练习 1-5：TURTLE 螺旋

创建一个函数绘制 60 个方形，每画一个方形后旋转 5 度，每个后续的方形比前一个大。起始长度为 5，每个方形递增 5 单位。它应该像这样：

![image](../images/f016-01.jpg)

### 总结

在本章中，你学会了如何使用 Python 的 turtle 模块及其内置函数，如 forward() 和 right()，来绘制不同的形状。你还看到，turtle 能执行比我们这里讲解的更多功能。还有很多其他功能，我鼓励你在进入下一章之前先进行实验。如果你在网上搜索 “python turtle”，第一个结果可能会是官方 Python 网站上的 turtle 模块文档 (*[https://python.org/](https://python.org/)*)。你将在该页面上找到所有的 turtle 方法，其中一些在[图 1-9](ch01.xhtml#ch01fig9)中有展示。

![image](../images/f017-01.jpg)

*图 1-9：你可以在 Python 官网找到更多的 turtle 函数和方法！*

你学会了如何定义自己的函数，从而节省了宝贵的代码，可以随时重用。你还学会了如何使用 for 循环多次运行代码，而不必重写代码。掌握如何使用函数和循环节省时间并避免错误，对于以后构建更复杂的数学工具会非常有用。

在下一章中，我们将基于你用于递增变量的基本算术运算符进行扩展。你将学习更多关于 Python 中基本运算符和数据类型的内容，并了解如何使用它们来构建简单的计算工具。我们还将探讨如何将项存储在列表中，并使用索引来访问列表项。

练习 1-6：星星的诞生

首先，编写一个“star”函数，它将绘制一个五角星，像这样：

![image](../images/f018-01.jpg)

接下来，编写一个名为 starSpiral() 的函数，它将绘制一个星形螺旋，像这样：

![image](../images/f018-02.jpg)
