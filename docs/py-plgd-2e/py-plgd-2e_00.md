# 第一章：序言

![](img/nsp-venkitachalam503045-circle-image.jpg)

欢迎来到*Python Playground*的第二版！在这本书中，你将发现 15 个令人兴奋的项目，旨在鼓励你探索 Python 编程的世界。这些项目涵盖了广泛的主题，如绘制涡旋图样式的图案、3D 渲染、与音乐同步投射激光图案以及使用机器学习进行语音识别。这些项目不仅本身很有趣，而且提供了大量扩展的空间，旨在成为你探索自己创意的起点。

## 这本书适合谁？

*Python Playground*是为任何好奇如何通过编程理解和探索想法的人写的。本书中的项目假设你已经掌握了基本的 Python 语法和编程概念，并且熟悉高中数学。我尽力详细解释了所有项目所需的数学内容。

本书并非为你的第一本 Python 书籍设计。我不会带你走过基础知识。然而，我会展示如何使用 Python 解决一系列实际问题。通过这些项目，你将深入了解 Python 编程语言的细节，并学习如何使用一些流行的 Python 库。但或许更重要的是，你将学会如何将一个问题分解为多个部分，开发一个算法来解决该问题，然后从头开始使用 Python 实现解决方案。

解决现实世界的问题可能是困难的，因为这些问题通常是开放式的，并且需要在多个领域拥有专业知识。但 Python 提供了促进问题解决的工具。克服困难并找到解决实际问题的方案是你成为一名专家程序员道路上最重要的部分。

## 本书内容

让我们快速浏览一下本书的章节。第一部分包含了一些入门项目，帮助你开始。

第一章：科赫雪花 使用递归函数和`turtle`图形绘制一个有趣的分形图形。

第二章：涡旋图 使用参数方程和`turtle`图形绘制类似玩具涡旋图产生的曲线。

第二部分包含使用数学模型创建计算机模拟现实世界现象的项目。

第三章：康威的生命游戏 使用`numpy`和`matplotlib`实现一个著名的细胞自动机，基于几个简单的规则，生成一个不断演化、栩栩如生的系统。

第四章：卡尔普斯-斯特朗音阶利用该算法逼真地模拟拨弦乐器的声音，并通过`pyaudio`播放这些声音。

第五章：群体行为使用`numpy`和`matplotlib`实现 Boids 算法，并模拟鸟类的群体行为。

第三部分中的项目将介绍如何使用 Python 读取和操作 2D 图像。

第六章：ASCII 艺术通过将图像转换为基于文本的 ASCII 艺术，介绍了`Pillow`，它是 Python 图像库（PIL）的一个分支。

第七章：照片拼贴通过拼接一系列较小的图像来创建一个可以识别的大图像。

第八章：自适应立体图使用深度图和像素操作将 3D 图像的幻觉嵌入到 2D 图像中。

在第四部分中，你将学习如何使用着色器和 OpenGL 库，通过直接操作图形处理单元（GPU）快速高效地渲染 3D 图形。

第九章：理解 OpenGL 介绍了使用 OpenGL 创建简单 3D 图形的基础。

第十章：环面上的康威生命游戏回顾了第三章的模拟，并将其呈现在 3D 环面表面上。

第十一章：体积渲染实现体积光线投射算法以渲染体积数据，这是一种常用于医学影像（如 MRI 和 CT 扫描）的技术。

最后，在第五部分中，你将与树莓派及其他电子元件一起工作，将 Python 部署到嵌入式系统中。

第十二章：树莓派 Pico 上的卡尔普斯-斯特朗通过在微型树莓派 Pico 微控制器上实现第四章中的卡尔普斯-斯特朗算法，创建一个可演奏的电子乐器，使用 MicroPython。

第十三章：树莓派激光音频显示利用树莓派上的 Python 控制两个旋转镜子和激光器，生成与声音响应的激光光秀。

第十四章：物联网花园使用蓝牙低能耗将树莓派与运行 CircuitPython 的 Adafruit 硬件连接，创建一个物联网系统以监控你花园中的温度和湿度水平。

第十五章：树莓派上的音频机器学习通过在树莓派上实现语音识别系统，介绍了使用 TensorFlow 的激动人心的机器学习世界。

每章的结尾都有一个“实验！”部分，提供了如何扩展项目或进一步探索当前主题的建议。

## 第二版的新内容

第二版新增了五个项目，包括第一章中的科赫雪花项目和第十章中的康威生命游戏 3D 版本。最显著的更新出现在硬件部分，该部分已简化，专注于基于 Raspberry Pi 的系统，而不再是 Raspberry Pi 和 Arduino 的混合。因此，第 V 部分中的每个项目要么是新的（第十二章、第十四章、第十五章），要么已被彻底重设计（第十三章）。

仅依赖 Raspberry Pi 简化了硬件项目的设置过程，同时也保持了书籍对 Python 编程的关注。你不再需要在 Python 和用 Arduino 编程语言（C++的一种变体）编写的代码之间切换。通过更新后的第 V 部分，你还将体验使用 MicroPython 和 CircuitPython 进行编程，它们是为资源受限的嵌入式系统优化的两种 Python 变体。

第二版的其他重要更新包括：

+   • 在第四章中，使用`pyaudio`而不是`pygame`来播放 WAV 文件。

+   • 在第七章中，比较线性搜索算法和 k-d 树数据结构在查找最佳图像匹配时的性能，用于光栅拼图。

+   • 在第八章中，提供了如何创建自己的深度图以生成自动立体图的指南。

+   • 在附录 A 中，简化了使用标准 Anaconda 发行版 Python 的安装说明。

除了这些具体的更新外，整个文本已被审查、修正和澄清，代码也根据需要进行了更新，以反映自第一版发布以来 Python 的变化。

## 为什么选择 Python？

Python 是探索编程的理想语言。作为一种多范式语言，它为你提供了大量的灵活性来组织程序。你可以将 Python 用作*脚本*语言，简单地执行代码，也可以用作*过程式*语言，将程序组织成互相调用的函数集合，或者用作*面向对象*语言，通过类、继承和模块建立层次结构。这种灵活性使你能够选择最适合特定项目的编程风格。

当你使用像 C 或 C++ 这样更传统的语言进行开发时，你必须先编译和链接代码才能运行。而在 Python 中，你可以在编辑后直接运行代码。（在后台，Python 会将你的代码编译成中间字节码，然后由 Python 解释器运行，但这些过程对你作为用户是透明的。）实际上，使用 Python 修改和反复运行代码的过程要简单得多。

Python 提供了一组非常简单且强大的数据结构。如果你已经理解了字符串、列表、元组、字典、列表推导式以及 `for` 和 `while` 循环等基本控制结构，那么你已经迈出了很好的第一步。Python 简洁而富有表现力的语法使得你可以用少量的代码行执行复杂的操作。一旦你熟悉了 Python 内建和第三方模块，你将拥有一整套工具来解决像本书中讨论的实际问题。Python 提供了标准的方式来从 Python 调用 C/C++ 代码，反之亦然，并且因为你可以找到几乎能做任何事的 Python 库，所以将 Python 与其他语言模块结合在更大的项目中非常容易。这就是为什么 Python 被认为是一个出色的 *粘合剂* 语言——它使得将不同的软件组件组合起来变得轻而易举。在 第 IV 部分 中的 3D 图形项目展示了 Python 如何与类似 C 的 OpenGL 着色语言并肩工作，而在 第十四章 中，你甚至会将一些 HTML、CSS 和 JavaScript 混合在一起，为你的物联网花园监控器创建一个 Web 界面。实际的软件项目通常使用多种软件技术的组合，Python 在这样的分层架构中非常合适。

Python 还提供了一个方便的工具——Python 解释器。它让你可以轻松检查代码语法，进行快速计算，甚至测试正在开发中的代码。当我编写 Python 代码时，我会同时打开三个窗口：一个文本编辑器，一个终端，和一个 Python 解释器。当我在编辑器中开发代码时，我会将我的函数或类导入到解释器中并实时测试。

我还使用解释器来了解新模块的使用方式，随后再将它们整合到我的代码中。例如，在开发 第十四章 中的物联网花园项目时，我想测试 `sqlite3` 数据库模块。我启动了 Python 解释器，并尝试了以下操作，以确保我理解如何创建和添加数据库条目：

>>> `import sqlite3`

>>> `con = sqlite3.connect('test.db')`

>>> `cur = con.cursor()`

>>> `cur.execute("CREATE TABLE sensor_data (TS datetime, ID text, VAL numeric)")`

>>> `for i in range(10):`

...   `cur.execute("INSERT into sensor_data VALUES (datetime('now'),'ABC',  ?)", (i, ))`

>>> `con.commit()`

>>> `con.close()`

>>> `exit()`

然后，为了确保它正常工作，我执行了以下操作来检索我添加的一些数据：

```py
>>> `con = sqlite3.connect('test.db')`
>>> `cur = con.cursor()`
>>> `cur.execute("SELECT * FROM sensor_data WHERE VAL > 5")`
>>> `print(cur.fetchall())`
[('2021-10-16 13:01:22', 'ABC', 6), ('2021-10-16 13:01:22', 'ABC', 7),
 ('2021-10-16 13:01:22', 'ABC', 8), ('2021-10-16 13:01:22', 'ABC', 9)]

```

这个示例展示了 Python 解释器作为一个强大开发工具的实际应用。你不需要编写完整的程序来做快速实验；只需打开解释器，开始实验。这只是我喜欢 Python 的众多原因之一，也是我认为你也会喜欢 Python 的原因。

## 本书中的代码

在本书中，我已经尽力详细地带领你逐步走过每个项目的代码。你可以自己输入代码，或者通过[`github.com/mkvenkit/pp2e`](https://github.com/mkvenkit/pp2e)下载本书中所有程序的完整源代码（使用下载 Zip 选项）。

在接下来的几页中，你将会看到几个令人兴奋的项目。我希望你在玩这些项目时能像我创建它们时一样开心。别忘了通过每个项目结尾处的实验进一步探索。我祝你在使用*Python Playground*编程时度过许多快乐的时光！
