## **引言**

![image](../images/common01.jpg)

欢迎来到 *不切实际的 Python 项目*！在这里，你将使用 Python 编程语言探索火星、木星和银河系的最远处；诗人的灵魂；高金融的世界；间谍和选票篡改的黑暗世界；游戏节目的诡计；等等。你将使用诸如马尔可夫链分析来写俳句、蒙特卡洛模拟来建模金融市场、图像堆叠来提高天文摄影水平，以及遗传算法来培养一支巨型老鼠军队，同时获得对 pygame、Pylint、pydocstyle、tkinter、python-docx、matplotlib 和 pillow 等模块的经验。而最重要的是，你会玩得很开心。

### **本书适合谁阅读**

你可以把这本书当作你的第二本 Python 书籍。它旨在补充和跟随任何一本面向初学者的书籍或入门课程。你将能够通过基于项目的方法继续自学，而无需浪费金钱或书架空间在你已经学过的概念的彻底复习上。不过不用担心，我不会让你陷入困境；所有的代码都有注释并做了解释。

这些项目适合任何想利用编程进行实验、测试理论、模拟自然或仅仅是为了娱乐的人。这包括那些在工作中使用编程的人（如科学家和工程师），但他们并非专业程序员，以及那些我称之为“决心非专业人士”的人——喜欢将编程问题当作一种有趣消遣的业余爱好者。如果你曾经想尝试书中提出的概念，但觉得从头开始可能会因为项目过于复杂而让人却步，或者觉得时间消耗过大，那么这本书就是为你准备的。

### **本书内容**

在你完成项目的过程中，你将增加对有用的 Python 库和模块的了解；学习更多的快捷方式、内置函数和有用的技巧；并练习设计、测试和优化程序。此外，你还将能够将所做的工作与现实世界的应用、数据集和问题联系起来。

引用拉尔夫·瓦尔多·爱默生的话：“没有热情，就没有伟大的成就。”学习也是如此。本书的最终目标是激发你的想象力，并引导你开发自己感兴趣的项目。如果一开始这些项目看起来过于雄心勃勃，不用担心；只要一点点勤奋和大量的谷歌搜索，就能创造奇迹——而且比你想象的更快。

以下是本书各章节的概览。你不需要按顺序进行，但最简单的项目在前面，我会在首次介绍时更加详细地解释新的概念、模块和技巧。

**[第1章](ch01.xhtml#ch01)：傻乎乎的名字生成器** 这个热身项目介绍了Python的PEP 8和PEP 257风格指南，以及Pylint和pydocstyle模块，它们用来分析你的代码是否符合这些指南。最终产品是一个灵感来自美国网络电视节目*Psych*的傻乎乎的名字生成器。

**[第2章](ch02.xhtml#ch02)：寻找回文咒语** 在拯救DC漫画中的女巫Zatanna免于痛苦死亡的过程中，学习如何对你的代码进行性能分析。在线搜索字典，寻找Zatanna需要的神奇回文咒语，帮助她打败一个时间逆转的反派。

**[第3章](ch03.xhtml#ch03)：解开字谜** 编写一个程序，帮助用户从他们的名字创建一个短语字谜；例如，*Clint Eastwood* 可以变成 *old west action*。然后帮助汤姆·马沃洛·里德尔通过语言筛选法推导出他的字谜，“I am Lord Voldemort”。

**[第4章](ch04.xhtml#ch04)：解码美国内战密码** 调查并破解历史上最成功的军事密码之一——联邦路线密码。然后帮助双方间谍使用锯齿形铁路篱笆密码发送和解码秘密信息。

**[第5章](ch05.xhtml#ch05)：编码英国内战密码** 通过解码英国内战中的“无内容密码”来读取一个显而易见的信息。然后设计并实现代码，完成更具挑战性的任务——*编写*一个无内容密码，从而拯救玛丽·斯图亚特女王的性命。

**[第6章](ch06.xhtml#ch06)：用隐形墨水写字** 帮助一名企业间谍背叛夏洛克·福尔摩斯的父亲，并用隐形电子墨水逃避追踪。本章基于CBS电视节目*Elementary*的一集。

**[第7章](ch07.xhtml#ch07)：用遗传算法培育巨型老鼠** 运用遗传算法——灵感来自达尔文的进化论——培育出一种超大号的老鼠，体型与雌性斗牛獒相当。然后帮助詹姆斯·邦德在一瞬间破解一个有100亿个可能组合的保险箱。

**[第8章](ch08.xhtml#ch08)：为俳句诗歌计算音节** 教你的计算机计算英语单词的音节，为下一章写作日本诗歌（俳句）做准备。

**[第9章](ch09.xhtml#ch09)：通过马尔科夫链分析写俳句** 教你的计算机通过结合[第8章](ch08.xhtml#ch08)中的音节计数模块和马尔科夫链分析，以及数百首古代和现代俳句的训练语料库，来写*俳句*。

**[第10章](ch10.xhtml#ch10)：我们是孤独的吗？探索费米悖论** 使用德雷克方程、银河系的尺寸和有关可探测“辐射气泡”大小的假设，调查外星无线电信号的缺失。学习并使用流行的tkinter模块，构建一个显示银河系和地球无线电气泡的图形界面。

**[第11章](ch11.xhtml#ch11)：蒙提霍尔问题** 帮助世界上最聪明的女性赢得蒙提霍尔问题的辩论。然后使用面向对象编程（OOP）构建一个版本的蒙提著名游戏，并添加一个有趣的图形界面。

**[第12章](ch12.xhtml#ch12)：保障你的退休金** 使用基于蒙特卡罗的金融模拟来规划你（或你父母）的安全退休生活。

**[第13章](ch13.xhtml#ch13)：模拟外星火山爆发** 使用pygame模拟木星的一颗卫星——欧罗巴上的火山喷发。

**[第14章](ch14.xhtml#ch14)：使用火星探测器绘制火星地图** 构建一个基于重力的街机游戏，并将卫星推动到一个圆形的地图轨道上，而不至于燃料耗尽或在大气中燃烧。显示关键参数的读数，追踪轨道路径，添加行星的阴影，并缓慢旋转火星轴线，同时学习轨道力学！

**[第15章](ch15.xhtml#ch15)：通过行星堆栈提高你的天体摄影技术** 使用Python图像库通过光学堆叠低质量的视频图像，揭示木星的云带和大红斑。学习如何使用内置的os和shutil模块处理文件、文件夹和目录路径。

**[第16章](ch16.xhtml#ch16)：利用本福特法则找出欺诈行为** 使用*本福特法则*来调查2016年总统选举中的选票篡改。使用matplotlib将结果以图表形式总结。

每一章的结尾都有至少一个实践项目或挑战项目。每个实践项目都会附带一个解决方案。这并不意味着这是*最佳*解决方案——你可能会自己想出一个更好的，所以不要偷看前面的内容！

然而，面对挑战项目时，你就真的只能依靠自己了。当科尔特斯于1519年侵入墨西哥时，他烧毁了他的卡拉维尔船队，以便他的征服者们意识到没有退路；他们必须以严峻和坚定不移的决心面对阿兹特克人。因此，“烧掉你的船只”这一表达代表了对任务的全心投入或完全承诺。这就是你应该如何面对挑战项目——就好像你的船已经被烧掉了——如果你这样做，你很可能从这些练习中学到的比书中任何其他部分都要多！

#### ***Python版本、平台和IDE***

我在本书中的每个项目都是在Microsoft Windows 10环境下使用Python v3.5构建的。如果你使用的是不同的操作系统，没问题：我会在适当的地方为其他平台提供兼容模块的建议。

本书中的代码示例和屏幕截图来自Python IDLE文本编辑器或交互式命令行界面。IDLE代表*集成开发和学习环境*。它是一个*集成开发环境（IDE）*，并在其中加入了*L*，使得这个缩写指代了*蒙提·派森*的埃里克·艾德尔。交互式命令行界面，也叫做*解释器*，是一个窗口，让你可以立即执行命令并测试代码，而无需创建文件。

IDLE有许多缺点，例如缺少行号列，但它是免费的，并且与Python一起捆绑提供，因此每个人都可以使用它。你可以使用任何你喜欢的IDE。网上有很多选择，比如Geany（发音为*genie*）、PyCharm和PyScripter。Geany适用于多种操作系统，包括Unix、macOS和Windows。PyCharm适用于Linux、Windows和macOS。PyScripter适用于Windows。要查看可用的Python开发工具和兼容平台的完整列表，请访问*[https://wiki.python.org/moin/DevelopmentTools/](https://wiki.python.org/moin/DevelopmentTools/)*。

#### ***代码***

本书中的每个项目都提供了完整的代码，并且我建议你尽可能手动输入这些代码。一位大学教授曾经告诉我，“我们通过双手学习”，我必须同意，输入代码迫使你最大程度地关注发生的事情。

如果你希望快速完成一个项目，或者不小心删除了所有的工作，你可以从*[https://www.nostarch.com/impracticalpython/](https://www.nostarch.com/impracticalpython/)*下载所有代码，包括实践项目的解决方案。这个网站还包含了本书的勘误表，以防将来有更新或更改。

#### ***编码风格***

本书讲述的是问题解决和初学者级的乐趣，因此代码有时可能会偏离最佳实践和最高效率。偶尔，你可能会使用列表推导式或特殊运算符，但大部分时间，你将专注于简单易学的代码，便于入门。

对于阅读本书的非程序员，保持代码简洁至关重要。他们的代码可能是“纸巾代码”——只为特定目的使用一两次，然后丢弃。这类代码可能会与同事共享，或者在人员变动时被强加给他们，因此它应该容易上手且易于理解。

所有主要项目代码都有注释并以独立的方式解释，通常遵循*Python增强提案8*，即*PEP 8*的风格推荐。关于PEP 8的详细信息，以及帮助你遵循这些指南的软件，见[第1章](ch01.xhtml#ch01)。

### **寻求帮助的地方**

接受编程挑战可能会很有挑战性。编程并不是总能凭直觉搞定——即使是像Python这样友好的语言。在接下来的章节中，我将提供一些有用的信息来源链接和参考，但对于你自己制定的项目，网上搜索无疑是最好的途径。

成功搜索的关键是知道该问什么。这一开始可能会非常令人沮丧，但你可以把它当作“二十个问题”的游戏。每次搜索时不断磨练你的关键词，直到找到答案或达到回报递减的点。

如果书籍和在线搜索都未能解决问题，那么下一步就是向别人请教。你可以在线提问，既可以付费，也可以在像 Stack Overflow (*[https://stackoverflow.com/](https://stackoverflow.com/)* ) 这样的免费论坛上提问。但要注意：这些网站的成员对愚蠢的问题容忍度不高。在发帖之前，一定要阅读他们的“如何提问？”页面；例如，你可以在 *[http://stackoverflow.com/help/how-to-ask/](http://stackoverflow.com/help/how-to-ask/)* 找到 Stack Overflow 的相关页面。

### **前进！**

感谢你花时间阅读介绍！你显然希望从这本书中尽可能多地获益，而你已经迈出了良好的第一步。当你读完本书后，你将更加熟练地使用 Python，并能更好地应对挑战性的实际问题。让我们开始吧。
