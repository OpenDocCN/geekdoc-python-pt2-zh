## **C**

**调试你的列表**

![image](img/common01.jpg)

本书中的一些列表可能第一次无法运行。不要气馁！在编程中，即使是经验丰富的编码者也会遇到这种情况。这是很正常的，尤其是容易忽略那些会对程序产生巨大影响的细节。修复程序中的错误称为 *调试*。

为了尽量减少问题，我将列表保持尽可能简短，因此如果某个列表中的内容不起作用，你就不必检查太多的指令。当文本中有任何特别棘手的地方时，我也会给出警告，提醒你需要注意。

记住，如果你无法找出修复程序的方法，可以使用你在书籍资源中下载的该列表版本（参见 “ZIP 文件中包含的内容” 在 第 8 页）。如果你已修改程序，试着将我提供的列表中新的部分复制并粘贴到你的程序中。

在本附录中，我总结了一些提示，帮助你修复无法运行的程序。当 Python 检测到错误时，通常会显示出程序中第一次发现问题的那一行。这并不总是实际错误所在的那一行，它仅仅表示 Python 在检测到问题之前执行到的那一行。如果显示的这一行看起来没问题，可以先检查上一行，然后检查列表中的其他新指令是否存在错误。

### **缩进**

缩进用于告诉 Python 哪些部分属于程序中的同一块。例如，所有属于一个函数的指令都需要在定义函数的 def 指令下面进行缩进。属于 while、for、if 或 else 命令的指令也需要缩进。列表 C-1 提供了一个示例，这是 get_floor_type() 函数的一部分。

--snip--

➊ def get_floor_type():

➋     if current_room in outdoor_rooms:

➌         return 2 # 土壤

➍     else:

➎         return 0 # 瓷砖地板

--snip--

*列表 C-1：游戏列表的摘录，显示缩进级别*

所有的指令都属于函数 get_floor_type() ➊，因此它们都缩进了至少四个空格（参见 ➋ 和 ➍）。返回指令（➌ 和 ➎）也属于 if ➋ 和 else ➍ 命令，因此它们再缩进了四个空格，总共是八个空格。当你在输入 def、if 和 else 指令时，在行末加上冒号后，IDLE 会自动添加下一行的缩进。使用 DELETE 键删除不需要的缩进。

如果你在某些指令的缩进级别上出错，程序可能会表现得异常，甚至变得更慢，即使 Python 没有报告任何错误。所以，值得仔细检查你的缩进级别。

如果 Python 给出一个错误提示，表明它期待一个缩进的代码块，意味着你没有对应该缩进的内容进行缩进。如果 Python 提示你有一个意外的缩进，说明你在指令的开头加了过多的空格，或者你可能有指令的缩进层级不一致，应该对齐。在本书中，我使用了四个空格作为每个缩进层级。

### **大小写敏感性**

Python 是大小写敏感的，这意味着使用大写字母（ABC…）或小写字母（abc…）是有区别的。通常，写 Python 代码时应该使用小写字母。以下是例外情况：

+   布尔值 True、False 和 None 以大写字母开头。正确输入时，它们在 IDLE 中会显示为橙色。

+   程序中的某些变量、字典和列表名称是大写的，例如 TILE_SIZE 和 PLAYER。如果你的大小写不一致，可能会收到错误提示，指出某个名称未定义。Python 不会将大小写不同的两个名称视为相同的名称。（同时检查名称的拼写错误。）

+   引号中的内容可以有大小写差异。这是程序用来执行某些操作的文本，通常写得让人类阅读时看起来是正确的。

+   Python 会忽略行中 # 符号后的内容，因此你可以随意使用任何大小写格式。

### **圆括号和方括号**

检查你是否使用了正确的括号形状和顺序，尤其是当 Python 提示你列表或字典中有问题时：

+   圆括号 () 用于元组以及向函数提供信息。例如，range()、print() 和 len() 函数都使用圆括号。我们的 *Escape* 游戏中的函数也如此，例如 remove_object() 和 draw_image()。

+   方括号 [] 标记一个列表的开始和结束。有时候，你可能会在一个列表中嵌套另一个列表，因此会有多个方括号对。

+   花括号 {} 用于标记字典的开始和结束。

### **冒号**

当代码行以 for、while、if、else 或 def 开头时，需要在行末加上冒号（:）。冒号还用于在字典中分隔键和值。*Escape* 列表中没有使用分号（;），因此如果你的代码中有分号，请将其改为冒号。

### **逗号**

列表或元组中的项之间需要使用逗号。当向列表添加新行时，确保在添加新项之前，在最后一项后面加上逗号。通过检查数据中的模式，你可以帮助自己发现任何关于逗号的错误。例如，在 props 字典和 recipes 列表中的每个列表都有三个数字。

### **图像和声音**

如果 Python 提示你没有找到图像或声音目录，检查你是否已下载了文件，并将文件保存在正确的位置。参见 “下载游戏文件” 第 7 页和 Listing 1-1 第 19 页。

### **拼写**

IDLE 的颜色编码可以帮助你发现某些指令中的拼写错误。检查屏幕上的颜色是否与书中的颜色匹配。拼写变量和列表时要小心：任何错误都可能导致程序停止或表现异常。
