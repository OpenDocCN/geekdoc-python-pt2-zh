<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch04"><span epub:type="pagebreak" id="page_69"/><span class="big">4</span><br/>REPEATING CODE: INDEFINITE LOOPS</h2>&#13;&#13;
<div class="imagec"><img src="Images/common.jpg" alt="image" width="150" height="150"/></div>&#13;&#13;
<p class="noindents">The <span class="literal">for</span> loops and range <span class="literal">for</span> loops that you learned in <a href="ch03.xhtml#ch03">Chapter 3</a> are convenient for looping through a string or range of indices. But what do we do when we have no string or when the indices do not follow a fixed pattern? We use a <span class="literal">while</span> loop, the topic of this chapter. <span class="literal">while</span> loops are more general than <span class="literal">for</span> loops and can handle situations that a <span class="literal">for</span> loop cannot.</p>&#13;&#13;
<p class="indent">We’ll solve three problems where <span class="literal">for</span> loops fall short: determining the number of times slot machines can be played, organizing a song playlist until the user wants to stop, and decoding an encoded message.</p>&#13;&#13;
<h3 class="h3a" id="ch04lev1sec1"><span class="h3aa">Problem #8: Slot Machines</span></h3>&#13;&#13;
<p class="noindent">How many times can slot machines be played before we run out of money? This is a subtle question that depends not only on our starting money but also on the pattern of winnings as we play. We’ll see that we need a <span class="literal">while</span> loop, not a <span class="literal">for</span> loop, for this situation.</p>&#13;&#13;
<p class="indent">This is DMOJ problem <span class="literal">ccc00s1</span>.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec1"><span epub:type="pagebreak" id="page_70"/>The Challenge</h4>&#13;&#13;
<p class="noindent">Martha goes to a casino and brings <em>n</em> quarters. The casino has three slot machines, and she plays them in order until she has no quarters left. That is, she plays the first slot machine, then the second, then the third, then back to the first, then the second, and so on. Each play costs one quarter.</p>&#13;&#13;
<p class="indent">The slot machines operate according to the following rules:</p>&#13;&#13;
<ul>&#13;&#13;
<li class="noindent">The first slot machine pays 30 quarters every 35th time it is played.</li>&#13;&#13;
<li class="noindent">The second slot machine pays 60 quarters every 100th time it is played.</li>&#13;&#13;
<li class="noindent">The third slot machine pays 9 quarters every 10th time it is played.</li>&#13;&#13;
<li class="noindent">No other plays pay anything.</li>&#13;&#13;
</ul>&#13;&#13;
<p class="indent">Determine the number of times Martha plays before she has no quarters left.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec2">Input</h4>&#13;&#13;
<p class="noindent">The input consists of four lines.</p>&#13;&#13;
<ul>&#13;&#13;
<li class="noindent">The first line contains an integer <em>n</em>, the number of quarters that Martha brings to the casino. <em>n</em> is between 1 and 1,000.</li>&#13;&#13;
<li class="noindent">The second line contains an integer indicating the number of times that the first slot machine has been played since it last paid. These plays occurred prior to Martha arriving, and Martha’s plays continue from there. For example, suppose that the first slot machine has been played 34 times since it last paid. Then, Martha will win 30 quarters the first time she plays it.</li>&#13;&#13;
<li class="noindent">The third line contains an integer indicating the number of times that the second slot machine has been played since it last paid.</li>&#13;&#13;
<li class="noindent">The fourth line contains an integer indicating the number of times that the third slot machine has been played since it last paid.</li>&#13;&#13;
</ul>&#13;&#13;
<h4 class="h4" id="ch04lev2sec3">Output</h4>&#13;&#13;
<p class="noindent">Output the following sentence, where <span class="codeitalic">x</span> is the number of times Martha plays before she has no quarters left:</p>&#13;&#13;
<p class="programs">Martha plays <span class="codeitalic1">x</span> times before going broke.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec2">Exploring a Test Case</h3>&#13;&#13;
<p class="noindent">Let’s run through an example, just to make sure that everything in this problem is clear. Here’s the test case we’ll use:</p>&#13;&#13;
<p class="programs">7<br/>&#13;&#13;
28<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_71"/>&#13;&#13;
0<br/>&#13;&#13;
8</p>&#13;&#13;
<p class="indent">To carefully trace Martha’s plays, we’ll need to keep track of six pieces of information. It’s convenient to use a table to do this, since a row can tell us the state after each play. Here are our columns:</p>&#13;&#13;
<p class="uln-indent"><strong>Plays</strong> the number of slot machines that Martha has played</p>&#13;&#13;
<p class="uln-indent"><strong>Quarters</strong> the number of quarters that Martha has</p>&#13;&#13;
<p class="uln-indent"><strong>Next play</strong> the slot machine that Martha would play next</p>&#13;&#13;
<p class="uln-indent"><strong>First plays</strong> the number of times that the first machine has been played since it last paid</p>&#13;&#13;
<p class="uln-indent"><strong>Second plays</strong> the number of times that the second machine has been played since it last paid</p>&#13;&#13;
<p class="uln-indentb"><strong>Third plays</strong> the number of times that the third machine has been played since it last paid</p>&#13;&#13;
<p class="indent">To start, Martha has played zero slot machines, she has seven quarters, and she’ll next play the first slot machine. The first slot machine has been played 28 times since it last paid, the second has been played 0 times since it last paid, and the third has been played 8 times since it last paid. Our state looks like this:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">0</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">7</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">first</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">28</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">0</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">8</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="indent">Martha starts by playing the first slot machine. That costs one quarter. Because this is the 29th time this machine has been played since it last paid, not the 35th, the slot machine pays Martha nothing. Martha will play the second slot machine next. This is our new state:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">1</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">6</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">second</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">29</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">0</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">8</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="indent">Playing the second slot machine costs one quarter. Because this is the first time this machine has been played since it last paid, not the 100th, the slot machine pays Martha nothing. Martha will play the third slot machine next. This is our new state:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr class="borderb">&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">2</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">5</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">third</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">29</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">1</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">8</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_72"/>Playing the third slot machine costs one quarter. Because this is the 9th time this machine has been played since it last paid, not the 10th, the slot machine pays Martha nothing. Next, Martha will cycle back to the first slot machine. This is our new state:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">3</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">4</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">first</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">29</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">1</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">9</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="noindent">Now Martha plays the first slot machine:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">4</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">3</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">second</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">30</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">1</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">9</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="noindent">Then Martha plays the second slot machine:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">5</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">2</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">third</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">30</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">2</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">9</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="indent">Martha is almost out of quarters! But there’s good news coming, because she’s next going to play the third slot machine. It has been played nine times since it last paid. The next play is therefore its 10th, which pays Martha nine quarters. She had two quarters, pays one to play this machine, and then gets paid nine, so she’ll have 2 – 1 + 9 = 10 quarters after this play:</p>&#13;&#13;
<table class="bordertb">&#13;&#13;
<colgroup>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:20%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
<col style="width:15%"/>&#13;&#13;
</colgroup>&#13;&#13;
<thead>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Quarters</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Next play</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>First plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Second plays</strong></p></td>&#13;&#13;
<td style="vertical-align: top" class="table-h"><p class="tab"><strong>Third plays</strong></p></td>&#13;&#13;
</tr>&#13;&#13;
</thead>&#13;&#13;
<tbody>&#13;&#13;
<tr>&#13;&#13;
<td style="vertical-align: top"><p class="tab">6</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">10</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">first</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">30</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">2</p></td>&#13;&#13;
<td style="vertical-align: top"><p class="tab">0</p></td>&#13;&#13;
</tr>&#13;&#13;
</tbody>&#13;&#13;
</table>&#13;&#13;
<p class="indent">Notice that the third slot machine has now been played zero times since it last paid.</p>&#13;&#13;
<p class="indent">That’s six plays so far. I encourage you to keep tracing. You should see that Martha never gets paid again and that after 10 more plays (for a total of 16), Martha is broke.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec3">A Limitation of for loops</h3>&#13;&#13;
<p class="noindent">In <a href="ch03.xhtml#ch03">Chapter 3</a>, we studied <span class="literal">for</span> loops. Standard <span class="literal">for</span> loops loop through a sequence, such as a string. We certainly have no string in the Slot Machines problem.</p>&#13;&#13;
<p class="indent">Range <span class="literal">for</span> loops loop through a range of integers and can be used to loop a specified number of times. But how many times should we loop for Slot Machines? Ten? Fifty? Who knows. It depends on the number of plays that Martha can make before she’s out of quarters.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_73"/>We have no string and don’t know how many iterations are required. If all we had were <span class="literal">for</span> loops, we’d be stuck.</p>&#13;&#13;
<p class="indent">Enter the <em>while loop</em>, the most general looping structure that Python offers. We can write <span class="literal">while</span> loops that have nothing to do with strings or sequences of integers. In return for this added flexibility, we’ll need to be a little more careful and take a little more responsibility with writing our loops. Let’s dig in!</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec4">while loops</h3>&#13;&#13;
<p class="noindent">To write a <span class="literal">while</span> loop, we use Python’s <span class="literal">while</span> statement. A <span class="literal">while</span> loop is controlled by a Boolean expression. If the Boolean expression is <span class="literal">True</span>, then Python executes one iteration of the <span class="literal">while</span> loop. If the expression is still <span class="literal">True</span>, then Python executes another iteration of the <span class="literal">while</span> loop, and so on, until the Boolean expression is <span class="literal">False</span>. If the Boolean expression is <span class="literal">False</span> at the outset, then the loop does not run at all.</p>&#13;&#13;
<p class="indent"><span class="literal">while</span> loops are <em>indefinite loops</em>: the number of iterations may not be known in advance.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec4">Using while loops</h4>&#13;&#13;
<p class="noindent">Let’s start with the following example of a <span class="literal">while</span> loop:</p>&#13;&#13;
<p class="programs"><span class="ent">❶</span> &gt;&gt;&gt; <span class="codestrong1">num = 0</span><br/>&#13;&#13;
<span class="ent">❷</span> &gt;&gt;&gt; <span class="codestrong1">while num &lt; 5:</span><br/>&#13;&#13;
  ...      <span class="codestrong1">print(num)</span><br/>&#13;&#13;
<span class="ent">❸</span> ...     <span class="codestrong1">num = num + 1</span><br/>&#13;&#13;
  ...<br/>&#13;&#13;
  0<br/>&#13;&#13;
  1<br/>&#13;&#13;
  2<br/>&#13;&#13;
  3<br/>&#13;&#13;
  4</p>&#13;&#13;
<p class="indent">In a <span class="literal">for</span> loop, the loop variable is created for us; we don’t have to use an assignment statement to create the variable prior to the loop. But in a <span class="literal">while</span> loop, we get nothing for free. If we need a variable to loop through values in a <span class="literal">while</span> loop, then we have to create that variable ourselves. We do that here by making <span class="literal">num</span> refer to <span class="literal">0</span> prior to the loop <span class="ent">❶</span>.</p>&#13;&#13;
<p class="indent">The <span class="literal">while</span> loop itself is controlled by the Boolean expression <span class="literal">num &lt; 5</span> <span class="ent">❷</span>. If <span class="literal">num &lt; 5</span> is <span class="literal">True</span>, then the code in the loop block will run. Right now, <span class="literal">num</span> refers to <span class="literal">0</span>, so the Boolean expression is <span class="literal">True</span>. We therefore run the loop block, which outputs <span class="literal">0</span> and then increases <span class="literal">num</span> to <span class="literal">1</span> <span class="ent">❸</span>.</p>&#13;&#13;
<p class="indent">We jump back to the top of the loop and evaluate the <span class="literal">num &lt; 5</span> Boolean expression again. As <span class="literal">num</span> refers to <span class="literal">1</span>, the expression is <span class="literal">True</span>. We therefore run the loop block again, which outputs <span class="literal">1</span> and then increases <span class="literal">num</span> to <span class="literal">2</span>.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_74"/>Back to the top of the loop: is <span class="literal">num &lt; 5</span> still <span class="literal">True</span>? It is, because <span class="literal">num</span> is only <span class="literal">2</span>. That kicks off another iteration of the loop, which outputs <span class="literal">2</span> and increases <span class="literal">num</span> to <span class="literal">3</span>.</p>&#13;&#13;
<p class="indent">This pattern continues, with two more iterations of the loop: one when <span class="literal">num</span> refers to <span class="literal">3</span> and one when <span class="literal">num</span> refers to <span class="literal">4</span>. When <span class="literal">num</span> refers to <span class="literal">5</span>, the <span class="literal">num &lt; 5</span> Boolean expression is finally <span class="literal">False</span>, which terminates the loop.</p>&#13;&#13;
<p class="indent">It’s important that we remember to increase <span class="literal">num</span> <span class="ent">❸</span>. A <span class="literal">for</span> loop automatically steps our loop variable through the appropriate values. But, again, we get nothing for free in a <span class="literal">while</span> loop and must update variables ourselves to bring us closer and closer to loop termination. If we forget to increase <span class="literal">num</span>, this happens:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">num = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while num &lt; 5:</span><br/>&#13;&#13;
...     <span class="codestrong1">print(num)</span><br/>&#13;&#13;
...<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
0<br/>&#13;&#13;
... forever</p>&#13;&#13;
<p class="indent">If you run this code on your computer, your screen will fill up with zeros, and you’ll have to terminate your program. You can do that by pressing CTRL-C or by closing the Python window.</p>&#13;&#13;
<p class="indent">The problem is that <span class="literal">num &lt; 5</span> stays <span class="literal">True</span> forever; nothing in the loop can ever make it <span class="literal">False</span>. This situation, where a loop never terminates, is called an <em>infinite loop</em>. It’s surprisingly easy to inadvertently produce infinite <span class="literal">while</span> loops. If you see the same values repeating or your program appears to be doing nothing at all, it’s likely that you’re stuck in an infinite loop. Carefully check the <span class="literal">while</span> loop’s Boolean expression and that the loop block is making progress toward termination.</p>&#13;&#13;
<p class="indent">We can do whatever we like with the <span class="literal">num</span> variable. Here’s a <span class="literal">while</span> loop counting up by three:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">num = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while num &lt; 10:</span><br/>&#13;&#13;
...     <span class="codestrong1">print(num)</span><br/>&#13;&#13;
...     <span class="codestrong1">num = num + 3</span><br/>&#13;&#13;
...<br/>&#13;&#13;
0<br/>&#13;&#13;
3<br/>&#13;&#13;
6<br/>&#13;&#13;
9</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_75"/>And here’s a <span class="literal">while</span> loop counting down from <span class="literal">4</span> to <span class="literal">0</span>:</p>&#13;&#13;
<p class="programs">   &gt;&gt;&gt; <span class="codestrong1">num = 4</span><br/>&#13;&#13;
<span class="ent">❶</span> &gt;&gt;&gt; <span class="codestrong1">while num &gt;= 0:</span><br/>&#13;&#13;
   ...     <span class="codestrong1">print(num)</span><br/>&#13;&#13;
   ...     <span class="codestrong1">num = num - 1</span><br/>&#13;&#13;
   ...<br/>&#13;&#13;
   4<br/>&#13;&#13;
   3<br/>&#13;&#13;
   2<br/>&#13;&#13;
   1<br/>&#13;&#13;
   0</p>&#13;&#13;
<p class="indent">Notice that I’ve used <span class="literal">&gt;=</span> here rather than <span class="literal">&gt;</span> <span class="ent">❶</span>. This way, the while loop runs when <span class="literal">num</span> refers to <span class="literal">0</span>, as desired.</p>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">What is the output of the following code?</p>&#13;&#13;
<p class="programs">n = 3<br/>&#13;&#13;
while n &gt; 0:<br/>&#13;&#13;
    if n == 5:<br/>&#13;&#13;
        n = -100<br/>&#13;&#13;
    print(n)<br/>&#13;&#13;
    n = n + 1</p>&#13;&#13;
<p class="alphat">A.</p>&#13;&#13;
<p class="programs1">3<br/>&#13;&#13;
4</p>&#13;&#13;
<p class="alpha">B.</p>&#13;&#13;
<p class="programs1">3<br/>&#13;&#13;
4<br/>&#13;&#13;
5</p>&#13;&#13;
<p class="alpha">C.</p>&#13;&#13;
<p class="programs1">3<br/>&#13;&#13;
4<br/>&#13;&#13;
-100</p>&#13;&#13;
<p class="alpha"><span epub:type="pagebreak" id="page_76"/>D.</p>&#13;&#13;
<p class="programs1">3<br/>&#13;&#13;
4<br/>&#13;&#13;
5<br/>&#13;&#13;
-100</p>&#13;&#13;
<p class="sb-noindent1">Answer: C. A <span class="literal">while</span> loop’s Boolean expression is checked only at the start of each iteration. Even if it becomes <span class="literal">False</span> at some point during the iteration, the remainder of the iteration completes.</p>&#13;&#13;
<p class="sidebarp">As <span class="literal">3</span> is greater than <span class="literal">0</span>, an iteration of the loop runs. The <span class="literal">if</span> statement block is skipped (because its Boolean expression is <span class="literal">False</span>), so this iteration outputs <span class="literal">3</span> and sets <span class="literal">n</span> to <span class="literal">4</span>. As <span class="literal">4</span> is greater than <span class="literal">0</span>, we have another iteration of the loop, this one outputting <span class="literal">4</span> and setting <span class="literal">n</span> to <span class="literal">5</span>. As <span class="literal">5</span> is greater than <span class="literal">0</span>, we have yet another iteration of the loop. This time, the <span class="literal">if</span> statement block runs, which sets <span class="literal">n</span> to <span class="literal">-100</span>. Next, <span class="literal">-100</span> is output, and <span class="literal">n</span> is set to <span class="literal">-99</span>. And here we stop, because <span class="literal">n &gt; 0</span> is <span class="literal">False</span>.</p>&#13;&#13;
</div>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">What is the output of the following code?</p>&#13;&#13;
<p class="programs">x = 6<br/>&#13;&#13;
while x &gt; 4:<br/>&#13;&#13;
    x = x - 1<br/>&#13;&#13;
    print(x)</p>&#13;&#13;
<p class="alphat">A.</p>&#13;&#13;
<p class="programs1">6<br/>&#13;&#13;
5</p>&#13;&#13;
<p class="alpha">B.</p>&#13;&#13;
<p class="programs1">6<br/>&#13;&#13;
5<br/>&#13;&#13;
4</p>&#13;&#13;
<p class="alpha">C.</p>&#13;&#13;
<p class="programs1">5<br/>&#13;&#13;
4</p>&#13;&#13;
<p class="alpha">D.</p>&#13;&#13;
<p class="programs1">5<br/>&#13;&#13;
4<br/>&#13;&#13;
3</p>&#13;&#13;
<p class="alpha"><span epub:type="pagebreak" id="page_77"/>E.</p>&#13;&#13;
<p class="programs1">6<br/>&#13;&#13;
5<br/>&#13;&#13;
4<br/>&#13;&#13;
3</p>&#13;&#13;
<p class="sb-noindent1">Answer: C. Many <span class="literal">while</span> loops do something and then update the loop variable, but not this one. This one first decrements the loop variable <span class="literal">x</span> and <em>then</em> outputs it. As <span class="literal">6</span> is greater than <span class="literal">4</span>, an iteration of the loop runs, which assigns <span class="literal">5</span> to <span class="literal">x</span> and then outputs <span class="literal">5</span>. Next, <span class="literal">5</span> is greater than <span class="literal">4</span>, so we have another iteration, this one assigning <span class="literal">4</span> to <span class="literal">x</span> and outputting <span class="literal">4</span>. And that’s it: <span class="literal">4</span> is not greater than <span class="literal">4</span>, so the loop terminates.</p>&#13;&#13;
</div>&#13;&#13;
<h4 class="h4" id="ch04lev2sec5">Nesting Loops in Loops</h4>&#13;&#13;
<p class="noindent">We can nest loops inside of <span class="literal">while</span> loops, much as we can nest loops inside of <span class="literal">for</span> loops. In “Nesting” in <a href="ch03.xhtml#ch03">Chapter 3</a>, I noted that the inner <span class="literal">for</span> loop completes all of its iterations before the next iteration of the outer loop begins. The same holds for <span class="literal">while</span> loops. Here’s an example:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt; 3:</span><br/>&#13;&#13;
...     <span class="codestrong1">j = 8</span><br/>&#13;&#13;
...     <span class="codestrong1">while j &lt; 11:</span><br/>&#13;&#13;
...         <span class="codestrong1">print(i, j)</span><br/>&#13;&#13;
...         <span class="codestrong1">j = j + 1</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
0 8<br/>&#13;&#13;
0 9<br/>&#13;&#13;
0 10<br/>&#13;&#13;
1 8<br/>&#13;&#13;
1 9<br/>&#13;&#13;
1 10<br/>&#13;&#13;
2 8<br/>&#13;&#13;
2 9<br/>&#13;&#13;
2 10</p>&#13;&#13;
<p class="indent">Each value of <span class="literal">i</span> is involved in three lines of output, one for each iteration of the inner <span class="literal">j</span> loop.</p>&#13;&#13;
<span epub:type="pagebreak" id="page_78"/>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">How many lines are output by the following nested loop?</p>&#13;&#13;
<p class="programs">x = 0<br/>&#13;&#13;
y = 1<br/>&#13;&#13;
while x &lt; 3:<br/>&#13;&#13;
    while y &lt; 3:<br/>&#13;&#13;
        print(x, y)<br/>&#13;&#13;
        y = y + 1<br/>&#13;&#13;
    x = x + 1</p>&#13;&#13;
<p class="alphat">A. 2</p>&#13;&#13;
<p class="alpha">B. 3</p>&#13;&#13;
<p class="alpha">C. 6</p>&#13;&#13;
<p class="alpha">D. 8</p>&#13;&#13;
<p class="alpha">E. 9</p>&#13;&#13;
<p class="sb-noindent1">Answer: A. The outer loop’s Boolean expression, <span class="literal">x &lt; 3</span>, is <span class="literal">True</span>, so we perform an iteration of the outer loop. That leads to two iterations of the inner loop: one when <span class="literal">y</span> is <span class="literal">1</span> and one when <span class="literal">y</span> is <span class="literal">2</span>, each of which prints a line of output. So that’s two lines of output so far.</p>&#13;&#13;
<p class="sidebarp">But nothing in the code resets <span class="literal">y</span>’s value! Therefore, <span class="literal">y &lt; 3</span> will never be <span class="literal">True</span> again, and there won’t be any further iterations of the inner loop.</p>&#13;&#13;
<p class="sidebarp">Forgetting to reset a loop variable is a common mistake when dealing with nested <span class="literal">while</span> loops.</p>&#13;&#13;
</div>&#13;&#13;
<h4 class="h4" id="ch04lev2sec6">Adding Boolean Operators</h4>&#13;&#13;
<p class="noindent">To solve Slot Machines, we want to loop while Martha has at least one quarter. That looks like this:</p>&#13;&#13;
<p class="programs">while quarters &gt;= 1:</p>&#13;&#13;
<p class="indent">That simple Boolean expression will suffice for this problem. But just like for <span class="literal">if</span> statements, the Boolean expression following the word <span class="literal">while</span> can include relational or Boolean operators. Here’s an example:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">x = 4</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">y = 10</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while x &lt;= 10 and y &lt;= 13:</span><br/>&#13;&#13;
...     <span class="codestrong1">print(x, y)</span><br/>&#13;&#13;
...     <span class="codestrong1">x = x + 1</span><br/>&#13;&#13;
...     <span class="codestrong1">y = y + 1</span><br/>&#13;&#13;
<span epub:type="pagebreak" id="page_79"/>&#13;&#13;
...<br/>&#13;&#13;
4 10<br/>&#13;&#13;
5 11<br/>&#13;&#13;
6 12<br/>&#13;&#13;
7 13</p>&#13;&#13;
<p class="indent">The <span class="literal">while</span> loop is controlled by the Boolean expression <span class="literal">x &lt;= 10 and y &lt;= 13</span>. As with any <span class="literal">and</span> operator, both of its operands must be <span class="literal">True</span> for the whole expression to be <span class="literal">True</span>. When <span class="literal">x</span> refers to <span class="literal">8</span> and <span class="literal">y</span> refers to <span class="literal">14</span>, the loop terminates because the <span class="literal">y &lt;= 13</span> operand is <span class="literal">False</span>.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec5">Solving the Problem</h3>&#13;&#13;
<p class="noindent">To solve Slot Machines, we know that we need a <span class="literal">while</span> loop, not a <span class="literal">for</span> loop, because we can’t predict the number of iterations in advance. Each iteration of the loop will play the current slot machine. When the loop terminates, Martha will have no quarters left, and we will output the number of times she played.</p>&#13;&#13;
<p class="indent">Here’s what we need to do on each iteration:</p>&#13;&#13;
<ul>&#13;&#13;
<li class="noindent">Decrease Martha’s quarters by one (since it costs one quarter to play a slot machine).</li>&#13;&#13;
<li class="noindent">If Martha is currently on the first slot machine, play that machine. This involves increasing the number of times this machine has been played. If this is the 35th play, then pay Martha and reset the number of times that this machine has been played to 0.</li>&#13;&#13;
<li class="noindent">If Martha is currently on the second slot machine, play that machine (similar to how we played the first machine).</li>&#13;&#13;
<li class="noindent">If Martha is currently on the third slot machine, play that machine (similar to how we played the first machine).</li>&#13;&#13;
<li class="noindent">Increase the number of Martha’s plays (since we just played a machine).</li>&#13;&#13;
<li class="noindent">Move to the next machine. If Martha just played the first machine, we want to move to the second; if she just played the second, we want to move to the third; and if she just played the third, we want to cycle back to the first.</li>&#13;&#13;
</ul>&#13;&#13;
<p class="indent">Our programs are getting longer now, so outlining the plan as I just did is a useful technique for keeping the complexity under control and guiding us toward correct code. We can use the outline to make sure we’re following the plan and not forgetting anything.</p>&#13;&#13;
<p class="indent">Our code is in <a href="ch04.xhtml#ch04ex01">Listing 4-1</a>.</p>&#13;&#13;
<p class="programs">   quarters = int(input())<br/>&#13;&#13;
   first = int(input())<br/>&#13;&#13;
   second = int(input())<br/>&#13;&#13;
   third = int(input())<br/>&#13;&#13;
<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_80"/>&#13;&#13;
   plays = 0<br/>&#13;&#13;
<span class="ent">❶</span> machine = 0<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❷</span> while quarters &gt;= 1:<br/>&#13;&#13;
    <span class="ent">❸</span> quarters = quarters - 1<br/>&#13;&#13;
<br/>&#13;&#13;
    <span class="ent">❹</span> if machine == 0:<br/>&#13;&#13;
           first = first + 1<br/>&#13;&#13;
        <span class="ent">❺</span> if first == 35:<br/>&#13;&#13;
               first = 0<br/>&#13;&#13;
               quarters = quarters + 30<br/>&#13;&#13;
       elif machine == 1:<br/>&#13;&#13;
           second = second + 1<br/>&#13;&#13;
           if second == 100:<br/>&#13;&#13;
               second = 0<br/>&#13;&#13;
               quarters = quarters + 60<br/>&#13;&#13;
       elif machine == 2:<br/>&#13;&#13;
           third = third + 1<br/>&#13;&#13;
           if third == 10:<br/>&#13;&#13;
               third = 0<br/>&#13;&#13;
               quarters = quarters + 9<br/>&#13;&#13;
<br/>&#13;&#13;
    <span class="ent">❻</span> plays = plays + 1<br/>&#13;&#13;
    <span class="ent">❼</span> machine = machine + 1<br/>&#13;&#13;
    <span class="ent">❽</span> if machine == 3:<br/>&#13;&#13;
           machine = 0<br/>&#13;&#13;
<br/>&#13;&#13;
   print('Martha plays', plays, 'times before going broke.')</p>&#13;&#13;
<p class="ex-caption" id="ch04ex01"><em>Listing 4-1: Solving Slot Machines</em></p>&#13;&#13;
<p class="indent">The <span class="literal">quarters</span> variable tracks the number of quarters that Martha has. The <span class="literal">first</span>, <span class="literal">second</span>, and <span class="literal">third</span> variables track the number of plays since the last payment for the first, second, and third slot machines, respectively.</p>&#13;&#13;
<p class="indent">The <span class="literal">machine</span> variable tracks the slot machine that Martha will play next. The first slot machine is referred to by the number <span class="literal">0</span>, the second by the number <span class="literal">1</span>, and the third by <span class="literal">2</span>. Making <span class="literal">machine</span> refer to <span class="literal">0</span> therefore indicates that the first slot machine will be played next <span class="ent">❶</span>.</p>&#13;&#13;
<p class="indent">We could have referred to the slot machines using <span class="literal">1</span>, <span class="literal">2</span>, and <span class="literal">3</span> instead of <span class="literal">0</span>, <span class="literal">1</span>, and <span class="literal">2</span>. Or we could have used strings: <span class="literal">'first'</span>, <span class="literal">'second'</span>, and <span class="literal">'third'</span>. But numbering items starting from zero is customary, so that’s what I’ve done here.</p>&#13;&#13;
<p class="indent">The final variable in this program is <span class="literal">plays</span>, which tracks the number of slot machines that Martha has played. We’ll output this once Martha is out of quarters.</p>&#13;&#13;
<p class="indent">The bulk of the program consists of a <span class="literal">while</span> loop that loops as long as Martha has quarters <span class="ent">❷</span>.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_81"/>Each iteration of the loop plays one slot machine. As such, the first thing we do is decrease Martha’s quarters by one <span class="ent">❸</span>. Next, we play the current slot machine.</p>&#13;&#13;
<p class="indent">Are we on slot machine 0? Slot machine 1? Slot machine 2? We need an <span class="literal">if</span> statement to answer that.</p>&#13;&#13;
<p class="indent">We first check whether we’re on slot machine 0 <span class="ent">❹</span>. If we are, then we increase the number of plays since this slot machine paid by one. To determine whether Martha gets paid, we then check whether this machine has been played exactly 35 times since it last paid <span class="ent">❺</span>. If it has, then we reset this machine’s plays to <span class="literal">0</span> and increase Martha’s quarters by 30.</p>&#13;&#13;
<p class="indent">There are several levels of nesting here, so take some time to convince yourself that the logic of the code is correct. In particular, note that every time we play the first machine, we increase its number of plays by one. But we only pay Martha after every 35 plays—that’s why we have the inner <span class="literal">if</span> statement <span class="ent">❺</span>!</p>&#13;&#13;
<p class="indent">We handle the second and third slot machines just as we handled the first. The only difference is that each slot machine pays Martha after its own number of plays and pays Martha its own amount of quarters.</p>&#13;&#13;
<p class="indent">Having played a slot machine, we increase Martha’s number of plays by one <span class="ent">❻</span>. Now all that’s left is to move to the next machine so that we’ll be at the right machine if there’s a next iteration of the loop.</p>&#13;&#13;
<p class="indent">To move to the next machine, we increase <span class="literal">machine</span> by one <span class="ent">❼</span>. If we were on machine <span class="literal">0</span>, this would move us to machine <span class="literal">1</span>. If we were on machine <span class="literal">1</span>, this would move us to machine <span class="literal">2</span>. If we were on machine <span class="literal">2</span>, this would move us to machine <span class="literal">3</span>.</p>&#13;&#13;
<p class="indent"><em>. . .</em> Machine 3? There’s no machine 3! If we just played machine 2, then we want to start over at machine 0. To do that, we add a check: if we just moved to machine <span class="literal">3</span> <span class="ent">❽</span>, then we know that we just played machine <span class="literal">2</span>, so we reset <span class="literal">machine</span> to machine <span class="literal">0</span>.</p>&#13;&#13;
<p class="indent">When the loop terminates, we know that Martha has no quarters left. As a last step, we output the required sentence, including Martha’s number of plays.</p>&#13;&#13;
<p class="indent">This code has a lot going on: stopping when Martha has no quarters left, keeping track of the current machine, paying Martha when appropriate, and counting Martha’s plays. Feel free to submit this code now, but also to consider whether you’d have written parts of it in a different way. What happens if you increase <span class="literal">plays</span> by <span class="literal">1</span> at the top of the loop instead of the bottom? Does it matter whether you decrease <span class="literal">quarters</span> by <span class="literal">1</span> at the top of the loop or the bottom? Would you have used new variables to keep track of the number of times that Martha played each slot machine, rather than modifying <span class="literal">first</span>, <span class="literal">second</span>, and <span class="literal">third</span>? I strongly encourage you to experiment with variations of what we’ve done here. If you make changes and the code no longer passes the tests, great! Now you have a new learning opportunity to fix the code and learn why your changes led to undesired behavior.</p>&#13;&#13;
<p class="indent">The next two sections offer further refinement of the code. We’ll use the <span class="literal">%</span> operator to reduce the number of variables that we need and learn about f-strings to streamline how we build strings.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec6"><span epub:type="pagebreak" id="page_82"/>The Mod Operator</h3>&#13;&#13;
<p class="noindent">In “Integer and Floating-Point Numbers” in <a href="ch01.xhtml#ch01">Chapter 1</a>, I introduced the mod (<span class="literal">%</span>) operator for calculating the remainder of an integer division. For example, 16 divided by 5 has a remainder of 1:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">16 % 5</span><br/>&#13;&#13;
1</p>&#13;&#13;
<p class="indent">And 15 divided by 5 has a remainder of 0 (because 5 divides 15 exactly):</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">15 % 5</span><br/>&#13;&#13;
0</p>&#13;&#13;
<p class="indent">The second operand dictates the range of values that <span class="literal">%</span> can possibly return. The possible return values are 0 up to but not including the second operand. For example, if the second operand is <span class="literal">3</span>, then the only values that can be returned by <span class="literal">%</span> are 0, 1, and 2. In addition, as we increase the first operand, we cycle through all possible return values. Here’s an example:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">0 % 3</span><br/>&#13;&#13;
0<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">1 % 3</span><br/>&#13;&#13;
1<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">2 % 3</span><br/>&#13;&#13;
2<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">3 % 3</span><br/>&#13;&#13;
0<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">4 % 3</span><br/>&#13;&#13;
1<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">5 % 3</span><br/>&#13;&#13;
2<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">6 % 3</span><br/>&#13;&#13;
0<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">7 % 3</span><br/>&#13;&#13;
1</p>&#13;&#13;
<p class="indent">Notice the pattern: 0, 1, 2, 0, 1, 2, and so on.</p>&#13;&#13;
<p class="indent">This behavior is useful for counting up to a specified number and then cycling back to 0. It’s exactly the behavior that we need when playing the slot machines: we play slot machine 0, then 1, then 2, then 0, then 1, then 2, then 0, then 1, and so on. (This is another reason why I used <span class="literal">0</span>, <span class="literal">1</span>, and <span class="literal">2</span>, rather than other values, to refer to the slot machines.)</p>&#13;&#13;
<p class="indent">Suppose that variable <span class="literal">plays</span> refers to the number of times that Martha has played. To determine the next machine to play (<span class="literal">0</span>, <span class="literal">1</span>, or <span class="literal">2</span>), we can use the <span class="literal">%</span> operator. For example, suppose that Martha has played one slot machine <span epub:type="pagebreak" id="page_83"/>so far, and we want to know which she will play next. She’ll play slot machine <span class="literal">1</span> next, and the <span class="literal">%</span> operator tells us that:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">plays = 1</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">plays % 3</span><br/>&#13;&#13;
1</p>&#13;&#13;
<p class="indent">If Martha has played six times so far, then she’s played slot machines 0, 1, 2, 0, 1, 2. The next slot machine she’ll play is machine 0. And, as she’s played all three machines twice, with no other plays beyond that, the <span class="literal">%</span> operator gives us <span class="literal">0</span>:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">plays = 6</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">plays % 3</span><br/>&#13;&#13;
0</p>&#13;&#13;
<p class="indent">As a final example, suppose that Martha has played 11 times so far. She’s done three complete cycles: 0, 1, 2, 0, 1, 2, 0, 1, 2. That’s nine of the plays. The remaining two plays put Martha on slot machine 2 for her next play:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">plays = 11</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">plays % 3</span><br/>&#13;&#13;
2</p>&#13;&#13;
<p class="indent">That is, we can figure out the slot machine to play without explicitly maintaining a <span class="literal">machine</span> variable.</p>&#13;&#13;
<p class="indent">We can also use <span class="literal">%</span> to simplify the logic of determining whether the next play on the current slot machine pays Martha. Consider the first slot machine. In <a href="ch04.xhtml#ch04ex01">Listing 4-1</a>, we counted the number of plays since the slot machine paid. If that number is 35, then we pay Martha and reset the count to 0. But there’s no need to reset the count if we’re using the <span class="literal">%</span> operator. We can just check whether the slot machine has been played a multiple of 35 times and pay Martha if so. To test whether a number is a multiple of 35, we can use the <span class="literal">%</span> operator. A number is a multiple of 35 if dividing it by 35 yields no remainder:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">first = 35</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first % 35</span><br/>&#13;&#13;
0<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first = 48</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first % 35</span><br/>&#13;&#13;
13<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first = 70</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first % 35</span><br/>&#13;&#13;
0<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first = 175</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">first % 35</span><br/>&#13;&#13;
0</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_84"/>We can just check <span class="literal">first % 35 == 0</span> to determine whether to pay Martha.</p>&#13;&#13;
<p class="indent">I’ve updated <a href="ch04.xhtml#ch04ex01">Listing 4-1</a> to use the <span class="literal">%</span> operator. The new code is in <a href="ch04.xhtml#ch04ex02">Listing 4-2</a>.</p>&#13;&#13;
<p class="programs">  quarters = int(input())<br/>&#13;&#13;
  first = int(input())<br/>&#13;&#13;
  second = int(input())<br/>&#13;&#13;
  third = int(input())<br/>&#13;&#13;
<br/>&#13;&#13;
  plays = 0<br/>&#13;&#13;
<br/>&#13;&#13;
  while quarters &gt;= 1:<br/>&#13;&#13;
   <span class="ent">❶</span> machine = plays % 3<br/>&#13;&#13;
     quarters = quarters - 1<br/>&#13;&#13;
<br/>&#13;&#13;
     if machine == 0:<br/>&#13;&#13;
         first = first + 1<br/>&#13;&#13;
      <span class="ent">❷</span> if first % 35 == 0:<br/>&#13;&#13;
             quarters = quarters + 30<br/>&#13;&#13;
    elif machine == 1:<br/>&#13;&#13;
        second = second + 1<br/>&#13;&#13;
        if second % 100 == 0:<br/>&#13;&#13;
            quarters = quarters + 60<br/>&#13;&#13;
    elif machine == 2:<br/>&#13;&#13;
        third = third + 1<br/>&#13;&#13;
        if third % 10 == 0:<br/>&#13;&#13;
            quarters = quarters + 9<br/>&#13;&#13;
<br/>&#13;&#13;
    plays = plays + 1<br/>&#13;&#13;
<br/>&#13;&#13;
print('Martha plays', plays, 'times before going broke.')</p>&#13;&#13;
<p class="ex-caption" id="ch04ex02"><em>Listing 4-2: Solving Slot Machines using</em> <span class="codeitalic">%</span></p>&#13;&#13;
<p class="indent">I’ve used <span class="literal">%</span> in the two ways described in this section: to determine the current machine based on the number of plays <span class="ent">❶</span> and to determine whether Martha gets paid on a play (for example, at <span class="ent">❷</span>).</p>&#13;&#13;
<p class="indent">Associating <span class="literal">%</span> with returning the remainder of a division belies its flexibility. Whenever you need to count in a cycle (0, 1, 2, 0, 1, 2), consider whether you can use <span class="literal">%</span> to simplify your code.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec7">F-Strings</h3>&#13;&#13;
<p class="noindent">The final thing we do in our solution to Slot Machines is output the required sentence, like this:</p>&#13;&#13;
<p class="programs">print('Martha plays', plays, 'times before going broke.')</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_85"/>We have to remember to end the first string so that we can output the number of plays and then start a new string for the second half of the sentence. In addition, we’re using multiple arguments to <span class="literal">print</span> to avoid having to convert <span class="literal">plays</span> to a string. If we were storing the resulting string rather than printing it, we’d need the <span class="literal">str</span> conversion:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">plays = 6</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">result = 'Martha plays ' + str(plays) + ' times before going broke.'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">result</span><br/>&#13;&#13;
'Martha plays 6 times before going broke.'</p>&#13;&#13;
<p class="indent">Gluing strings and integers together is fine for a simple sentence like this, but it doesn’t scale. Here’s how it looks when we try to embed three integers instead of one:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">num1 = 7</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">num2 = 82</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">num3 = 11</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">'We have ' + str(num1) + ', ' + str(num2) + ', and ' + str(num3) + '.'</span><br/>&#13;&#13;
'We have 7, 82, and 11.'</p>&#13;&#13;
<p class="indent">We don’t want to have to keep track of all of those quotes, pluses, and spaces.</p>&#13;&#13;
<p class="indent">The most flexible way to build a string consisting of strings and numbers is to use an <em>f-string</em>. Here’s how the previous example looks with an f-string:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">num1 = 7</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">num2 = 82</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">num3 = 11</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">f'We have {num1}, {num2}, and {num3}.'</span><br/>&#13;&#13;
'We have 7, 82, and 11.'</p>&#13;&#13;
<p class="indent">Notice the <span class="literal">f</span> before the opening quote of the string. The <span class="literal">f</span> stands for format, because f-strings allow you to format the contents of a string. Inside of an f-string, we can place expressions inside curly brackets. As the string is being built, each expression is replaced by its value and inserted into the string. The result is just a regular old string—there’s no new type here:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">type(f'hello')</span><br/>&#13;&#13;
&lt;class 'str'&gt;<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">type(f'{num1} days')</span><br/>&#13;&#13;
&lt;class 'str'&gt;</p>&#13;&#13;
<p class="indent">The expressions in the curly brackets can be more complex than bare variable names:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">f'The sum is {num1 + num2 + num3}'</span><br/>&#13;&#13;
'The sum is 100'</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_86"/>We can use f-strings in the final line of Slot Machines. Here’s how that would look:</p>&#13;&#13;
<p class="programs">print(f'Martha plays {plays} times before going broke.')</p>&#13;&#13;
<p class="indent">Even in this simplest of string-formatting contexts, I think f-strings add clarity. Keep them in the back of your mind for whenever you catch yourself building a string from smaller pieces.</p>&#13;&#13;
<p class="indent">One warning about f-strings: they were added in Python 3.6, which at the time of writing is still a reasonably recent version of Python. In older versions of Python, f-strings cause syntax errors.</p>&#13;&#13;
<p class="indent">If you use f-strings, be sure to check that the judge you’re submitting to is using Python 3.6 or newer to test your code.</p>&#13;&#13;
<p class="indent">Before continuing, you might like to try solving exercise 1 from “Chapter Exercises” on <a href="ch04.xhtml#ch04lev1sec17">page 99</a>.</p>&#13;&#13;
<h3 class="h3a" id="ch04lev1sec8"><span class="h3aa">Problem #9: Song Playlist</span></h3>&#13;&#13;
<p class="noindent">Sometimes we don’t know in advance how much input will be provided. We’ll see in this problem that a <span class="literal">while</span> loop is what we need in such cases.</p>&#13;&#13;
<p class="indent">This is DMOJ problem <span class="literal">ccc08j2</span>.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec7">The Challenge</h4>&#13;&#13;
<p class="noindent">We have five favorite songs named A, B, C, D, and E. We’ve created a playlist of these songs and are using an app to manage the playlist. The songs start off in the order A, B, C, D, E. The app has four buttons:</p>&#13;&#13;
<ul>&#13;&#13;
<li class="noindent">Button 1: Moves the first song of the playlist to the end of the playlist. For example, if the playlist is currently A, B, C, D, E, then it changes to B, C, D, E, A.</li>&#13;&#13;
<li class="noindent">Button 2: Moves the last song of the playlist to the beginning of the playlist. For example, if the playlist is currently A, B, C, D, E, then it changes to E, A, B, C, D.</li>&#13;&#13;
<li class="noindent">Button 3: Swaps the first two songs of the playlist. For example, if the playlist is currently A, B, C, D, E, then it changes to be B, A, C, D, E.</li>&#13;&#13;
<li class="noindent">Button 4: Plays the playlist!</li>&#13;&#13;
</ul>&#13;&#13;
<p class="indent">We’re provided a user’s button presses. When the user presses button 4, output the order of songs in the playlist.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec8">Input</h4>&#13;&#13;
<p class="noindent">The input consists of pairs of lines, where the first line of a pair gives the number of a button (<span class="literal">1</span>, <span class="literal">2</span>, <span class="literal">3</span>, or <span class="literal">4</span>), and the second gives the number of times that the user pressed this button (between 1 and 10). That is, the first line is the number of a button, the second line is the number of times it is pressed, <span epub:type="pagebreak" id="page_87"/>the third line is the number of a button, the fourth line is the number of times it is pressed, and so on. The input ends with these two lines:</p>&#13;&#13;
<p class="programs">4<br/>&#13;&#13;
1</p>&#13;&#13;
<p class="noindent">indicating that the user pressed button <span class="literal">4</span> once.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec9">Output</h4>&#13;&#13;
<p class="noindent">Output the order of songs in the playlist after all button presses. The output must be on one line, with a space separating each pair of songs.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec9">String Slicing</h3>&#13;&#13;
<p class="noindent">The high-level plan of our solution to Song Playlist will be a <span class="literal">while</span> loop that keeps going as long as we haven’t found the press of button <span class="literal">4</span>. On each iteration, we’ll read two lines of input and process them. That leads to this structure:</p>&#13;&#13;
<p class="programs"><span class="ent">❶</span> button = 0<br/>&#13;&#13;
<br/>&#13;&#13;
   while button != 4:<br/>&#13;&#13;
       # Read button<br/>&#13;&#13;
       # Read number of presses<br/>&#13;&#13;
       # Process button presses</p>&#13;&#13;
<p class="indent">Prior to the <span class="literal">while</span> loop, we create the variable <span class="literal">button</span> and make it refer to the number <span class="literal">0</span> <span class="ent">❶</span>. Without this, the <span class="literal">button</span> variable would not exist, and we’d get a <span class="literal">NameError</span> in the <span class="literal">while</span> loop’s Boolean expression. Any number besides <span class="literal">4</span> would work here to trigger the first iteration of the loop.</p>&#13;&#13;
<p class="indent">Within this <span class="literal">while</span> loop, we’ll use a <span class="literal">for</span> loop to process the button presses. For each press, we’ll use an <span class="literal">if</span> statement to check which button was pressed. We’ll need four indented blocks of statements in the <span class="literal">if</span> statement, one for each of the four buttons.</p>&#13;&#13;
<p class="indent">Let’s talk about how to handle each of the buttons. Button <span class="literal">1</span> moves the first song of the playlist to the end of the playlist. Because we have a small, known number of songs, we can get away with using string indexing to concatenate each character. Remember that the first character of a string is at index 0, not 1. We can put that character at the end of the string like this:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">songs = 'ABCDE'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">songs = songs[1] + songs[2] + songs[3] + songs[4] + songs[0]</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">songs</span><br/>&#13;&#13;
'BCDEA'</p>&#13;&#13;
<p class="indent">This is rather unwieldy and is specific to having exactly five songs. We can use string slicing to write more general and less error-prone code.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_88"/><em>Slicing</em> is a Python feature that lets us refer to a substring of a string. (In fact, it works on any sequence, as we’ll see later in the book.) It takes two indices: the index where we want to start, and the index one to the right of where we want to end. If we use indices 4 and 8, for example, then we get the characters at indices 4, 5, 6, and 7. Slicing uses square brackets, with a colon between the two indices:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = 'abcdefghijk'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">s[4:8]</span><br/>&#13;&#13;
'efgh'</p>&#13;&#13;
<p class="indent">The slicing doesn’t change what <span class="literal">s</span> refers to. We can make <span class="literal">s</span> refer to the slice by using an assignment statement:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s</span><br/>&#13;&#13;
'abcdefghijk'<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">s = s[4:8]</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">s</span><br/>&#13;&#13;
'efgh'</p>&#13;&#13;
<p class="indent">It’s easy to make an off-by-one error here and think that <span class="literal">s[4:8]</span> includes the character at index 8. But it doesn’t, just like <span class="literal">range(4, 8)</span> doesn’t include the <span class="literal">8</span>. So while this behavior may be a little counterintuitive, it’s applied consistently in both <span class="literal">range</span> and slicing.</p>&#13;&#13;
<p class="indent">We must always include the colon when performing string slicing, but the start and end indices are optional. If we leave off the start index, Python starts slicing at index 0:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = 'abcdefghijk'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">s[:4]</span><br/>&#13;&#13;
'abcd'</p>&#13;&#13;
<p class="indent">If we leave off the end index, Python slices until the end of the string:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s[4:]</span><br/>&#13;&#13;
'efghijk'</p>&#13;&#13;
<p class="indent">And leaving out both indices? That gives us a slice consisting of the entire string:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s[:]</span><br/>&#13;&#13;
'abcdefghijk'</p>&#13;&#13;
<p class="indent">We can even use negative indices in a slice. Here’s an example:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s[-4:]</span><br/>&#13;&#13;
'hijk'</p>&#13;&#13;
<p class="indent">The start index refers to the fourth character from the right, which is <span class="literal">'h'</span>, and the end index is omitted. We therefore get a slice from the <span class="literal">'h'</span> to the end of the string.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_89"/>Unlike indexing, slicing never produces an index error. If we use indices that are outside of the string, Python slices to the appropriate end of the string:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s[8:20]</span><br/>&#13;&#13;
'ijk'<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">s[-50:2]</span><br/>&#13;&#13;
'ab'</p>&#13;&#13;
<p class="indent">We’ll use string slicing to implement the behaviors of buttons <span class="literal">1</span>, <span class="literal">2</span>, and <span class="literal">3</span>. Here’s what the code looks like for button <span class="literal">1</span>:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">songs = 'ABCDE'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">songs = songs[1:] + songs[0]</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">songs</span><br/>&#13;&#13;
'BCDEA'</p>&#13;&#13;
<p class="indent">The slice gives us the entire string except for the character at index 0. (There’s nothing specific to a string of length 5 here; this code would work on a nonempty string of any length.) Appending that missing character results in the first song moving to the end of the playlist. The slicing for the other buttons is similar; you’ll see that code next.</p>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">What is the output of the following code?</p>&#13;&#13;
<p class="programs">game = 'Lost Vikings'<br/>&#13;&#13;
<br/>&#13;&#13;
print(game[2:-6])</p>&#13;&#13;
<p class="alphat">A. <span class="literal">st V</span></p>&#13;&#13;
<p class="alpha">B. <span class="literal">ost V</span></p>&#13;&#13;
<p class="alpha">C. <span class="literal">iking</span></p>&#13;&#13;
<p class="alpha">D. <span class="literal">st Vi</span></p>&#13;&#13;
<p class="alpha">E. <span class="literal">Viking</span></p>&#13;&#13;
<p class="sb-noindent1">Answer: A. The character at index <span class="literal">2</span> is the <span class="literal">'s'</span> in <span class="literal">'Lost'</span>. The character at index <span class="literal">-6</span> is the first <span class="literal">'i'</span> in <span class="literal">'Vikings'</span>. Since we go from index <span class="literal">2</span> up to but not including index <span class="literal">-6</span>, we get the slice <span class="literal">'st V'</span>.</p>&#13;&#13;
</div>&#13;&#13;
<span epub:type="pagebreak" id="page_90"/>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">Which password gets us out of the following loop?</p>&#13;&#13;
<p class="programs">valid = False<br/>&#13;&#13;
<br/>&#13;&#13;
while not valid:<br/>&#13;&#13;
    s = input()<br/>&#13;&#13;
    valid = len(s) == 5 and s[:2] == 'xy'</p>&#13;&#13;
<p class="alphat">A. <span class="literal">xyz</span></p>&#13;&#13;
<p class="alpha">B. <span class="literal">xyabc</span></p>&#13;&#13;
<p class="alpha">C. <span class="literal">abcxy</span></p>&#13;&#13;
<p class="alpha">D. More than one of the above passwords get us out of the loop</p>&#13;&#13;
<p class="alpha">E. None; the loop never executes and no passwords are obtained</p>&#13;&#13;
<p class="sb-noindent1">Answer: B. The <span class="literal">while</span> loop terminates when <span class="literal">valid</span> is <span class="literal">True</span> (because then <span class="literal">not valid</span> is <span class="literal">False</span>). The only one of the given passwords whose length is 5 and whose first two characters are <span class="literal">'xy'</span> is <span class="literal">xyabc</span>. This is therefore the only given password that sets <span class="literal">valid</span> to <span class="literal">True</span> and ends the loop.</p>&#13;&#13;
</div>&#13;&#13;
<h3 class="h3" id="ch04lev1sec10">Solving the Problem</h3>&#13;&#13;
<p class="noindent">Now that we have some practice using <span class="literal">while</span> loops to loop as long as there are more buttons to handle, and using slicing for string manipulation, we’re ready to solve Song Playlist. See <a href="ch04.xhtml#ch04ex03">Listing 4-3</a> for the code.</p>&#13;&#13;
<p class="programs">   songs = 'ABCDE'<br/>&#13;&#13;
<br/>&#13;&#13;
   button = 0<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❶</span> while button != 4:<br/>&#13;&#13;
       button = int(input())<br/>&#13;&#13;
       presses = int(input())<br/>&#13;&#13;
    <span class="ent">❷</span> for i in range(presses):<br/>&#13;&#13;
           if button == 1:<br/>&#13;&#13;
            <span class="ent">❸</span> songs = songs[1:] + songs[0]<br/>&#13;&#13;
           elif button == 2:<br/>&#13;&#13;
            <span class="ent">❹</span> songs = songs[-1] + songs[:-1]<br/>&#13;&#13;
           elif button == 3:<br/>&#13;&#13;
            <span class="ent">❺</span> songs = songs[1] + songs[0] + songs[2:]<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❻</span> output = ''<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_91"/>&#13;&#13;
   for song in songs:<br/>&#13;&#13;
       output = output + song + ' '<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❼</span> print(output[:-1])</p>&#13;&#13;
<p class="ex-caption" id="ch04ex03"><em>Listing 4-3: Solving Song Playlist</em></p>&#13;&#13;
<p class="indent">The <span class="literal">while</span> loop continues as long as button <span class="literal">4</span> hasn’t been pressed <span class="ent">❶</span>. On each iteration of the <span class="literal">while</span> loop, we read the button number and then read the number of times that this button was pressed.</p>&#13;&#13;
<p class="indent">Now, nested in the outer <span class="literal">while</span> loop, we need to loop once per button press. Keep all of the loop types in mind as you decide which to use. Here, a range <span class="literal">for</span> loop is the best choice <span class="ent">❷</span>, since it’s the easiest way to loop exactly the number of times we specify.</p>&#13;&#13;
<p class="indent">The behavior inside the range <span class="literal">for</span> loop depends on which button is pressed. We therefore use an <span class="literal">if</span> statement to check the button number and modify the playlist accordingly. If button <span class="literal">1</span> is pressed, we use slicing to move the first song to the end of the playlist <span class="ent">❸</span>. If button <span class="literal">2</span> is pressed, we use slicing to move the last song to the beginning of the playlist <span class="ent">❹</span>. To do that, we start with the character at the right end of the string and then use slicing to append all other characters. For button <span class="literal">3</span>, we need to modify the playlist so that the first two songs swap positions. We build a new string with the character at index <span class="literal">1</span>, then the character at index <span class="literal">0</span>, and then all of the characters starting at index <span class="literal">2</span> <span class="ent">❺</span>.</p>&#13;&#13;
<p class="indent">Once we escape the <span class="literal">while</span> loop, we need to output the songs, with a space between each pair of songs. We can’t just output <span class="literal">songs</span>, because that doesn’t have spaces. Instead, we build an output string that has the appropriate spaces. To do that, we start with the empty string <span class="ent">❻</span> and then use a <span class="literal">for</span> loop to concatenate each song and a space. One small annoyance is that this adds a space to the end of the string, after the last song, and we don’t want that. We therefore use slicing to remove that final space character <span class="ent">❼</span>.</p>&#13;&#13;
<p class="indent">You’re now ready to submit to the judge.</p>&#13;&#13;
<p class="indent">Before continuing, you might like to try solving exercise 3 from “Chapter Exercises” on <a href="ch04.xhtml#ch04lev1sec17">page 99</a>.</p>&#13;&#13;
<h3 class="h3a" id="ch04lev1sec11"><span class="h3aa">Problem #10: Secret Sentence</span></h3>&#13;&#13;
<p class="noindent">Even if we have a string and even if we know how much input will be provided, a <span class="literal">while</span> loop may still be the required type of loop. This problem demonstrates why this can be the case.</p>&#13;&#13;
<p class="indent">This is DMOJ problem <span class="literal">coci08c3p2</span>.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec10">The Challenge</h4>&#13;&#13;
<p class="noindent">Luka is writing a secret sentence in class. He doesn’t want the teacher to be able to read it, so instead of writing down the original sentence, he writes down an encoded version. After each vowel in the sentence (<em>a</em>, <em>e</em>, <em>i</em>, <em>o</em>, or <em>u</em>), <span epub:type="pagebreak" id="page_92"/>he adds the letter <em>p</em> and that vowel again. For example, rather than write down the sentence <em>i like you</em>, he would write <em>ipi lipikepe yopoupu</em>.</p>&#13;&#13;
<p class="indent">The teacher acquires Luka’s encoded sentence. Recover Luka’s original sentence for the teacher.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec11">Input</h4>&#13;&#13;
<p class="noindent">The input is one line of text, Luka’s encoded sentence. It consists of lowercase letters and spaces. There is exactly one space between each pair of words. The maximum length of the line is 100 characters.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec12">Output</h4>&#13;&#13;
<p class="noindent">Output Luka’s original sentence.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec12">Another Limitation of for loops</h3>&#13;&#13;
<p class="noindent">In <a href="ch03.xhtml#ch03">Chapter 3</a>, we learned how <span class="literal">for</span> loops can be used to process strings. A <span class="literal">for</span> loop plods through the string, from beginning to end, one character at a time. In many cases, that’s precisely what we want. In Three Cups, for example, we needed to look at each swap from left to right, so we used a <span class="literal">for</span> loop over the string of swaps.</p>&#13;&#13;
<p class="indent">In other cases, that’s too restrictive, and a range <span class="literal">for</span> loop may be more appropriate. A range <span class="literal">for</span> loop gives us access to indices rather than characters. It also allows us to skip through a sequence with whatever step size we choose. For example, we can use a range <span class="literal">for</span> loop to visit every third character of a string:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = 'zephyr'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">for i in range(0, len(s), 3):</span><br/>&#13;&#13;
...     <span class="codestrong1">print(s[i])</span><br/>&#13;&#13;
...<br/>&#13;&#13;
z<br/>&#13;&#13;
h</p>&#13;&#13;
<p class="indent">We can also use a range <span class="literal">for</span> loop to process a string from right to left instead of left to right:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">for i in range(len(s) - 1, -1, -1):</span><br/>&#13;&#13;
...     <span class="codestrong1">print(s[i])</span><br/>&#13;&#13;
...<br/>&#13;&#13;
r<br/>&#13;&#13;
y<br/>&#13;&#13;
h<br/>&#13;&#13;
p<br/>&#13;&#13;
e<br/>&#13;&#13;
z</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_93"/>All of this assumes that we want to step by a fixed amount on each iteration.</p>&#13;&#13;
<p class="indent">What if sometimes we want to move one character to the right and other times we want to move three characters to the right? That’s not at all farfetched. In fact, if we could do that, then we’d be well on our way to solving Secret Sentence.</p>&#13;&#13;
<p class="indent">To see why, consider this test case:</p>&#13;&#13;
<p class="programs">ipi lipikepe yopoupu</p>&#13;&#13;
<p class="indent">Imagine that we’re reconstructing Luka’s original sentence by copying characters to it. The first character in the encoded sentence is the vowel <span class="literal">i</span>. This is the first character of Luka’s original sentence, too. Based on how Luka encodes sentences, we know that the next two characters will be <span class="literal">p</span> and <span class="literal">i</span>. We don’t want to include those in Luka’s original sentence, so we need to skip over them. That is, after processing index 0, we want to jump to index 3.</p>&#13;&#13;
<p class="indent">Index 3 is a space character. Since it isn’t a vowel, we copy this character as is to Luka’s original sentence and then move to index 4. Index 4 is <span class="literal">l</span>, another nonvowel, so we copy that too and move to index 5. Here at index 5 we have a vowel; after copying it, we want to jump to index 8.</p>&#13;&#13;
<p class="indent">What’s the step size here? Sometimes we jump by three, but not always. And sometimes we jump by one, but not always. It’s a mix of threes and ones. <span class="literal">for</span> loops are not designed for this kind of processing.</p>&#13;&#13;
<p class="indent">With a <span class="literal">while</span> loop, we can zip around a string however we please, unencumbered by predefined step sizes.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec13">while Loops Through Indices</h3>&#13;&#13;
<p class="noindent">Writing a <span class="literal">while</span> loop that loops through string indices isn’t any different from writing any other kind of <span class="literal">while</span> loop. We just need to incorporate the string’s length. Here’s how we can loop through each character of a string from left to right:</p>&#13;&#13;
<p class="programs">   &gt;&gt;&gt; <span class="codestrong1">s = 'zephyr'</span><br/>&#13;&#13;
   &gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
<span class="ent">❶</span> &gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s):</span><br/>&#13;&#13;
   ...     <span class="codestrong1">print('We have ' + s[i])</span><br/>&#13;&#13;
   ...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
   ...<br/>&#13;&#13;
   We have z<br/>&#13;&#13;
   We have e<br/>&#13;&#13;
   We have p<br/>&#13;&#13;
   We have h<br/>&#13;&#13;
   We have y<br/>&#13;&#13;
   We have r</p>&#13;&#13;
<p class="indent">The variable <span class="literal">i</span> allows us to access each character of the string. It begins at <span class="literal">0</span> and increases by one each time through the loop.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_94"/>I used <span class="literal">&lt;</span> in the loop’s Boolean expression <span class="ent">❶</span> to continue as long as we haven’t reached the length of the string. Had I used <span class="literal">&lt;=</span> instead of <span class="literal">&lt;</span>, we’d have received an <span class="literal">IndexError</span>:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt;= len(s):</span><br/>&#13;&#13;
...     <span class="codestrong1">print('We have ' + s[i])</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
We have z<br/>&#13;&#13;
We have e<br/>&#13;&#13;
We have p<br/>&#13;&#13;
We have h<br/>&#13;&#13;
We have y<br/>&#13;&#13;
We have r<br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 2, in &lt;module&gt;<br/>&#13;&#13;
IndexError: string index out of range</p>&#13;&#13;
<p class="indent">The length of the string is 6. We get this error because the loop tries to access <span class="literal">s[6]</span>, which is not a valid index in the string.</p>&#13;&#13;
<p class="indent">Want to loop through the string jumping by three characters at a time instead of one? No problem; just increase <span class="literal">i</span> by <span class="literal">3</span> instead of <span class="literal">1</span>:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s):</span><br/>&#13;&#13;
...     <span class="codestrong1">print('We have ' + s[i])</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 3</span><br/>&#13;&#13;
...<br/>&#13;&#13;
We have z<br/>&#13;&#13;
We have h</p>&#13;&#13;
<p class="indent">We can also go from right to left instead of left to right. We have to start at <span class="literal">len(s) - 1</span> instead of <span class="literal">0</span>, and we have to decrease <span class="literal">i</span> on each iteration rather than increase it. We also have to change the loop’s Boolean expression to detect when we’re at the beginning of the string rather than the end. Here’s how we go from right to left, looping through each character:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">i = len(s) - 1</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &gt;= 0:</span><br/>&#13;&#13;
...     <span class="codestrong1">print('We have ' + s[i])</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i - 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
We have r<br/>&#13;&#13;
We have y<br/>&#13;&#13;
We have h<br/>&#13;&#13;
We have p<br/>&#13;&#13;
We have e<br/>&#13;&#13;
We have z</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_95"/>A final use case for a <span class="literal">while</span> loop on a string: stopping at the first index that meets some criterion.</p>&#13;&#13;
<p class="indent">The strategy is to use the Boolean <span class="literal">and</span> operator to continue while there are more characters to check and we haven’t yet met our criterion. For example, here is how we can find the index of the first <span class="literal">'y'</span> in a string:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s) and s[i] != 'y':</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">print(i)</span><br/>&#13;&#13;
4</p>&#13;&#13;
<p class="indent">If there’s no <span class="literal">'y'</span> anywhere in the string, the loop stops when <span class="literal">i</span> equals the string length:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = 'breeze'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s) and s[i] != 'y':</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">print(i)</span><br/>&#13;&#13;
6</p>&#13;&#13;
<p class="indent">When <span class="literal">i</span> refers to <span class="literal">6</span>, the first operand of <span class="literal">and</span> is <span class="literal">False</span>, so the loop terminates. You might wonder why the second operand of <span class="literal">and</span> doesn’t cause an error here, since index <span class="literal">6</span> is not a valid index in the string. The reason is that the Boolean operators use <em>short-circuiting evaluation</em>, which means that they stop evaluating their operands if the result of the operator is already known. For <span class="literal">and</span>, if the first operand is <span class="literal">False</span>, then we know that, no matter what the second operand is, <span class="literal">and</span> will return <span class="literal">False</span>; Python therefore doesn’t evaluate the second operand. Similarly, for <span class="literal">or</span>, if the first operand is <span class="literal">True</span>, then <span class="literal">or</span> is guaranteed to return <span class="literal">True</span>, so Python doesn’t evaluate the second operand.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec14">Solving the Problem</h3>&#13;&#13;
<p class="noindent">Now we know how to use a <span class="literal">while</span> loop to loop through a string.</p>&#13;&#13;
<p class="indent">For Secret Sentence, we need to do something different depending on whether we’re looking at a vowel or a nonvowel. If we’re looking at a vowel, then we need to copy the character and jump ahead by three characters (to skip over the <span class="literal">p</span> and the second occurrence of this vowel). If we’re looking at a nonvowel, then we need to copy the character and move to the next character. So, we always copy the current character but then move by three or one based on whether the current character is a vowel. We can use an <span class="literal">if</span> statement inside the <span class="literal">while</span> loop to make this decision for each character that we see.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_96"/>A solution for Secret Sentence is in <a href="ch04.xhtml#ch04ex04">Listing 4-4</a>.</p>&#13;&#13;
<p class="programs">   sentence = input()<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❶</span> result = ''<br/>&#13;&#13;
   i = 0<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❷</span> while i &lt; len(sentence):<br/>&#13;&#13;
       result = result + sentence[i]<br/>&#13;&#13;
    <span class="ent">❸</span> if sentence[i] in 'aeiou':<br/>&#13;&#13;
           i = i + 3<br/>&#13;&#13;
       else:<br/>&#13;&#13;
           i = i + 1<br/>&#13;&#13;
<br/>&#13;&#13;
   print(result)</p>&#13;&#13;
<p class="ex-caption" id="ch04ex04"><em>Listing 4-4: Solving Secret Sentence</em></p>&#13;&#13;
<p class="indent">The <span class="literal">result</span> variable <span class="ent">❶</span> is used to build the original sentence, one character at a time.</p>&#13;&#13;
<p class="indent">The <span class="literal">while</span> loop’s Boolean expression is the standard one for looping until we reach the end of a string <span class="ent">❷</span>. In that loop, we first concatenate the current character to the end of the result. Then we check whether the current character is a vowel <span class="ent">❸</span>. Recall from “Relational Operators” in <a href="ch02.xhtml#ch02">Chapter 2</a> that the <span class="literal">in</span> operator can be used to check whether the first string occurs in the second. If the current character is found in the string of vowels, we jump ahead by three characters; if not, we move to the next character.</p>&#13;&#13;
<p class="indent">Once the loop terminates, we have gone through the entire encoded sentence and copied the correct characters into <span class="literal">result</span>. The last thing to do is therefore to output this variable.</p>&#13;&#13;
<p class="indent">You’re ready to submit our code to the judge. Grepeapat wopork!</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec15">break and continue</h3>&#13;&#13;
<p class="noindent">In this section, I’ll show you two other loop keywords that Python supports: <span class="literal">break</span> and <span class="literal">continue</span>. It’s my experience that introducing these keywords leads learners to overuse them to the detriment of the clarity of their loops, so I’ve decided to avoid them elsewhere in the book. Nonetheless, they are occasionally useful, and you’re likely to see them in other Python code, so let’s have a brief discussion.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec13">break</h4>&#13;&#13;
<p class="noindent">The <span class="literal">break</span> keyword immediately terminates a loop, no questions asked.</p>&#13;&#13;
<p class="indent">Back when we solved Song Playlist, we used a <span class="literal">while</span> loop that looped while the button was not <span class="literal">4</span>. We could also solve that problem using <span class="literal">break</span>; see <a href="ch04.xhtml#ch04ex05">Listing 4-5</a> for the code.</p>&#13;&#13;
<p class="programs"><span epub:type="pagebreak" id="page_97"/>   songs = 'ABCDE'<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❶</span> while True:<br/>&#13;&#13;
       button = int(input())<br/>&#13;&#13;
    <span class="ent">❷</span> if button == 4:<br/>&#13;&#13;
        <span class="ent">❸</span> break<br/>&#13;&#13;
       presses = int(input())<br/>&#13;&#13;
       for i in range(presses):<br/>&#13;&#13;
           if button == 1:<br/>&#13;&#13;
               songs = songs[1:] + songs[0]<br/>&#13;&#13;
           elif button == 2:<br/>&#13;&#13;
               songs = songs[-1] + songs[:-1]<br/>&#13;&#13;
           elif button == 3:<br/>&#13;&#13;
               songs = songs[1] + songs[0] + songs[2:]<br/>&#13;&#13;
<br/>&#13;&#13;
   output = ''<br/>&#13;&#13;
   for song in songs:<br/>&#13;&#13;
       output = output + song + ' '<br/>&#13;&#13;
<br/>&#13;&#13;
   print(output[:-1])</p>&#13;&#13;
<p class="ex-caption" id="ch04ex05"><em>Listing 4-5: Solving Song Playlist using</em> <span class="codeitalic">break</span></p>&#13;&#13;
<p class="indent">The loop’s Boolean expression <span class="ent">❶</span> looks suspicious: <span class="literal">True</span> is always <span class="literal">True</span>, so at first glance it seems that this loop never terminates. (That’s the downside to <span class="literal">break</span>. We can’t just look at the Boolean expression to understand what must happen for the loop to terminate.) But it can terminate, because of our use of <span class="literal">break</span>. If button <span class="literal">4</span> is pressed <span class="ent">❷</span>, then we hit a <span class="literal">break</span> <span class="ent">❸</span>, which terminates the loop.</p>&#13;&#13;
<p class="indent">Let’s see one more example of using <span class="literal">break</span>. In “while Loops Through Indices” in this chapter, we wrote code to find the index of the first <span class="literal">'y'</span> in a string. Here’s how that looks using <span class="literal">break</span>:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = 'zephyr'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s):</span><br/>&#13;&#13;
...     <span class="codestrong1">if s[i] == 'y':</span><br/>&#13;&#13;
...         <span class="codestrong1">break</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">print(i)</span><br/>&#13;&#13;
4</p>&#13;&#13;
<p class="indent">Again, notice that the loop’s Boolean expression is misleading: it suggests that the loop always runs until the end of the string, but further scrutiny reveals that a <span class="literal">break</span> is lurking and can influence termination.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_98"/>A <span class="literal">break</span> terminates only its own loop, not any outer loops. Here’s an example:</p>&#13;&#13;
<p class="programs">   &gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
   &gt;&gt;&gt; <span class="codestrong1">while i &lt; 3:</span><br/>&#13;&#13;
   ...     <span class="codestrong1">j = 10</span><br/>&#13;&#13;
   ...     <span class="codestrong1">while j &lt;= 50:</span><br/>&#13;&#13;
   ...         <span class="codestrong1">print(j)</span><br/>&#13;&#13;
   ...         <span class="codestrong1">if j == 30:</span><br/>&#13;&#13;
<span class="ent">❶</span> ...             <span class="codestrong1">break</span><br/>&#13;&#13;
   ...         <span class="codestrong1">j = j + 10</span><br/>&#13;&#13;
   ...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
   ...<br/>&#13;&#13;
   10<br/>&#13;&#13;
   20<br/>&#13;&#13;
   30<br/>&#13;&#13;
   10<br/>&#13;&#13;
   20<br/>&#13;&#13;
   30<br/>&#13;&#13;
   10<br/>&#13;&#13;
   20<br/>&#13;&#13;
   30</p>&#13;&#13;
<p class="indent">Notice how the <span class="literal">break</span> <span class="ent">❶</span> cuts the <span class="literal">j</span> loop short. But it doesn’t affect the <span class="literal">i</span> loop: there are three iterations of that loop, exactly as there would be without the <span class="literal">break</span> <span class="ent">❶</span>.</p>&#13;&#13;
<h4 class="h4" id="ch04lev2sec14">continue</h4>&#13;&#13;
<p class="noindent">The <span class="literal">continue</span> keyword ends the current iteration of the loop without running any more of its code. Unlike <span class="literal">break</span>, it does not end the loop altogether. If the loop condition is <span class="literal">True</span>, then further iterations of the loop occur.</p>&#13;&#13;
<p class="indent">Here’s an example that uses <span class="literal">continue</span> to print each vowel and its index in a string:</p>&#13;&#13;
<p class="programs">   &gt;&gt;&gt; <span class="codestrong1">s = 'zephyr'</span><br/>&#13;&#13;
   &gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
   &gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s):</span><br/>&#13;&#13;
<span class="ent">❶</span> ...     <span class="codestrong1">if not s[i] in 'aeiou':</span><br/>&#13;&#13;
   ...         <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
<span class="ent">❷</span> ...         <span class="codestrong1">continue</span><br/>&#13;&#13;
<span class="ent">❸</span> ...     <span class="codestrong1">print(s[i], i)</span><br/>&#13;&#13;
   ...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
   ...<br/>&#13;&#13;
   e 1</p>&#13;&#13;
<p class="indent">If the current character is not a vowel <span class="ent">❶</span>, then we don’t want to print it. So, we increase <span class="literal">i</span> by <span class="literal">1</span> to take us past this character and then use <span class="literal">continue</span> <span class="ent">❷</span> to end the current iteration. If we get below the <span class="literal">if</span> statement <span class="ent">❸</span>, then it must <span epub:type="pagebreak" id="page_99"/>mean that we’re looking at a vowel (otherwise <span class="literal">continue</span> would have prevented us from getting here). We therefore output that character and increase <span class="literal">i</span> by <span class="literal">1</span> to take us past this character.</p>&#13;&#13;
<p class="indent">The <span class="literal">continue</span> keyword is enticing because it seems to give us a way to get us out of an iteration that we don’t want to be in. “This isn’t a vowel. I’m out of here!” But an <span class="literal">if</span> statement can also be used to obtain the same behavior, and the logic is often clearer:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = 'zephyr'</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">i = 0</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">while i &lt; len(s):</span><br/>&#13;&#13;
...     <span class="codestrong1">if s[i] in 'aeiou':</span><br/>&#13;&#13;
...         <span class="codestrong1">print(s[i], i)</span><br/>&#13;&#13;
...     <span class="codestrong1">i = i + 1</span><br/>&#13;&#13;
...<br/>&#13;&#13;
e 1</p>&#13;&#13;
<p class="indent">Rather than skip the iteration when the current character is not a vowel, the <span class="literal">if</span> statement processes it when it <em>is</em> a vowel.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec16">Summary</h3>&#13;&#13;
<p class="noindent">The unifying feature of the problems in this chapter is that we don’t know in advance how many iterations of a loop will be required.</p>&#13;&#13;
<p class="uln-indent"><strong>Slot Machines</strong> The number of iterations depends on the initial number of quarters and the payouts of the slot machines.</p>&#13;&#13;
<p class="uln-indent"><strong>Song Playlist</strong> The number of iterations depends on how many buttons were pressed.</p>&#13;&#13;
<p class="uln-indentb"><strong>Secret Sentence</strong> The number of iterations, and what to do on each iteration, depends on where vowels are located in a string.</p>&#13;&#13;
<p class="indent">When the number of iterations is unknown, we turn to the <span class="literal">while</span> loop, which runs as long as needed. Using a <span class="literal">while</span> loop is more error-prone than code that uses a <span class="literal">for</span> loop. It’s also more flexible, as we are freed from the <span class="literal">for</span> loop constraint of systematically looping through a sequence.</p>&#13;&#13;
<p class="indent">In the next chapter, we’ll learn about lists, which allow us to store large amounts of numeric or string data. And how do you suppose we’ll process all of that data? Yes: loops! Practice the following exercises to hone your loop skills. You’ll be using them a lot when we solve problems using lists.</p>&#13;&#13;
<h3 class="h3" id="ch04lev1sec17">Chapter Exercises</h3>&#13;&#13;
<p class="noindent">You now have three types of loops at your disposal: <span class="literal">for</span> loops, range <span class="literal">for</span> loops, and <span class="literal">while</span> loops. Part of the challenge of solving problems using loops is knowing which loop to use! For each of the following exercises, experiment with using different types of loops to arrive at the solution that you like best.</p>&#13;&#13;
<span epub:type="pagebreak" id="page_100"/>&#13;&#13;
<ol>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ccc20j2</span>, Epidemiology</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">coci08c1p2</span>, Ptice</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ccc02j2</span>, AmeriCanadian</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ecoo13r1p1</span>, Take a Number</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ecoo15r1p1</span>, When You Eat Your Smarties</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ccc19j3</span>, Cold Compress</li>&#13;&#13;
</ol>&#13;&#13;
<h3 class="h3" id="ch04lev1sec18">Notes</h3>&#13;&#13;
<p class="noindent">Slot Machines is originally from the 2000 Canadian Computing Competition, Junior/Senior Level. Song Playlist is originally from the 2008 Canadian Computing Competition, Junior Level. Secret Sentence is originally from the 2008/2009 Croatian Open Competition in Informatics, Contest 3.</p>&#13;&#13;
</div></body></html>