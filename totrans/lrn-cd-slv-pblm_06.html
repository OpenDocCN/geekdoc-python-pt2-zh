<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch06"><span epub:type="pagebreak" id="page_137"/><span class="big">6</span><br/>DESIGNING PROGRAMS WITH FUNCTIONS</h2>&#13;&#13;
<div class="imagec"><img src="Images/common.jpg" alt="image" width="150" height="150"/></div>&#13;&#13;
<p class="noindents">When writing large programs, it’s important to organize our code into smaller logical pieces, each of which contributes to the overall goal. That way, we’ll be able to think about each piece on its own, without worrying about what other pieces are doing. Then we’ll put the pieces together. These pieces are called <em>functions</em>.</p>&#13;&#13;
<p class="indent">In this chapter, we’ll use functions to break down and solve two problems: calculating the score in a two-player card game and determining whether boxes of action figures can be nicely organized.</p>&#13;&#13;
<h3 class="h3a" id="ch06lev1sec1"><span class="h3aa">Problem #14: Card Game</span></h3>&#13;&#13;
<p class="noindent">In this problem, we’ll implement a two-player card game. As part of thinking through the problem, we’ll find that the same bit of logic crops up several times. We’ll learn how to bundle this code into a Python function to avoid code duplication and enhance code clarity.</p>&#13;&#13;
<p class="indent">This is DMOJ problem <span class="literal">ccc99s1</span>.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec1"><span epub:type="pagebreak" id="page_138"/>The Challenge</h4>&#13;&#13;
<p class="noindent">Two players, A and B, are playing a card game. (You don’t need to know about playing cards or card games to understand this problem.)</p>&#13;&#13;
<p class="indent">The game starts with a deck of 52 cards. Player A takes a card from the deck, then player B takes a card from the deck, then player A, then player B, until there are no cards left in the deck.</p>&#13;&#13;
<p class="indent">There are 13 types of cards in the deck. These types are as follows: two, three, four, five, six, seven, eight, nine, ten, jack, queen, king, ace. There are four cards of each of these types in the deck. For example, there are four twos, four threes, and so on, all the way up to four aces. (That’s why there are 52 cards in the deck: 13 types times 4 cards per type.)</p>&#13;&#13;
<p class="indent">A <em>high card</em> is a card that is a jack, queen, king, or ace. When a player takes a high card, they may score some points. Here are the rules by which points are scored:</p>&#13;&#13;
<ul>&#13;&#13;
<li class="noindent">If a player takes a jack, after which there is at least one card remaining in the deck, and the next card in the deck is not a high card, then the player scores 1 point.</li>&#13;&#13;
<li class="noindent">If a player takes a queen, after which there are at least two cards remaining in the deck, and neither of the next two cards in the deck is a high card, then the player scores 2 points.</li>&#13;&#13;
<li class="noindent">If a player takes a king, after which there are at least three cards remaining in the deck, and none of the next three cards in the deck is a high card, then the player scores 3 points.</li>&#13;&#13;
<li class="noindent">If a player takes an ace, after which there are at least four cards remaining in the deck, and none of the next four cards in the deck is a high card, then the player scores 4 points.</li>&#13;&#13;
</ul>&#13;&#13;
<p class="indent">We’re asked to output information each time a player scores, as well as the total score for each player at the end of the game.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec2">Input</h4>&#13;&#13;
<p class="noindent">The input consists of 52 lines. Each line contains the type of a card in the deck. The lines are in the order that cards will be taken from the deck; that is, the first line is the first card taken from the deck, the second line is the second card taken, and so on.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec3">Output</h4>&#13;&#13;
<p class="noindent">Whenever a player scores, output the following line:</p>&#13;&#13;
<p class="programs">Player <span class="codeitalic1">p</span> scores <span class="codeitalic1">q</span> point(s).</p>&#13;&#13;
<p class="noindent">where <span class="codeitalic">p</span> is <span class="literal">A</span> for player A or <span class="literal">B</span> for player B, and <span class="codeitalic">q</span> is the number of points that they just scored.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_139"/>When the game ends, output the following two lines:</p>&#13;&#13;
<p class="programs">Player A: <span class="codeitalic1">m</span> point(s).<br/>&#13;&#13;
Player B: <span class="codeitalic1">n</span> point(s).</p>&#13;&#13;
<p class="noindent">where <span class="codeitalic">m</span> is the total score for player A and <span class="codeitalic">n</span> is the total score for player B.</p>&#13;&#13;
<h3 class="h3" id="ch06lev1sec2">Exploring a Test Case</h3>&#13;&#13;
<p class="noindent">If you think through how to solve this problem, you might be left wondering whether we can just solve it, right now, without learning anything new. Indeed, we can! We’re in great shape. We can use a list to represent the deck of cards. We know how to use the list <span class="literal">append</span> method to add a card to the deck. We can access values in the list to look for high cards. We’ve even got f-strings to help us output the player and points information.</p>&#13;&#13;
<p class="indent">Rather than dive in, though, let’s go through a small example. Doing so is going to highlight that we’re missing one crucial feature of Python that will make it easier to organize our solution and solve this problem.</p>&#13;&#13;
<p class="indent">We’ll be here all year if we go through a 52-card example, so let’s use a smaller one with just 10 cards. This isn’t a complete test case, so the program we write won’t work on it, but it’s enough for us to understand the mechanics of the game and what our solution will have to do. Here’s the test case:</p>&#13;&#13;
<p class="programs">queen<br/>&#13;&#13;
three<br/>&#13;&#13;
seven<br/>&#13;&#13;
king<br/>&#13;&#13;
nine<br/>&#13;&#13;
jack<br/>&#13;&#13;
eight<br/>&#13;&#13;
king<br/>&#13;&#13;
jack<br/>&#13;&#13;
four</p>&#13;&#13;
<p class="indent">Player A takes the first card, which is a queen. A queen is a high card, and player A might score 2 points here. First, we confirm that there are at least two cards remaining in the deck after this queen. Next, we have to check these next two cards, hoping there is no high card among them. The next two cards are not high cards—they are a three and a seven—so player A gets 2 points.</p>&#13;&#13;
<p class="indent">Player B now takes the second card, which is a three. Three isn’t a high card, so no points for player B.</p>&#13;&#13;
<p class="indent">Player A now takes the seven. No points.</p>&#13;&#13;
<p class="indent">Player B now takes the king, so there’s a chance for 3 points for player B. There are at least three cards remaining in the deck after this king. We have to check these next three cards, hoping there is no high card among them. Sadly, there is a high card, a jack, among those three. No points for player B.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_140"/>Player A now takes the nine. No points.</p>&#13;&#13;
<p class="indent">Player B now takes the first jack. There is at least one card remaining in the deck after this jack. We have to check this next card, hoping it isn’t a high card. Good news: it’s not a high card—it’s an eight—so player B gets 1 point.</p>&#13;&#13;
<p class="indent">There’s only one more point scored, and it’s by player A when they take the second-last card (the jack) from the deck.</p>&#13;&#13;
<p class="indent">Therefore, this is the output for this test case:</p>&#13;&#13;
<p class="programs">Player A scores 2 point(s).<br/>&#13;&#13;
Player B scores 1 point(s).<br/>&#13;&#13;
Player A scores 1 point(s).<br/>&#13;&#13;
Player A: 3 point(s).<br/>&#13;&#13;
Player B: 1 point(s).</p>&#13;&#13;
<p class="indent">Notice that each time a player takes a high card, we need to check two things: that there are at least a certain number of cards remaining in the deck and that there is no high card among these cards. The first we should be able to manage by using a variable that tells us how many cards have been taken. The second is more difficult. We’d need some code to check a given number of cards for a high card. Worse, if we’re not careful, we’d end up duplicating very similar code four times: once to check the card after a jack, once to check the two cards after a queen, once to check the three cards after a king, and once to check the four cards after an ace. If we later found a flaw in our logic, we would have to fix it in up to four different places.</p>&#13;&#13;
<p class="indent">Is there a Python feature that lets us package that “no high cards here” logic, just once, and invoke it four times? There is. It’s called a <em>function</em>, and it’s just a named block of code that carries out a small task. Functions are essential to the organization and clarity of our code. All programmers use them. Without them, writing large software systems like games and word processors would be untenable. Let’s learn how to use functions.</p>&#13;&#13;
<h3 class="h3" id="ch06lev1sec3">Defining and Calling Functions</h3>&#13;&#13;
<p class="noindent">We’ve already learned how to call functions that come with Python. For example, we’ve used the <span class="literal">input</span> function to read input. Here’s a call of <span class="literal">input</span> with no arguments:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">s = input()</span><br/>&#13;&#13;
<span class="codestrong1">hello</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">s</span><br/>&#13;&#13;
'hello'</p>&#13;&#13;
<p class="indent">We’ve also used Python’s <span class="literal">print</span> function to output text. Here’s a call of <span class="literal">print</span> with one argument:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">print('well, well')</span><br/>&#13;&#13;
well, well</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_141"/>The built-in Python functions are general-purpose, designed to be used in a wide variety of settings. When we want a function to solve a problem-specific task, we’ll have to define it ourselves.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec4">Functions Without Arguments</h4>&#13;&#13;
<p class="noindent">To <em>define</em>, or create, a function, we use Python’s <span class="literal">def</span> keyword. Here’s the definition of a function that outputs three lines:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def intro():</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*********')</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*WELCOME*')</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*********')</span><br/>&#13;&#13;
...</p>&#13;&#13;
<p class="indent">The structure of a function definition mirrors that of an <span class="literal">if</span> statement or loop. The name after <span class="literal">def</span> is the name of the function that we’re defining; here, we’re defining a function named <span class="literal">intro</span>. Following the name of the function, we have a pair of empty parentheses, <span class="literal">()</span>. We’ll see later that we can include information in these parentheses to pass arguments to functions. This <span class="literal">intro</span> function doesn’t take any arguments, which is why the parentheses are empty. Following the parentheses is a colon; as with <span class="literal">if</span> statements or loops, leaving out the colon is a syntax error. On the following lines, we provide an indented block of statements that will run each time the function is called.</p>&#13;&#13;
<p class="indent">When you defined the <span class="literal">intro</span> function, you may have expected to see this as output:</p>&#13;&#13;
<p class="programs">*********<br/>&#13;&#13;
*WELCOME*<br/>&#13;&#13;
*********</p>&#13;&#13;
<p class="indent">But no: so far we’ve only defined the function, not called it. Defining a function has no observable effect; it simply stores the function in the computer’s memory so we can call it later. We call our own functions just like we call any of Python’s built-in functions. Since this <span class="literal">intro</span> function doesn’t take any arguments, we use an empty set of parentheses in the call:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro()</span><br/>&#13;&#13;
*********<br/>&#13;&#13;
*WELCOME*<br/>&#13;&#13;
*********</p>&#13;&#13;
<p class="indent">You can call this function as many times as you like. It’s there as often as we need it.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec5">Functions with Arguments</h4>&#13;&#13;
<p class="noindent">Our <span class="literal">intro</span> function isn’t very flexible, as it does the same thing each time it’s called. We can change the function so that we can pass arguments to it, and <span epub:type="pagebreak" id="page_142"/>the arguments we pass can influence what the function does. Here’s a new version of the <span class="literal">intro</span> function that allows us to pass a single argument:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def intro2(message):</span><br/>&#13;&#13;
...     <span class="codestrong1">line_length = len(message) + 2</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*' * line_length)</span><br/>&#13;&#13;
...     <span class="codestrong1">print(f'*{message}*')</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*' * line_length)</span><br/>&#13;&#13;
...</p>&#13;&#13;
<p class="indent">To call this function, we provide a string argument:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro2('HELLO')</span><br/>&#13;&#13;
*******<br/>&#13;&#13;
*HELLO*<br/>&#13;&#13;
*******<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">intro2('WIN')</span><br/>&#13;&#13;
*****<br/>&#13;&#13;
*WIN*<br/>&#13;&#13;
*****</p>&#13;&#13;
<p class="indent">We can’t call this <span class="literal">intro2</span> function without an argument—if we try, we get an error:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro2()</span><br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
TypeError: intro2() missing 1 required positional argument: 'message'</p>&#13;&#13;
<p class="indent">The error reminds us that we have not provided an argument for <span class="literal">message</span>. The name <span class="literal">message</span> is known as a function <em>parameter</em>. When we call <span class="literal">intro2</span>, Python first makes <span class="literal">message</span> refer to whatever our argument refers to; that is, <span class="literal">message</span> becomes an alias for our argument.</p>&#13;&#13;
<p class="indent">We can create functions with more than one parameter. Here’s a function that takes two parameters, a message to print and the number of times to print it:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def intro3(message, num_times):</span><br/>&#13;&#13;
...     <span class="codestrong1">for i in range(num_times):</span><br/>&#13;&#13;
...         <span class="codestrong1">print(message)</span><br/>&#13;&#13;
...</p>&#13;&#13;
<p class="indent">To call this one, we provide two arguments. Python works from left to right, assigning the first argument to the first parameter and the second argument to the second parameter. In the following call, <span class="literal">'high'</span> is assigned to the <span class="literal">message</span> parameter and <span class="literal">5</span> is assigned to the <span class="literal">num_times</span> parameter:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro3('high', 5)</span><br/>&#13;&#13;
high<br/>&#13;&#13;
high<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_143"/>&#13;&#13;
high<br/>&#13;&#13;
high<br/>&#13;&#13;
high</p>&#13;&#13;
<p class="indent">Be sure to provide the correct number of arguments. For <span class="literal">intro3</span>, we need two arguments. Anything else is an error:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro3()</span><br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
TypeError: intro3() missing 2 required positional arguments: 'message'<br/>&#13;&#13;
and 'num_times'<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">intro3('high')</span><br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
TypeError: intro3() missing 1 required positional argument: 'num_times'</p>&#13;&#13;
<p class="indent">We also have to be sure to provide values of the proper types. Wrong types won’t stop us from calling the function, but they will cause an error within the function:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro3('high', 'low')</span><br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 2, in intro3<br/>&#13;&#13;
TypeError: 'str' object cannot be interpreted as an integer</p>&#13;&#13;
<p class="indent">This <span class="literal">TypeError</span> arises because <span class="literal">intro3</span> uses a range <span class="literal">for</span> loop on variable <span class="literal">num_times</span>. If the argument we provide for <span class="literal">num_times</span> is not an integer, the range <span class="literal">for</span> loop fails.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec6">Keyword Arguments</h4>&#13;&#13;
<p class="noindent">It’s possible to override the left-to-right correspondence between arguments and parameters when calling a function. To do that, we use the names of parameters in whatever order we like. An argument that uses the name of a parameter is called a <em>keyword argument</em>. Here’s how it works:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def intro3(message, num_times):</span><br/>&#13;&#13;
...     <span class="codestrong1">for i in range(num_times):</span><br/>&#13;&#13;
...         <span class="codestrong1">print(message)</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">intro3(message='high', num_times=3)</span><br/>&#13;&#13;
high<br/>&#13;&#13;
high<br/>&#13;&#13;
high<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">intro3(num_times=3, message='high')</span><br/>&#13;&#13;
<span epub:type="pagebreak" id="page_144"/>&#13;&#13;
high<br/>&#13;&#13;
high<br/>&#13;&#13;
high</p>&#13;&#13;
<p class="indent">Each function call here uses two keyword arguments. A keyword argument is written as the name of a parameter, an equal sign, and its corresponding argument.</p>&#13;&#13;
<p class="indent">You can even start with regular arguments and finish with keyword arguments:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro3('high', num_times=3)</span><br/>&#13;&#13;
high<br/>&#13;&#13;
high<br/>&#13;&#13;
high</p>&#13;&#13;
<p class="indent">But once you use a keyword argument, you can’t go back to regular ones:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">intro3(message='high', 3)</span><br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1<br/>&#13;&#13;
SyntaxError: positional argument follows keyword argument</p>&#13;&#13;
<p class="indent">In “Sorting a List” in <a href="ch05.xhtml#ch05">Chapter 5</a> we used a <span class="literal">reverse</span> keyword argument when calling the <span class="literal">sort</span> method. The Python designers decided that <span class="literal">reverse</span> would be a keyword-only parameter, which means that it’s impossible to fill in its value without using a keyword argument. Python lets us do that with our functions, too, but we won’t need that level of control in this book.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec7">Local Variables</h4>&#13;&#13;
<p class="noindent">Names of parameters work like regular variables, but are <em>local</em> to the function in which they’re defined. That is, a function parameter doesn’t exist outside of its function:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def intro2(message):</span><br/>&#13;&#13;
...     <span class="codestrong1">line_length = len(message) + 2</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*' * line_length)</span><br/>&#13;&#13;
...     <span class="codestrong1">print(f'*{message}*')</span><br/>&#13;&#13;
...     <span class="codestrong1">print('*' * line_length)</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">intro2('hello')</span><br/>&#13;&#13;
*******<br/>&#13;&#13;
*hello*<br/>&#13;&#13;
*******<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">message</span><br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
NameError: name 'message' is not defined</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_145"/>What about that <span class="literal">line_length</span> variable—is it local, too? It is:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">line_length</span><br/>&#13;&#13;
Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
NameError: name 'line_length' is not defined</p>&#13;&#13;
<p class="indent">What happens if you have a variable and you call a function that uses a parameter or local variable of the same name? Is your value lost? Let’s see:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">line_length = 999</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">intro2('hello')</span><br/>&#13;&#13;
*******<br/>&#13;&#13;
*hello*<br/>&#13;&#13;
*******<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">line_length</span><br/>&#13;&#13;
999</p>&#13;&#13;
<p class="indent">Phew—it’s still <span class="literal">999</span>, just as we left it. Local variables are created when a function is called and destroyed when the function terminates, all without affecting other variables with shared names.</p>&#13;&#13;
<p class="indent">A function can access a variable that was created outside of that function. It’s ill-advised to rely on that, though, because then that function isn’t self-contained, instead hoping that variables it expects to be there are actually there. In this book, we’ll write functions so that they only use local variables. All information that a function needs will be provided to the function through its parameters.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec8">Mutable Parameters</h4>&#13;&#13;
<p class="noindent">Since a parameter is an alias for its corresponding argument, it can be used to change a mutable value. Here’s a function that removes all occurrences of <span class="literal">value</span> from a list <span class="literal">lst</span>:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def remove_all(lst, value):</span><br/>&#13;&#13;
...     <span class="codestrong1">while value in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">lst.remove(value)</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">lst = [5, 10, 20, 5, 45, 5, 9]</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">remove_all(lst, 5)</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">lst</span><br/>&#13;&#13;
[10, 20, 45, 9]</p>&#13;&#13;
<p class="indent">Notice that we passed a list to <span class="literal">remove_all</span> by using a variable. This function won’t accomplish anything useful if you call it with a list value directly (rather than with a variable referring to a list):</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">remove_all([5, 10, 20, 5, 45, 5, 9], 5)</span></p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_146"/>The function removed all the 5s from the list, but because we didn’t use a variable, we have no way to refer to that list ever again.</p>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">What is the output of the following code?</p>&#13;&#13;
<p class="programs">def mystery(s, lst):<br/>&#13;&#13;
    s = s.upper()<br/>&#13;&#13;
    lst = lst + [2]<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
s = 'a'<br/>&#13;&#13;
lst = [1]<br/>&#13;&#13;
mystery(s, lst)<br/>&#13;&#13;
<br/>&#13;&#13;
print(s, lst)</p>&#13;&#13;
<p class="alphat">A. <span class="literal">a [1]</span></p>&#13;&#13;
<p class="alpha">B. <span class="literal">a [1, 2]</span></p>&#13;&#13;
<p class="alpha">C. <span class="literal">A [1]</span></p>&#13;&#13;
<p class="alpha">D. <span class="literal">A [1, 2]</span></p>&#13;&#13;
<p class="sb-noindent1">Answer: A. When <span class="literal">mystery</span> is called, its <span class="literal">s</span> parameter is made to reference whatever the <span class="literal">s</span> argument refers to, which is the <span class="literal">'a'</span> string. Similarly, its <span class="literal">lst</span> parameter is made to reference whatever the <span class="literal">lst</span> argument refers to, which is the <span class="literal">[1]</span> list. Inside of <span class="literal">mystery</span>, <span class="literal">s</span> and <span class="literal">lst</span> are local variables.</p>&#13;&#13;
<p class="sidebarp">Now let’s study the two statements of the function itself.</p>&#13;&#13;
<p class="sidebarp">First, <span class="literal">s = s.upper()</span>. This makes the local variable <span class="literal">s</span> refer to <span class="literal">'A'</span> (uppercase). But it hasn’t changed what <span class="literal">s</span> refers to outside of the function. That still refers to <span class="literal">'a'</span> (lowercase).</p>&#13;&#13;
<p class="sidebarp">Second, <span class="literal">lst = lst + [2]</span>. Using <span class="literal">+</span> with lists creates a new list (it doesn’t change an existing list!), so this makes the local variable <span class="literal">lst</span> refer to the new list: <span class="literal">[1, 2]</span>. But, again, it hasn’t changed what <span class="literal">lst</span> refers to outside of the function; it’s still <span class="literal">[1]</span>.</p>&#13;&#13;
<p class="sidebarp">What gives—didn’t I tell you previously that functions can change a mutable parameter? I did; but to make that happen, you really do need to change the value itself, not what a local variable refers to. Compare the previous program with the next one, whose output is different:</p>&#13;&#13;
<p class="programs">&#13;&#13;
def mystery(s, lst):<br/>&#13;&#13;
    s.upper()  # upper creates a new string<br/>&#13;&#13;
    lst.append(2)  # append changes the list<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_147"/><br/>&#13;&#13;
s = 'a'<br/>&#13;&#13;
lst = [1]<br/>&#13;&#13;
mystery(s, lst)<br/>&#13;&#13;
<br/>&#13;&#13;
print(s, lst)</p>&#13;&#13;
</div>&#13;&#13;
<h4 class="h4" id="ch06lev2sec9">Return Values</h4>&#13;&#13;
<p class="noindent">Let’s come back to our Card Game problem. Our goal is to define a function that tells us whether there are no high cards in a list of cards. We’ll name that function <span class="literal">no_high</span>. We haven’t written <span class="literal">no_high</span> yet, but we can still specify what we hope to accomplish. Here’s what we’re after:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">no_high(['two', 'six'])</span><br/>&#13;&#13;
True<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">no_high(['eight'])</span><br/>&#13;&#13;
True<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">no_high(['two', 'jack', 'four'])</span><br/>&#13;&#13;
False<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">no_high(['queen', 'king', 'three', 'queen'])</span><br/>&#13;&#13;
False</p>&#13;&#13;
<p class="indent">We want the first two calls to return <span class="literal">True</span>, because there are no high cards in those lists of cards. And we want the third and fourth calls to return <span class="literal">False</span>, because there’s at least one high card in those lists of cards.</p>&#13;&#13;
<p class="indent">How can we define a function that returns these <span class="literal">True</span> and <span class="literal">False</span> values? That’s the final piece of the function puzzle.</p>&#13;&#13;
<p class="indent">To return a value from a function, we use Python’s <span class="literal">return</span> keyword. As soon as a <span class="literal">return</span> is reached, execution of the function terminates, and the specified value is returned to the caller.</p>&#13;&#13;
<p class="indent">Here’s how we can write the <span class="literal">no_high</span> function:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def no_high(lst):</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'jack' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'queen' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'king' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'ace' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">return True</span><br/>&#13;&#13;
...</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_148"/>We first check whether there are any <span class="literal">'jack'</span> cards in the list. If there are, then we know that the list contains one or more high cards, so we immediately return <span class="literal">False</span>.</p>&#13;&#13;
<p class="indent">If we’re still here, then we know that there are no jacks. But there could be other high cards, so we need to check for them. The rest of the <span class="literal">if</span> statements check for queens, kings, and aces, respectively, returning <span class="literal">False</span> if any of them is in the list.</p>&#13;&#13;
<p class="indent">If we don’t hit any of those four <span class="literal">return</span> statements, then there are no high cards in the list. In that case, we return <span class="literal">True</span>.</p>&#13;&#13;
<p class="indent">A <span class="literal">return</span> by itself, with no value given, returns the value <span class="literal">None</span>. That’s useful if you’re writing a function that doesn’t return anything useful and you need to terminate the function before reaching the bottom of its code.</p>&#13;&#13;
<p class="indent">If a <span class="literal">return</span> is encountered inside a loop, the function still terminates immediately, regardless of how deeply nested it is. Here’s an example showing a <span class="literal">return</span> getting us out of a nested loop:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def func():</span><br/>&#13;&#13;
...     <span class="codestrong1">for i in range(10):</span><br/>&#13;&#13;
...         <span class="codestrong1">for j in range(10):</span><br/>&#13;&#13;
...             <span class="codestrong1">print(i, j)</span><br/>&#13;&#13;
...             <span class="codestrong1">if j == 4:</span><br/>&#13;&#13;
...                 <span class="codestrong1">return</span><br/>&#13;&#13;
...<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">func()</span><br/>&#13;&#13;
0 0<br/>&#13;&#13;
0 1<br/>&#13;&#13;
0 2<br/>&#13;&#13;
0 3<br/>&#13;&#13;
0 4</p>&#13;&#13;
<p class="indent">A <span class="literal">return</span> is like a super-<span class="literal">break</span>! Some people don’t like using <span class="literal">return</span> from within a loop for the same reason that they don’t like <span class="literal">break</span>: it can obscure the purpose and logic of a loop. I’ll use <span class="literal">return</span> within a loop when convenient. Unlike <span class="literal">break</span>, which can show up anywhere, a <span class="literal">return</span> is restricted to showing up within a function, separated from other code. If we keep our functions small, then using a <span class="literal">return</span> within a loop can help us write clear code without interfering with the code around it.</p>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">Is the following version of <span class="literal">no_high</span> correct? That is, does it return <span class="literal">True</span> if there is at least one high card in the list, and <span class="literal">False</span> otherwise?</p>&#13;&#13;
<p class="programs">def no_high(lst):<br/>&#13;&#13;
    for card in lst:<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_149"/><br/>&#13;&#13;
        if card in ['jack', 'queen', 'king', 'ace']:<br/>&#13;&#13;
            return False<br/>&#13;&#13;
        else:<br/>&#13;&#13;
            return True</p>&#13;&#13;
<p class="alphat">A. Yes</p>&#13;&#13;
<p class="alpha">B. No; for example, it returns the wrong value for <span class="literal">['two', 'three']</span></p>&#13;&#13;
<p class="alpha">C. No; for example, it returns the wrong value for <span class="literal">['jack']</span></p>&#13;&#13;
<p class="alpha">D. No; for example, it returns the wrong value for <span class="literal">['jack', 'two']</span></p>&#13;&#13;
<p class="alpha">E. No; for example, it returns the wrong value for <span class="literal">['two', 'jack']</span></p>&#13;&#13;
<p class="sb-noindent1">Answer: E. The <span class="literal">if-else</span> statement causes the loop to always terminate on its first iteration. If the first card is a high card, the function terminates and returns <span class="literal">False</span>; if the first card is not a high card, the function terminates and returns <span class="literal">True</span>. It doesn’t look at any of the other cards! And that’s why it fails on <span class="literal">['two', 'jack']</span>: the first card is not a high card, so the function returns <span class="literal">True</span>. Returning <span class="literal">True</span> tells us that there are no high cards in the list. But that’s wrong: there’s a jack in there! The function did the wrong thing. It should have returned <span class="literal">False</span>.</p>&#13;&#13;
</div>&#13;&#13;
<h3 class="h3" id="ch06lev1sec4">Function Documentation</h3>&#13;&#13;
<p class="noindent">It’s clear to us right now what our <span class="literal">no_high</span> function does and how we should call it. But what about in a few months, when the purpose of our old code doesn’t come readily to mind? And what about once we’ve amassed a large collection of our own functions, making it difficult to remember what each one does?</p>&#13;&#13;
<p class="indent">For each function we write, we’ll add documentation that specifies the meaning of each parameter and what the function returns. Such documentation is called a <em>docstring</em>, for “documentation string.” The docstring should be written starting at the first line of the function’s block. Here’s the <span class="literal">no_high</span> function, this time with documentation:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def no_high(lst):</span><br/>&#13;&#13;
...     <span class="codestrong1">"""</span><br/>&#13;&#13;
...     <span class="codestrong1">lst is a list of strings representing cards.</span><br/>&#13;&#13;
...<br/>&#13;&#13;
...     <span class="codestrong1">Return True if there are no high cards in lst, False otherwise.</span><br/>&#13;&#13;
...     <span class="codestrong1">"""</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'jack' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'queen' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'king' in lst:</span><br/>&#13;&#13;
<span epub:type="pagebreak" id="page_150"/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">if 'ace' in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">return False</span><br/>&#13;&#13;
...     <span class="codestrong1">return True</span><br/>&#13;&#13;
...</p>&#13;&#13;
<p class="indent">The docstring begins and ends with three double quotes (<span class="literal">"""</span>). Like a single quote (<span class="literal">'</span>) or double quote (<span class="literal">"</span>), three double quotes can be used to start and end any string. A string created with three quotes is called a <em>triple-quoted string</em>. (Three single quotes work as well, but Python convention is to use three double quotes.) They have the bonus of letting us add multiple lines of text to the string by just pressing ENTER after each line; strings created with <span class="literal">'</span> or <span class="literal">"</span> can’t span lines like that. We use triple-quoted strings for docstrings so that we can include as many lines as we like.</p>&#13;&#13;
<p class="indent">The docstring here tells us what <span class="literal">lst</span> is: it’s a list of strings representing cards. It also tells us that the function returns a <span class="literal">True</span> or <span class="literal">False</span> value and what each return value means. This is sufficient information to enable someone to call the function without having to look at its code. As long as someone knows what a function does, they can just use it. We’ve been using Python functions all along without ever having looked at their code. How does <span class="literal">print</span> work? How does <span class="literal">input</span> work? We don’t know! But it doesn’t matter: we know what the functions do, so we can just focus on calling them.</p>&#13;&#13;
<p class="indent">For functions with multiple parameters, the docstring should name each one and give its expected type. Here’s <span class="literal">remove_all</span>, from “Mutable Parameters” in this chapter, with a suitable docstring:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">def remove_all(lst, value):</span><br/>&#13;&#13;
...     <span class="codestrong1">"""</span><br/>&#13;&#13;
...     <span class="codestrong1">lst is a list.</span><br/>&#13;&#13;
...     <span class="codestrong1">value is a value.</span><br/>&#13;&#13;
...<br/>&#13;&#13;
...     <span class="codestrong1">Remove all occurrences of value from lst.</span><br/>&#13;&#13;
...     <span class="codestrong1">"""</span><br/>&#13;&#13;
...     <span class="codestrong1">while value in lst:</span><br/>&#13;&#13;
...         <span class="codestrong1">lst.remove(value)</span><br/>&#13;&#13;
...</p>&#13;&#13;
<p class="indent">Notice that this docstring doesn’t talk about returning anything. That’s because this function doesn’t return anything useful! It removes from <span class="literal">lst</span>, which is what the docstring says it does.</p>&#13;&#13;
<h3 class="h3" id="ch06lev1sec5">Solving the Problem</h3>&#13;&#13;
<p class="noindent">We’ve just learned the fundamentals of defining and calling functions. For the rest of the book, whenever we’re faced with a large problem to solve, we’ll be able to break down its solution into smaller tasks, each of which will be solved by a function.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_151"/>Let’s use our <span class="literal">no_high</span> function in a solution to Card Game. The code is in <a href="ch06.xhtml#ch06ex01">Listing 6-1</a>.</p>&#13;&#13;
<p class="programs"><span class="ent">❶</span> NUM_CARDS = 52<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❷</span> def no_high(lst):<br/>&#13;&#13;
       """<br/>&#13;&#13;
       lst is a list of strings representing cards.<br/>&#13;&#13;
<br/>&#13;&#13;
       Return True if there are no high cards in lst, False otherwise.<br/>&#13;&#13;
       """<br/>&#13;&#13;
       if 'jack' in lst:<br/>&#13;&#13;
           return False<br/>&#13;&#13;
       if 'queen' in lst:<br/>&#13;&#13;
           return False<br/>&#13;&#13;
       if 'king' in lst:<br/>&#13;&#13;
           return False<br/>&#13;&#13;
       if 'ace' in lst:<br/>&#13;&#13;
           return False<br/>&#13;&#13;
       return True<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❸</span> deck = []<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❹</span> for i in range(NUM_CARDS):<br/>&#13;&#13;
       deck.append(input())<br/>&#13;&#13;
<br/>&#13;&#13;
   score_a = 0<br/>&#13;&#13;
   score_b = 0<br/>&#13;&#13;
   player = 'A'<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❺</span> for i in range(NUM_CARDS):<br/>&#13;&#13;
       card = deck[i]<br/>&#13;&#13;
       points = 0<br/>&#13;&#13;
    <span class="ent">❻</span> remaining = NUM_CARDS - i - 1<br/>&#13;&#13;
    <span class="ent">❼</span> if card == 'jack' and remaining &gt;= 1 and no_high(deck[i+1:i+2]):<br/>&#13;&#13;
           points = 1<br/>&#13;&#13;
       elif card == 'queen' and remaining &gt;= 2 and no_high(deck[i+1:i+3]):<br/>&#13;&#13;
           points = 2<br/>&#13;&#13;
       elif card == 'king' and remaining &gt;= 3 and no_high(deck[i+1:i+4]):<br/>&#13;&#13;
           points = 3<br/>&#13;&#13;
       elif card == 'ace' and remaining &gt;= 4 and no_high(deck[i+1:i+5]):<br/>&#13;&#13;
           points = 4<br/>&#13;&#13;
<br/>&#13;&#13;
    <span class="ent">❽</span> if points &gt; 0:<br/>&#13;&#13;
           print(f'Player {player} scores {points} point(s).')<br/>&#13;&#13;
<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_152"/>&#13;&#13;
    <span class="ent">❾</span> if player == 'A':<br/>&#13;&#13;
           score_a = score_a + points<br/>&#13;&#13;
           player = 'B'<br/>&#13;&#13;
       else:<br/>&#13;&#13;
           score_b = score_b + points<br/>&#13;&#13;
           player = 'A'<br/>&#13;&#13;
<br/>&#13;&#13;
   print(f'Player A: {score_a} point(s).')<br/>&#13;&#13;
   print(f'Player B: {score_b} point(s).')</p>&#13;&#13;
<p class="ex-caption" id="ch06ex01"><em>Listing 6-1: Solving Card Game</em></p>&#13;&#13;
<p class="indent">I’ve introduced the constant <span class="literal">NUM_CARDS</span> to refer to <span class="literal">52</span> <span class="ent">❶</span>. We’ll use it a couple of times in the code, and it’s easier to remember what <span class="literal">NUM_CARDS</span> means than what <span class="literal">52</span> means.</p>&#13;&#13;
<p class="indent">Next we define the <span class="literal">no_high</span> function, including docstring, that we’ve discussed in depth <span class="ent">❷</span>. We’ll always put our functions near the top of our programs. This way, the functions are available to be called by any code that follows them.</p>&#13;&#13;
<p class="indent">The main part of the program starts with creating a list that will hold the cards in the deck <span class="ent">❸</span>. We then read the cards from the input <span class="ent">❹</span>, appending each to the deck. You’ll notice that cards are never literally removed or taken from the deck (the deck remains as is throughout program execution). We could have done it that way. Instead, I’ve chosen to track where we are in the deck so that we know which card would be removed next.</p>&#13;&#13;
<p class="indent">There are three other crucial variables that we maintain: <span class="literal">score_a</span>, the current total score for player A; <span class="literal">score_b</span>, the current total score for player B; and <span class="literal">player</span>, the name of the current player.</p>&#13;&#13;
<p class="indent">Our next task is to look at each card in the deck to give points to the players. A regular <span class="literal">for</span> loop would let us look at the current card. But that’s not enough: if the current card is a high card, then we have to be able to look at later cards as well. To facilitate that, we use a range <span class="literal">for</span> loop <span class="ent">❺</span>.</p>&#13;&#13;
<p class="indent">On each iteration of this loop, we determine the number of points awarded to the current player based on the card that they take from the deck. Each rule for getting points depends on the deck having some number of remaining cards. The <span class="literal">remaining</span> variable <span class="ent">❻</span> tells us the number of remaining cards. When <span class="literal">i</span> is <span class="literal">0</span>, the number of remaining cards is <span class="literal">51</span>, because we’ve just taken the first card. When <span class="literal">i</span> is <span class="literal">1</span>, the number of remaining cards is <span class="literal">50</span>, because we’ve just taken the second card. In general, the expression for the number of remaining cards is the total number of cards, minus <span class="literal">i</span>, minus <span class="literal">1</span>.</p>&#13;&#13;
<p class="indent">And now we have four tests, one for each way to score points <span class="ent">❼</span>. Each one checks the current card and the number of cards remaining. If both of those conditions are <span class="literal">True</span>, then a call is made to our <span class="literal">no_high</span> function with a slice of the deck containing the appropriate number of cards. For example, if the current card is a <span class="literal">'jack'</span> and there is at least <span class="literal">1</span> card remaining, then we pass a list of length <span class="literal">1</span> to <span class="literal">no_high</span> <span class="ent">❼</span>. If <span class="literal">no_high</span> returns <span class="literal">True</span>, then there are no <span epub:type="pagebreak" id="page_153"/>high cards in the slice of the list, so the current player gets points. The <span class="literal">points</span> variable determines the number of points that will be awarded; it starts at <span class="literal">0</span> on each iteration of the loop and is set to <span class="literal">1</span>, <span class="literal">2</span>, <span class="literal">3</span>, or <span class="literal">4</span> as appropriate.</p>&#13;&#13;
<p class="indent">If the player scored points <span class="ent">❽</span>, then we output a message indicating the player who scored points and the number of points they scored.</p>&#13;&#13;
<p class="indent">All that’s left for the current iteration is to add the points to the current player’s score and make it the other player’s turn. We accomplish both of these tasks with an <span class="literal">if-else</span> statement <span class="ent">❾</span>. (If <span class="literal">points</span> is <span class="literal">0</span> on this iteration, then a harmless <span class="literal">0</span> is added to a player’s score. There’s no reason to explicitly test for and avoid that.)</p>&#13;&#13;
<p class="indent">The final two <span class="literal">print</span> calls output the total points for each player.</p>&#13;&#13;
<p class="indent">There we go: a solution to the problem that uses a function to organize our code and make it easier to read. Feel free to submit our code to the judge, and you should see that all test cases pass.</p>&#13;&#13;
<h3 class="h3a" id="ch06lev1sec6"><span class="h3aa">Problem #15: Action Figures</span></h3>&#13;&#13;
<p class="noindent">To solve Card Game, we first went through an example, and that example highlighted where a function might be useful. Now, we’ll solve another problem using functions, but we’ll discover the needed functions using a more systematic approach.</p>&#13;&#13;
<p class="indent">This is Timus problem <span class="literal">2144</span>. This is the only problem in the book from the Timus judge. To find the problem, go to <em><a href="https://acm.timus.ru/">https://acm.timus.ru/</a></em>, click <strong>Problem set</strong>, click <strong>Volume 12</strong>, and find problem 2144 (it’s called Cleaning the Room on the judge).</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec10">The Challenge</h4>&#13;&#13;
<p class="noindent">Lena has <em>n</em> unopened boxes of action figures. The boxes cannot be opened (otherwise the action figures lose their value), so the order of action figures in a box cannot be changed. Further, a box cannot be rotated (otherwise the action figures will be facing the wrong way).</p>&#13;&#13;
<p class="indent">Each action figure is specified by its height. For example, one of the boxes might have three action figures, from left to right, of heights 4, 5, and 7. When I talk about a box of action figures, I’ll always list the heights from left to right.</p>&#13;&#13;
<p class="indent">Lena wants to <em>organize the boxes</em>, which means to arrange the boxes so that heights of action figures increase or stay the same from left to right.</p>&#13;&#13;
<p class="indent">Whether she can organize the boxes or not depends on the heights of action figures in the boxes. For example, if a first box has action figures of heights 4, 5, and 7, and a second box has action figures of heights 1 and 2, then she can organize these boxes by putting the second box first. But if we keep the first box as is and change the second box to have action figures of heights 6 and 8, then there’s no way to organize these boxes.</p>&#13;&#13;
<p class="indent">Determine whether it’s possible for Lena to organize the boxes.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec11"><span epub:type="pagebreak" id="page_154"/>Input</h4>&#13;&#13;
<p class="noindent">The input consists of the following lines:</p>&#13;&#13;
<ul>&#13;&#13;
<li class="noindent">A line containing integer <em>n</em>, the number of boxes. <em>n</em> is between 1 and 100.</li>&#13;&#13;
<li class="noindent"><em>n</em> lines, one for each box. Each of these lines begins with integer <em>k</em>, indicating the number of action figures in this box. <em>k</em> is between 1 and 100. (Since <em>k</em> is at least 1, we don’t have to worry about empty boxes.) Following <em>k</em>, there are <em>k</em> integers giving the heights of the action figures from left to right in this box. Each height is an integer between 1 and 10,000. There is a space between each pair of integers on the line.</li>&#13;&#13;
</ul>&#13;&#13;
<h4 class="h4" id="ch06lev2sec12">Output</h4>&#13;&#13;
<p class="noindent">If Lena can organize the boxes, output <span class="literal">YES</span>; otherwise, output <span class="literal">NO</span>.</p>&#13;&#13;
<h3 class="h3" id="ch06lev1sec7">Representing the Boxes</h3>&#13;&#13;
<p class="noindent">This problem consists of several smaller problems, each of which we can solve by writing a function. Let’s first see how to represent the boxes in Python, and then we’ll design the functions that we need.</p>&#13;&#13;
<p class="indent">In <a href="ch05.xhtml#ch05">Chapter 5</a>, when we solved Baker Bonus, we learned that lists can have other lists as their values. This allows us to nest lists inside of lists. We can use such an arrangement to represent the boxes of action figures. For example, here’s a list that represents two boxes:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">boxes = [[4, 5, 7], [1, 2]]</span></p>&#13;&#13;
<p class="indent">The first box has three action figures, and the second has two. We can access each box individually:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">boxes[0]</span><br/>&#13;&#13;
[4, 5, 7]<br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">boxes[1]</span><br/>&#13;&#13;
[1, 2]</p>&#13;&#13;
<p class="indent">We’ll read the contents of the boxes from the input and put that information into a nested list, like the one I’ve shown. Then we’ll use that nested list to determine whether the boxes can be organized.</p>&#13;&#13;
<h3 class="h3" id="ch06lev1sec8">Top-Down Design</h3>&#13;&#13;
<p class="noindent">We’ll solve this problem using a program design approach called <em>top-down design</em>. Top-down design breaks a large problem into several smaller problems. That’s useful because each of the smaller problems will be easier to solve. We can then assemble those subproblem solutions to solve the original problem.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec13"><span epub:type="pagebreak" id="page_155"/>Doing Top-Down Design</h4>&#13;&#13;
<p class="noindent">Here’s how top-down design works. We start by writing an incomplete Python program that captures the main tasks in a solution. Some of these tasks won’t require much code, so we can proceed to solve them directly. Other tasks will require more from us, and we’ll turn each of those into a function that we’ll call. We might also solve a task by writing a little code <em>and</em> calling a function. However, those functions won’t exist yet. We’ll have to write them!</p>&#13;&#13;
<p class="indent">To write a needed function, we repeat this same process for that function’s task. That is, we start by writing down the tasks for that function. If we can write code for a task outright, then we do it; otherwise, we call another function (that we’ll write later) to handle that task.</p>&#13;&#13;
<p class="indent">We keep doing this until we have no more functions to write. At that point, we’ll have a solution to our problem.</p>&#13;&#13;
<p class="indent">It’s called top-down design because we start at the top, or highest, level of the problem and make our way downward, through the guts of the problem, until each task has been completely written in code. We’ll now use this to solve Action Figures.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec14">The Top Level</h4>&#13;&#13;
<p class="noindent">To begin our design, we focus on the main tasks that we’ll need to solve.</p>&#13;&#13;
<p class="indent">We’ll certainly have to read the input, so that’s our first task.</p>&#13;&#13;
<p class="indent">Now, assume that we’ve read the input. What should we do to determine whether the boxes can be organized? One important thing to do is check each box on its own to make sure that its action figures have their heights in order. For example, suppose that we had the box <span class="literal">[18, 20, 4]</span>. This box, with heights out of order, means that we have no chance of organizing all of the boxes. We can’t even organize this one!</p>&#13;&#13;
<p class="indent">So, that’s our second task: determine whether each box, on its own, has its action figures in order. If any of these boxes has its action figures out of order, then we know that the boxes can’t be organized. If all boxes are OK, then we have more to check.</p>&#13;&#13;
<p class="indent">If each box on its own is OK, the next question is whether we can organize all of the boxes. One important observation we can make here is that the only action figures we care about from now on are the ones at the left and right sides of each box. The action figures between these don’t matter anymore.</p>&#13;&#13;
<p class="indent">Consider this example where we have three boxes:</p>&#13;&#13;
<p class="programs">[[9, 13, 14, 17, 25],<br/>&#13;&#13;
 [32, 33, 34, 36],<br/>&#13;&#13;
 [1, 6]]</p>&#13;&#13;
<p class="indent">The first box starts with an action figure of height 9 and ends with an action figure of height 25. Action figures placed to the left of this box must all have height 9 or less; for example, we can place the third box to the left of this box. Action figures placed to the right of this box must all have height 25 or more; for example, we can place the second box to the right of this <span epub:type="pagebreak" id="page_156"/>box. The action figures of heights 13, 14, and 17 change nothing; they may as well not be there.</p>&#13;&#13;
<p class="indent">That’s our third task then: ignore all action figures except those on the ends of boxes.</p>&#13;&#13;
<p class="indent">Following that third task, we’ll have a list that looks like this:</p>&#13;&#13;
<p class="programs">[[9, 25],<br/>&#13;&#13;
 [32, 36],<br/>&#13;&#13;
 [1, 6]]</p>&#13;&#13;
<p class="indent">It’s a lot easier to tell whether we can organize these boxes if we first sort them, like this:</p>&#13;&#13;
<p class="programs">[[1, 6],<br/>&#13;&#13;
 [9, 25],<br/>&#13;&#13;
 [32, 36]]</p>&#13;&#13;
<p class="indent">Now it’s easy to see what the neighboring boxes of a box must be. (We used a similar approach when solving Village Neighborhood in <a href="ch05.xhtml#ch05">Chapter 5</a>.) So, our fourth task is to sort the boxes.</p>&#13;&#13;
<p class="indent">Our fifth and final task is to determine whether these sorted boxes are organized. They are organized if the heights of action figures are sorted from left to right. The action figures of heights 1, 6, 9, 25, 32, and 36 are appropriately sorted, so the previous boxes can be organized. But consider this example:</p>&#13;&#13;
<p class="programs">[[1, 6],<br/>&#13;&#13;
 [9, 50],<br/>&#13;&#13;
 [32, 36]]</p>&#13;&#13;
<p class="indent">These boxes can’t be organized because of that huge action figure in the second box. That second box takes up heights 9 to 50; the third box can’t go on the right of the second box because its heights are too small.</p>&#13;&#13;
<p class="indent">We’ve now finished working through the problem and have decided on five main tasks:</p>&#13;&#13;
<ol>&#13;&#13;
<li class="noindent">Read input.</li>&#13;&#13;
<li class="noindent">Check whether all boxes are OK.</li>&#13;&#13;
<li class="noindent">Obtain a new list of boxes with only the left and right action figure heights from each box.</li>&#13;&#13;
<li class="noindent">Sort these new boxes.</li>&#13;&#13;
<li class="noindent">Determine whether these sorted boxes are organized.</li>&#13;&#13;
</ol>&#13;&#13;
<p class="indent">You might wonder why we have a “Read input” task but not a “Write output” task. For this problem, writing output involves just outputting <span class="literal">YES</span> or <span class="literal">NO</span> as needed; there won’t be much to it. In addition, we’ll output <span class="literal">YES</span> or <span class="literal">NO</span> as soon as we know the answer, so output will be interleaved with other tasks. For those reasons, I’ve decided not to include it as a main task. When working through top-down design on your own, don’t worry if you later realize <span epub:type="pagebreak" id="page_157"/>that you’ve left out a task. You can just add it and continue with your design.</p>&#13;&#13;
<p class="indent">Here’s how we can capture our required tasks in code:</p>&#13;&#13;
<p class="programs"><span class="ent">❶</span> # Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Read input<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Check whether all boxes are OK<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Sort boxes<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Determine whether boxes are organized</p>&#13;&#13;
<p class="indent">I’m calling this the main program <span class="ent">❶</span>. Any functions we write should be included in the program before this comment.</p>&#13;&#13;
<p class="indent">Each task is written as just a comment for now. The <span class="literal">TODO</span> markings are there to highlight that these are tasks for us to convert from English to Python. Once we finish a task, we’ll remove its <span class="literal">TODO</span>. That way, we’ll be able to track which tasks we’ve completed and which we haven’t. Let’s do this!</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec15">Task 1: Read Input</h4>&#13;&#13;
<p class="noindent">We need to read the line containing <em>n</em> (the number of boxes) and then read the boxes. Reading an integer is something we can do in a single line, so let’s read <em>n</em> directly. Reading the boxes, on the other hand, is a well-defined task that will take a few lines of code, so let’s solve that one with a function; we’ll call it <span class="literal">read_boxes</span>. Here’s where that leaves us in our main program:</p>&#13;&#13;
<p class="programs">   # Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
<span class="ent">❶</span> # Read input<br/>&#13;&#13;
   n = int(input())<br/>&#13;&#13;
   boxes = read_boxes(n)<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Check whether all boxes are OK<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Sort boxes<br/>&#13;&#13;
<br/>&#13;&#13;
   # TODO: Determine whether boxes are organized</p>&#13;&#13;
<p class="indent">I’ve removed the <span class="literal">TODO</span> from the comment <span class="ent">❶</span>, since from the perspective of the main program, we’ve solved that task. We do need to write the <span class="literal">read_boxes</span> function, of course, so let’s do that now.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_158"/>The <span class="literal">read_boxes</span> function takes an integer <span class="literal">n</span> as a parameter and reads and returns <span class="literal">n</span> boxes. Here’s the code:</p>&#13;&#13;
<p class="programs">def read_boxes(n):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    n is the number of boxes to read.<br/>&#13;&#13;
<br/>&#13;&#13;
    Read the boxes from the input, and return them as a<br/>&#13;&#13;
    list of boxes; each box is a list of action figure heights.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    boxes = []<br/>&#13;&#13;
 <span class="ent">❶</span> for i in range(n):<br/>&#13;&#13;
        box = input().split()<br/>&#13;&#13;
     <span class="ent">❷</span> box.pop(0)<br/>&#13;&#13;
        for i in range(len(box)):<br/>&#13;&#13;
            box[i] = int(box[i])<br/>&#13;&#13;
        boxes.append(box)<br/>&#13;&#13;
    return boxes</p>&#13;&#13;
<p class="indent">We’re asked to read <span class="literal">n</span> boxes, so we loop <span class="literal">n</span> times <span class="ent">❶</span>. On each iteration of this loop, we read the current line and split it into its individual action figure heights. The line starts with an integer indicating the number of heights in the line, so we remove that value from the list (it’s at index <span class="literal">0</span>) before continuing <span class="ent">❷</span>. Then we convert each height to an integer and add the current box to the list of boxes. Finally, we return the list of boxes.</p>&#13;&#13;
<p class="indent">We didn’t defer any part of <span class="literal">read_boxes</span> to some as-yet-written function, so we’re done with this task! We’ll include this function, along with other functions we write, before the <span class="literal"># Main Program</span> comment.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec16">Task 2: Check Whether All Boxes Are OK</h4>&#13;&#13;
<p class="noindent">Does each box, on its own, have the action figures going from shortest to tallest? Good question, and not one we know how to answer in just a line or two of code. Let’s rely on a new function, <span class="literal">all_boxes_ok</span>, to tell us. If that function returns <span class="literal">False</span>, then at least one box has its heights messed up, so we won’t be able to organize the boxes. In that case, we should output <span class="literal">NO</span>. If <span class="literal">all_boxes_ok</span> returns <span class="literal">True</span>, then we should carry out our remaining tasks to determine whether the boxes can be organized. Let’s add this bit of <span class="literal">if-else</span> logic to our program, too. Here’s what we’ve got:</p>&#13;&#13;
<p class="programs">   # Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
   # Read input<br/>&#13;&#13;
   n = int(input())<br/>&#13;&#13;
   boxes = read_boxes(n)<br/>&#13;&#13;
<br/>&#13;&#13;
   # Check whether all boxes are OK<br/>&#13;&#13;
<span class="ent">❶</span> if not all_boxes_ok(boxes):<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_159"/>&#13;&#13;
       print('NO')<br/>&#13;&#13;
   else:<br/>&#13;&#13;
       # TODO: Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
<br/>&#13;&#13;
       # TODO: Sort boxes<br/>&#13;&#13;
<br/>&#13;&#13;
       # TODO: Determine whether boxes are organized</p>&#13;&#13;
<p class="indent">Now we need to write the <span class="literal">all_boxes_ok</span> function that we’re calling <span class="ent">❶</span>. We can check each box to determine whether it’s in order. If it isn’t, we return <span class="literal">False</span> right away. If it is in order, then we check the next box. If we check every box and they’re all in order, then we return <span class="literal">True</span>.</p>&#13;&#13;
<p class="indent">Aha, so we need to be able to check an individual box! Sounds like another function to me. Let’s call that one <span class="literal">box_ok</span>.</p>&#13;&#13;
<p class="indent">Here’s what we have for <span class="literal">all_boxes_ok</span>:</p>&#13;&#13;
<p class="programs">def all_boxes_ok(boxes):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    boxes is a list of boxes; each box is a list of action figure heights.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if each box in boxes has its action figures in<br/>&#13;&#13;
    nondecreasing order of height, False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    for box in boxes:<br/>&#13;&#13;
        if not box_ok(box):<br/>&#13;&#13;
            return False<br/>&#13;&#13;
    return True</p>&#13;&#13;
<p class="indent">I’ve used the word <span class="literal">nondecreasing</span> in the comment, rather than <span class="literal">increasing</span>, because heights of action figures are allowed to be equal. For example, the box <span class="literal">[4, 4, 4]</span> is just fine; claiming that this box is “increasing” would be incorrect.</p>&#13;&#13;
<p class="indent">We’ve pushed part of the <span class="literal">all_boxes_ok</span> task into <span class="literal">box_ok</span>, so let’s write that function next. Here goes:</p>&#13;&#13;
<p class="programs">def box_ok(box):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    box is the list of action figure heights in a given box.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if the heights in box are in nondecreasing order,<br/>&#13;&#13;
    False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    for i in range(len(box)):<br/>&#13;&#13;
        if box[i] &gt; box[i + 1]:<br/>&#13;&#13;
            return False<br/>&#13;&#13;
    return True</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_160"/>If any height is greater than the height to its right, we return <span class="literal">False</span> since the heights are not in order. If we get past the <span class="literal">for</span> loop, then there are no height violations, so we return <span class="literal">True</span>.</p>&#13;&#13;
<p class="indent">One nice side effect of using top-down design is that we get little chunks of code, wrapped up as functions, that we can test in isolation. For example, enter the code for <span class="literal">box_ok</span> into the Python shell. Then we can test it:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">box_ok([4, 5, 6])</span></p>&#13;&#13;
<p class="indent">We’re hoping for <span class="literal">True</span> to be returned here, because the box is in order from small heights to big heights. We certainly weren’t hoping for what we actually get:</p>&#13;&#13;
<p class="programs">Traceback (most recent call last):<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>&#13;&#13;
  File "&lt;stdin&gt;", line 9, in box_ok<br/>&#13;&#13;
IndexError: list index out of range</p>&#13;&#13;
<p class="indent">Errors are never fun, and they’re even less fun when we have to trawl through pages and pages of code to find them. But here, we know that the error is localized to this little function, so our work to find it is reduced considerably. The problem here is that we’ll eventually compare the rightmost height to the height to its right—and of course the latter doesn’t exist! So we need to stop one iteration earlier, comparing the second-to-last height to the last height. Here’s the updated code:</p>&#13;&#13;
<p class="programs">def box_ok(box):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    box is the list of action figure heights in a given box.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if the heights in box are in nondecreasing order,<br/>&#13;&#13;
    False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
 <span class="ent">❶</span> for i in range(len(box) - 1):<br/>&#13;&#13;
        if box[i] &gt; box[i + 1]:<br/>&#13;&#13;
            return False<br/>&#13;&#13;
    return True</p>&#13;&#13;
<p class="indent">The only change is in the call to <span class="literal">range</span> <span class="ent">❶</span>. If you test this version of the function, you’ll see that it works as required. We’re done with Task 2!</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec17">Task 3: Obtain a New List of Boxes with Only Left and Right Heights</h4>&#13;&#13;
<p class="noindent">Now we’re getting the hang of top-down design. In this task, we need a way to go from boxes with all of their action figures to boxes only with their leftmost and rightmost action figures. I’ll refer to the leftmost and rightmost action figures as box <em>endpoints</em>.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_161"/>One approach is to create a new list of boxes with only the endpoints, and that’s what I’ll do here. You could also think about actually removing heights from the original boxes, though that’s a little trickier.</p>&#13;&#13;
<p class="indent">I’ve called the function for this task <span class="literal">boxes_endpoints</span>. Here’s the main part of the program, updated with a call to that function:</p>&#13;&#13;
<p class="programs"># Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
# Read input<br/>&#13;&#13;
n = int(input())<br/>&#13;&#13;
boxes = read_boxes(n)<br/>&#13;&#13;
<br/>&#13;&#13;
# Check whether all boxes are OK<br/>&#13;&#13;
if not all_boxes_ok(boxes):<br/>&#13;&#13;
    print('NO')<br/>&#13;&#13;
else:<br/>&#13;&#13;
    # Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
 <span class="ent">❶</span> endpoints = boxes_endpoints(boxes)<br/>&#13;&#13;
<br/>&#13;&#13;
    # TODO: Sort boxes<br/>&#13;&#13;
<br/>&#13;&#13;
    # TODO: Determine whether boxes are organized</p>&#13;&#13;
<p class="indent">When we call <span class="literal">boxes_endpoints</span> with a list of boxes <span class="ent">❶</span>, we expect to get back a new list with only the box endpoints. Here’s the <span class="literal">boxes_endpoints</span> code that satisfies this description:</p>&#13;&#13;
<p class="programs">def boxes_endpoints(boxes):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    boxes is a list of boxes; each box is a list of action figure heights.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return a list, where each value is a list of two values:<br/>&#13;&#13;
    the heights of the leftmost and rightmost action figures in a box.<br/>&#13;&#13;
    """<br/>&#13;&#13;
 <span class="ent">❶</span> endpoints = []<br/>&#13;&#13;
    for box in boxes:<br/>&#13;&#13;
     <span class="ent">❷</span> endpoints.append([box[0], box[-1]])<br/>&#13;&#13;
    return endpoints</p>&#13;&#13;
<p class="indent">We create a new list <span class="ent">❶</span> that will hold the endpoints of each box. Then we loop through the boxes. For each box, we use indexing to find the leftmost and rightmost heights in the box and append them to our endpoints list <span class="ent">❷</span>. Finally, we return the endpoints list.</p>&#13;&#13;
<p class="indent">Wait a sec: what happens if there’s a box with just one action figure in it? What will our <span class="literal">boxes_endpoints</span> function do with it? According to its docstring, it will give us back a list of two values for any valid box. So that had better happen here; otherwise, the function isn’t doing what it promises. Let’s test it. Enter the <span class="literal">boxes_endpoints</span> function into the Python shell, and try <span epub:type="pagebreak" id="page_162"/>it with a list of one box with one action figure:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">boxes_endpoints([[2]])</span><br/>&#13;&#13;
[[2, 2]]</p>&#13;&#13;
<p class="indent">Success! The leftmost height is <span class="literal">2</span>, and the rightmost height is <span class="literal">2</span>, so we get a list with two occurrences of <span class="literal">2</span>. Our function works correctly in this case because <span class="literal">box[0]</span> and <span class="literal">box[-1]</span> both refer to the same value when <span class="literal">box</span> has only one value. (Don’t worry about the possibility of empty boxes. The problem description prohibits them.)</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec18">Task 4: Sort Boxes</h4>&#13;&#13;
<p class="noindent">At this point, we have a list of endpoints—something like this:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">endpoints = [[9, 25], [32, 36], [1, 6]]</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">endpoints</span><br/>&#13;&#13;
[[9, 25], [32, 36], [1, 6]]</p>&#13;&#13;
<p class="indent">We want to sort them. Do we need another function for this? Some sort of <span class="literal">sort_endpoints</span> function?</p>&#13;&#13;
<p class="indent">Not this time! The list <span class="literal">sort</span> method does exactly what we need:</p>&#13;&#13;
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">endpoints.sort()</span><br/>&#13;&#13;
&gt;&gt;&gt; <span class="codestrong1">endpoints</span><br/>&#13;&#13;
[[1, 6], [9, 25], [32, 36]]</p>&#13;&#13;
<p class="indent">When called on a list of two-value lists, <span class="literal">sort</span> sorts using the first value. (If there’s a tie, then it further sorts using the second value.)</p>&#13;&#13;
<p class="indent">We can immediately update the main part of our program with a call to <span class="literal">sort</span> and knock off one more <span class="literal">TODO</span>. Here’s the updated code:</p>&#13;&#13;
<p class="programs"># Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
# Read input<br/>&#13;&#13;
n = int(input())<br/>&#13;&#13;
boxes = read_boxes(n)<br/>&#13;&#13;
<br/>&#13;&#13;
# Check whether all boxes are OK<br/>&#13;&#13;
if not all_boxes_ok(boxes):<br/>&#13;&#13;
    print('NO')<br/>&#13;&#13;
else:<br/>&#13;&#13;
    # Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
    endpoints = boxes_endpoints(boxes)<br/>&#13;&#13;
<br/>&#13;&#13;
    # Sort boxes<br/>&#13;&#13;
    endpoints.sort()<br/>&#13;&#13;
<br/>&#13;&#13;
    # TODO: Determine whether boxes are organized</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_163"/>We’re nearly there. Just one <span class="literal">TODO</span> to go.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec19">Task 5: Determine Whether Boxes Are Organized</h4>&#13;&#13;
<p class="noindent">Our final task is to check the endpoints. They might be in order, like this:</p>&#13;&#13;
<p class="programs">[[1, 6],<br/>&#13;&#13;
 [9, 25],<br/>&#13;&#13;
 [32, 36]]</p>&#13;&#13;
<p class="indent">Or they might not be, like this:</p>&#13;&#13;
<p class="programs">[[1, 6],<br/>&#13;&#13;
 [9, 50],<br/>&#13;&#13;
 [32, 36]]</p>&#13;&#13;
<p class="indent">In the former case, we should print <span class="literal">YES</span>; in the latter, we should print <span class="literal">NO</span>. We need a function to tell us whether the endpoints are in order. Updating the main part of the program for the final time, we end up with this:</p>&#13;&#13;
<p class="programs"># Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
# Read input<br/>&#13;&#13;
n = int(input())<br/>&#13;&#13;
boxes = read_boxes(n)<br/>&#13;&#13;
<br/>&#13;&#13;
# Check whether all boxes are OK<br/>&#13;&#13;
if not all_boxes_ok(boxes):<br/>&#13;&#13;
    print('NO')<br/>&#13;&#13;
else:<br/>&#13;&#13;
    # Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
    endpoints = boxes_endpoints(boxes)<br/>&#13;&#13;
<br/>&#13;&#13;
    # Sort boxes<br/>&#13;&#13;
    endpoints.sort()<br/>&#13;&#13;
<br/>&#13;&#13;
    # Determine whether boxes are organized<br/>&#13;&#13;
 <span class="ent">❶</span> if all_endpoints_ok(endpoints):<br/>&#13;&#13;
        print('YES')<br/>&#13;&#13;
    else:<br/>&#13;&#13;
        print('NO')</p>&#13;&#13;
<p class="indent">All that stands between us and a complete solution to the problem is that <span class="literal">all_endpoints_ok</span> function that we’re calling <span class="ent">❶</span>. It takes a list where each value is a list of endpoints and returns <span class="literal">True</span> if the endpoints are in order and <span class="literal">False</span> otherwise.</p>&#13;&#13;
<p class="indent"><span epub:type="pagebreak" id="page_164"/>Let’s get a feel for how we can implement this function by working through an example. Here’s the list of endpoints we’ll use:</p>&#13;&#13;
<p class="programs">[[1, 6],<br/>&#13;&#13;
 [9, 25],<br/>&#13;&#13;
 [32, 36]]</p>&#13;&#13;
<p class="indent">The first box has a right endpoint of height 6. So, the second box better have a left endpoint of height 6 or more. If it doesn’t, then we return <span class="literal">False</span> indicating that the endpoints are not in order. But we’re good here, because the second box has a left endpoint of height 9.</p>&#13;&#13;
<p class="indent">Now we repeat that check using 25, the right endpoint of the second box. The left endpoint of the third box is 32, so we’re good again because 32 is at least 25.</p>&#13;&#13;
<p class="indent">In general, if the left endpoint of a box is ever less than the right endpoint of the previous box, we return <span class="literal">False</span>. Otherwise, if all of these checks pass, we return <span class="literal">True</span>.</p>&#13;&#13;
<p class="indent">Here’s the code:</p>&#13;&#13;
<p class="programs">def all_endpoints_ok(endpoints):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    endpoints is a list, where each value is a list of two values:<br/>&#13;&#13;
    the heights of the leftmost and rightmost action figures in a box.<br/>&#13;&#13;
<br/>&#13;&#13;
 <span class="ent">❶</span> Requires: endpoints is sorted by action figure heights.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if the endpoints came from boxes that can be<br/>&#13;&#13;
    put in order, False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
 <span class="ent">❷</span> maximum = endpoints[0][1]<br/>&#13;&#13;
    for i in range(1, len(endpoints)):<br/>&#13;&#13;
        if endpoints[i][0] &lt; maximum:<br/>&#13;&#13;
            return False<br/>&#13;&#13;
     <span class="ent">❸</span> maximum = endpoints[i][1]<br/>&#13;&#13;
    return True</p>&#13;&#13;
<p class="indent">I’ve added some information to the docstring reminding us what the function requires when it’s called <span class="ent">❶</span>. Specifically, we must remember to have the endpoints sorted before calling this function. Otherwise, the function could return the wrong value.</p>&#13;&#13;
<p class="indent">Each value of <span class="literal">endpoints</span> is a list with two values: index <span class="literal">0</span> is the leftmost (minimum) height, and index <span class="literal">1</span> is the rightmost (maximum) height. The code uses the <span class="literal">maximum</span> variable to track the maximum height of a box. Prior to the <span class="literal">for</span> loop, it refers to the maximum height in the first box <span class="ent">❷</span>. The <span class="literal">for</span> loop compares the minimum of the next box to that maximum. If the minimum of the next box is too small, we return <span class="literal">False</span>, because these two boxes cannot be organized correctly. The last thing to do in each iteration is update <span class="literal">maximum</span> so that it refers to the maximum of the next box <span class="ent">❸</span>.</p>&#13;&#13;
<h4 class="h4" id="ch06lev2sec20"><span epub:type="pagebreak" id="page_165"/>Putting It All Together</h4>&#13;&#13;
<p class="noindent">Having written code for all tasks, including the functions that sprang up as part of the design, we’re ready to put it all together into a complete solution. It’s up to you whether to keep the comments in the main part of the program. I’ve left them in, but in practice this may be a case of over-documenting the code, since the function names on their own are chosen to convey what the code is doing. See <a href="ch06.xhtml#ch06ex02">Listing 6-2</a> for the complete code.</p>&#13;&#13;
<p class="programs">def read_boxes(n):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    n is the number of boxes to read.<br/>&#13;&#13;
<br/>&#13;&#13;
    Read the boxes from the input, and return them as a<br/>&#13;&#13;
    list of boxes; each box is a list of action figure heights.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    boxes = []<br/>&#13;&#13;
    for i in range(n):<br/>&#13;&#13;
        box = input().split()<br/>&#13;&#13;
        box.pop(0)<br/>&#13;&#13;
        for i in range(len(box)):<br/>&#13;&#13;
            box[i] = int(box[i])<br/>&#13;&#13;
        boxes.append(box)<br/>&#13;&#13;
    return boxes<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
def box_ok(box):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    box is the list of action figure heights in a given box.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if the heights in box are in nondecreasing order,<br/>&#13;&#13;
    False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    for i in range(len(box) - 1):<br/>&#13;&#13;
        if box[i] &gt; box[i + 1]:<br/>&#13;&#13;
            return False<br/>&#13;&#13;
    return True<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
def all_boxes_ok(boxes):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    boxes is a list of boxes; each box is a list of action figure heights.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if each box in boxes has its action figures in<br/>&#13;&#13;
    nondecreasing order of height, False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    for box in boxes:<br/>&#13;&#13;
        if not box_ok(box):<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_166"/>            return False<br/>&#13;&#13;
    return True<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
def boxes_endpoints(boxes):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    boxes is a list of boxes; each box is a list of action figure heights.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return a list, where each value is a list of two values:<br/>&#13;&#13;
    the heights of the leftmost and rightmost action figures in a box.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    endpoints = []<br/>&#13;&#13;
    for box in boxes:<br/>&#13;&#13;
        endpoints.append([box[0], box[-1]])<br/>&#13;&#13;
    return endpoints<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
def all_endpoints_ok(endpoints):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    endpoints is a list, where each value is a list of two values:<br/>&#13;&#13;
    the heights of the leftmost and rightmost action figures in a box.<br/>&#13;&#13;
<br/>&#13;&#13;
    Requires: endpoints is sorted by action figure heights.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if the endpoints came from boxes that can be<br/>&#13;&#13;
    put in order, False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    maximum = endpoints[0][1]<br/>&#13;&#13;
    for i in range(1, len(endpoints)):<br/>&#13;&#13;
        if endpoints[i][0] &lt; maximum:<br/>&#13;&#13;
            return False<br/>&#13;&#13;
        maximum = endpoints[i][1]<br/>&#13;&#13;
    return True<br/>&#13;&#13;
<br/>&#13;&#13;
<br/>&#13;&#13;
# Main Program<br/>&#13;&#13;
<br/>&#13;&#13;
# Read input<br/>&#13;&#13;
n = int(input())<br/>&#13;&#13;
boxes = read_boxes(n)<br/>&#13;&#13;
<br/>&#13;&#13;
# Check whether all boxes are OK<br/>&#13;&#13;
if not all_boxes_ok(boxes):<br/>&#13;&#13;
    print('NO')<br/>&#13;&#13;
else:<br/>&#13;&#13;
    # Obtain a new list of boxes with only left and right heights<br/>&#13;&#13;
    endpoints = boxes_endpoints(boxes)<br/>&#13;&#13;
<br/>&#13;&#13;
<span epub:type="pagebreak" id="page_167"/>    # Sort boxes<br/>&#13;&#13;
    endpoints.sort()<br/>&#13;&#13;
<br/>&#13;&#13;
    # Determine whether boxes are organized<br/>&#13;&#13;
    if all_endpoints_ok(endpoints):<br/>&#13;&#13;
        print('YES')<br/>&#13;&#13;
    else:<br/>&#13;&#13;
        print('NO')</p>&#13;&#13;
<p class="ex-caption" id="ch06ex02"><em>Listing 6-2: Solving Action Figures</em></p>&#13;&#13;
<p class="indent">This is the largest program that we’ve written to this point in the book. But look how tidy and minimal the main part of the program is: it’s mostly calls to functions, with a little bit of <span class="literal">if-else</span> logic to glue them together.</p>&#13;&#13;
<p class="indent">We’re calling each function only once here. Compare that to the <span class="literal">no_high</span> Card Game function that we called four times. Even if a function is called only once, it still contributes to organized, readable code.</p>&#13;&#13;
<p class="indent">Time to submit to the Timus judge. You should see that all test cases pass.</p>&#13;&#13;
<div class="sidebar">&#13;&#13;
<p class="sb-title"><strong>CONCEPT CHECK</strong></p>&#13;&#13;
<p class="sidebarp">In Task 2, we wrote function <span class="literal">box_ok</span> for determining whether a single box has its heights in order. It uses a range <span class="literal">for</span> loop. Is the following <span class="literal">while</span> loop version of <span class="literal">box_ok</span> correct?</p>&#13;&#13;
<p class="programs">def box_ok(box):<br/>&#13;&#13;
    """<br/>&#13;&#13;
    box is the list of action figure heights in a given box.<br/>&#13;&#13;
<br/>&#13;&#13;
    Return True if the heights in box are in nondecreasing order,<br/>&#13;&#13;
    False otherwise.<br/>&#13;&#13;
    """<br/>&#13;&#13;
    ok = True<br/>&#13;&#13;
    i = 0<br/>&#13;&#13;
    while i &lt; len(box) - 1 and ok:<br/>&#13;&#13;
        if box[i] &gt; box[i + 1]:<br/>&#13;&#13;
            ok = False<br/>&#13;&#13;
        i = i + 1<br/>&#13;&#13;
    return ok</p>&#13;&#13;
<p class="alphat">A. Yes</p>&#13;&#13;
<p class="alpha">B. No; it can cause an <span class="literal">IndexError</span></p>&#13;&#13;
<p class="alpha">C. No; it doesn’t cause any errors, but it can return the wrong value</p>&#13;&#13;
<p class="sb-noindent1"><span epub:type="pagebreak" id="page_168"/>Answer: A. This is equivalent to our earlier version using the range <span class="literal">for</span> loop. The <span class="literal">ok</span> variable starts off as <span class="literal">True</span>, meaning that all heights we have checked are fine (because we haven’t checked any yet!). The <span class="literal">while</span> loop continues as long</p>&#13;&#13;
<p class="sidebarp">as there are more boxes to check and there are no height violations. If an action figure is out of order, <span class="literal">ok</span> is set to <span class="literal">False</span>, which terminates the loop. If all action figures are in order, then the value of <span class="literal">ok</span> never changes from <span class="literal">True</span> to <span class="literal">False</span>. Therefore, when we <span class="literal">return ok</span> at the bottom of the function, we return <span class="literal">True</span> if all action figures are in order and <span class="literal">False</span> if not.</p>&#13;&#13;
</div>&#13;&#13;
<h3 class="h3" id="ch06lev1sec9">Summary</h3>&#13;&#13;
<p class="noindent">In this chapter, we learned about functions. A function is a self-contained block of code that solves a small part of a larger problem. We learned how to pass information to a function (through arguments) and get information back (through a return value).</p>&#13;&#13;
<p class="indent">To determine which functions to write in the first place, we can use top-down design. Top-down design helps us break a solution to a large problem into a number of smaller tasks; for each task, we solve it directly if we can or write a function for it if we can’t. If a given task is too unwieldy, we can perform further top-down design on it.</p>&#13;&#13;
<p class="indent">In the next chapter, we’ll learn how to work with files of our choosing, rather than using standard input and standard output. As we continue to push the boundaries of what we know, we’ll find many uses for functions in that chapter and the rest of the book. Practice with some of the following exercises to increase your confidence using functions.</p>&#13;&#13;
<h3 class="h3" id="ch06lev1sec10">Chapter Exercises</h3>&#13;&#13;
<p class="noindent">Here are some exercises for you to try. For each, use top-down design to identify one or more functions that help you organize your code. Include a docstring in each function!</p>&#13;&#13;
<ol>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ccc13s1</span>, From 1987 to 2013</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ccc18j3</span>, Are we there yet?</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">ecoo12r1p2</span>, Decoding DNA</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">crci07p1</span>, Platforme</li>&#13;&#13;
<li class="noindent">DMOJ problem <span class="literal">coci13c2p2</span>, Misa</li>&#13;&#13;
<li class="noindent">Revisit some of the exercises from <a href="ch05.xhtml#ch05">Chapter 5</a> and improve your solutions by using functions. I particularly suggest revisiting DMOJ problem <span class="literal">coci18c2p1</span> (Preokret) and DMOJ problem <span class="literal">ccc00s2</span> (Babbling Brooks).</li>&#13;&#13;
</ol>&#13;&#13;
<h3 class="h3" id="ch06lev1sec11"><span epub:type="pagebreak" id="page_169"/>Notes</h3>&#13;&#13;
<p class="noindent">Card Game is originally from the 1999 Canadian Computing Competition. Action Figures is originally from the 2019 Ural School Programming Contest.</p>&#13;&#13;
<p class="indent">Many modern programming languages, Python included, support two distinct programming paradigms. One is based on functions; that’s what we studied in this chapter. The other is based on <em>objects</em> and leads to a paradigm known as <em>object-oriented programming (OOP)</em>. OOP involves defining new types and writing methods for those types. We use Python types (such as integers and strings) throughout the book, but we won’t otherwise discuss OOP. For an introduction to OOP, and case studies of OOP in practice, I recommend <em>Python Crash Course</em>, 2nd edition by Eric Matthes (No Starch Press, 2019).</p>&#13;&#13;
<span epub:type="pagebreak" id="page_170"/>&#13;&#13;
</div></body></html>