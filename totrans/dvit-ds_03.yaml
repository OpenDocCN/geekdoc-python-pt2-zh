- en: '3'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '3'
- en: Group Comparisons
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 组间比较
- en: '![](image_fi/book_art/chapterart.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](image_fi/book_art/chapterart.png)'
- en: 'In this chapter, we’ll discuss how to make intelligent comparisons between
    groups, using examples from business scenarios. We’ll start small by looking at
    one group alone. We’ll see which descriptive statistics most succinctly describe
    it, draw plots that capture its essence, and compare various samples from it.
    We’ll then be ready to reason about samples from two groups. We’ll conclude by
    looking at statistical significance tests: the t-test and the Mann-Whitney U test.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论如何在不同组之间进行智能比较，使用来自商业场景的例子。我们将从小处开始，首先仅查看一个组。我们将了解哪些描述性统计量最简洁地描述它，绘制出能够捕捉其本质的图形，并比较它的各个样本。然后，我们将准备好对来自两个组的样本进行推理。最后，我们将通过查看统计显著性检验来结束：t检验和曼-惠特尼U检验。
- en: Reading Population Data
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 阅读人口数据
- en: Let’s start by reading in some data. This data records measurements of 1,034
    professional baseball players, including their height, weight, and age at the
    time of measurement. You can download this data directly from [https://bradfordtuckfield.com/mlb.csv](https://bradfordtuckfield.com/mlb.csv).
    Its original source is the Statistics Online Computational Resource (SOCR) website
    ([https://web.archive.org/web/20220629205951/https://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_MLB_HeightsWeights](https://web.archive.org/web/20220629205951/https://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_MLB_HeightsWeights)).
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从读取一些数据开始。这些数据记录了1,034名职业棒球运动员的身高、体重以及测量时的年龄。你可以直接从[https://bradfordtuckfield.com/mlb.csv](https://bradfordtuckfield.com/mlb.csv)下载这些数据。其原始来源是统计在线计算资源（SOCR）网站([https://web.archive.org/web/20220629205951/https://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_MLB_HeightsWeights](https://web.archive.org/web/20220629205951/https://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_MLB_HeightsWeights))。
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'In this snippet, we import pandas and use its `read_csv()` method to read in
    our data. This is all simple data ingestion, just as we did in Chapters 1 and
    2. After you run this snippet, you should see the following output:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个代码片段中，我们导入了pandas并使用其`read_csv()`方法来读取我们的数据。这都是简单的数据摄取，就像我们在第1章和第2章中所做的那样。运行这个片段后，你应该能看到以下输出：
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The last line of the output shows the *shape* of the data, the number of rows
    and columns in the dataset. We can see that our data has 1,034 rows and 6 columns.
    We have one row for each person who was measured, and one column for each fact
    recorded about each person. These 1,034 people are collectively called our *population*,
    which, in the world of statistics, means any set of similar items that are being
    studied to answer a particular question.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 输出的最后一行显示了数据的*形状*，即数据集中的行数和列数。我们可以看到数据有1,034行和6列。每一行对应一个被测量的人，每一列对应记录的关于该人的一个事实。这1,034人被统称为我们的*总体*，在统计学中，总体指的是为回答特定问题而研究的一组相似项。
- en: Summary Statistics
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要统计
- en: 'Doing exploratory analysis every time we get a new dataset is useful. One thing
    we can do is run `print(mlb.describe())` to see our summary statistics all at
    once:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 每当我们获得一个新的数据集时，进行探索性分析是非常有用的。我们可以做的一件事是运行`print(mlb.describe())`来一次性查看我们的摘要统计信息：
- en: '[PRE2]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Plotting the data early and often is also a good idea in any data analysis
    effort. We’ll create a box plot with the following code:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何数据分析工作中，尽早并频繁地绘制数据也是一个好主意。我们将使用以下代码创建一个箱型图：
- en: '[PRE3]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Here, we import Matplotlib to create plots. We use its `boxplot()` command to
    create a box plot of all the heights in our population. You can see the results
    in [Figure 3-1](#figure3-1).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们导入了Matplotlib来创建图表。我们使用其`boxplot()`命令创建我们人群中所有身高的箱型图。你可以在[图3-1](#figure3-1)中看到结果。
- en: '![](image_fi/502888c03/f03001.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](image_fi/502888c03/f03001.png)'
- en: 'Figure 3-1: A box plot showing the distribution of heights of our Major League
    Baseball (MLB) population'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图3-1：展示我们职业棒球（MLB）人群身高分布的箱型图
- en: This box plot is similar to the box plots we looked at in Chapter 1. Remember
    that box plots show the range and distribution of data. Here, we can see that
    the minimum value of height in the data is around 67, and the maximum is around
    83\. The median (the horizontal line in the middle of the box) is around 74 inches.
    We can see that Matplotlib regards several of the points as outliers, and that’s
    why they’re drawn as circles beyond the range of the vertical lines extending
    from the top and bottom of the box. Box plots provide a simple way to explore
    our population and understand it better.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这个箱线图类似于我们在第一章中看到的箱线图。记住，箱线图展示了数据的范围和分布。在这里，我们可以看到数据中身高的最小值约为67，最大值约为83。中位数（位于箱子中间的水平线）约为74英寸。我们可以看到，Matplotlib将一些数据点视为离群值，这就是为什么它们被绘制成超出箱子上下垂直线范围的圆圈。箱线图提供了一种简单的方法来探索我们的群体并更好地理解它。
- en: Random Samples
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 随机样本
- en: In many common scenarios, we’re interested in studying a population, but we
    don’t have access to the full population, so we study a small part, or *sample*,
    instead. For example, medical researchers may want to create a drug that can cure
    a disease for all women over 50 years old. The researchers don’t have a way to
    contact all women in the world who are over 50, so instead they recruit a sample
    of that full population, maybe a few hundred people. They study the effect of
    their drug on this sample. They hope that their sample resembles the full population,
    so that if the drug works on the sample, it will also work on the full population.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多常见的情境中，我们有兴趣研究一个群体，但我们无法接触到整个群体，因此我们研究一个小部分或*样本*。例如，医学研究人员可能想开发一种能治愈50岁以上所有女性的疾病的药物。研究人员无法联系到全球所有50岁以上的女性，因此他们招募了这个整体人群的一个样本，也许是几百人。他们研究这种药物对这个样本的效果。他们希望他们的样本能代表整体人群，这样如果药物对样本有效，也能对整体人群有效。
- en: Recruiting a sample is something you should do carefully, to make sure the sample
    resembles the full population as much as possible. For example, if you recruit
    participants at an Olympic training facility, your sample will contain people
    who are healthier than average, so you may create a drug that works for extremely
    healthy people but not for the general population. If you recruit participants
    at a Polish community festival, you might create a drug that works for Eastern
    Europeans but not for others. The best way to collect a sample that resembles
    the full population is to take a random sample. By selecting randomly from a full
    population, you expect to have equal likelihood of selecting each different type
    of person.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 招募样本是你应该小心进行的，以确保样本尽可能地代表整体人群。例如，如果你在奥林匹克训练设施招募参与者，你的样本将包含比平均水平更健康的人群，因此你可能会开发出只对极其健康的人有效的药物，而对普通人群无效。如果你在波兰社区节庆活动上招募参与者，你可能会开发出只对东欧人有效的药物，而对其他人无效。收集一个类似于整体人群的样本的最佳方法是随机抽样。通过从整个群体中随机选择样本，你期望每种不同类型的人被选择的概率相等。
- en: 'Let’s look at samples of our baseball player population, which we can create
    in Python as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下我们棒球运动员群体的样本，我们可以在Python中这样创建：
- en: '[PRE4]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Here, we use the convenient pandas `sample()` method. This method randomly selects
    30 baseball players for both of our samples, `sample1` and `sample2`. Setting
    the `random_state` parameter is not necessary. But we set it here because it ensures
    that you’ll get the same results as we do when you run the same code.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们使用了方便的pandas `sample()`方法。这个方法会随机选择30名棒球运动员作为我们的两个样本，`sample1`和`sample2`。设置`random_state`参数并不是必要的，但我们在这里设置了它，因为它确保你运行相同的代码时，得到的结果与你看到的一致。
- en: You may wonder why we select 30 samples and not 20 or 40 or some other number.
    In fact, we could easily select any other number of samples by changing `n=30`
    to `n=20` or `n=40` or anything else we prefer. When we choose a large `n` for
    our random sample, we expect the sample to closely resemble the full population.
    But sometimes recruiting participants can be challenging, so we want to choose
    a small `n` to avoid the difficulty of recruiting. In the world of statistics,
    choosing *n* = 30 is a common convention; when we choose samples that have at
    least size 30, we feel reasonably confident that our samples are big enough to
    make our statistical calculations give us good results.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会想，为什么我们选择了30个样本，而不是20个、40个或其他数量。实际上，我们可以通过将`n=30`改为`n=20`、`n=40`或任何我们喜欢的其他数字，轻松地选择任何其他数量的样本。当我们为随机样本选择一个较大的`n`时，我们期望样本能够非常接近整个总体。但有时招募参与者可能会比较困难，因此我们希望选择一个较小的`n`来避免招募的难度。在统计学中，选择*n*
    = 30是一个常见的约定；当我们选择的样本大小至少为30时，我们可以合理地相信，样本足够大，可以使我们的统计计算给出良好的结果。
- en: 'Let’s also create a third sample, which we’ll define manually as follows:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以创建第三个样本，我们将手动定义它如下：
- en: '[PRE5]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: We know that `sample1` and `sample2` are random samples from our baseball player
    population, since we created them using `sample()`. But it’s not yet clear where
    the measurements in `sample3` came from. Later, you’ll learn how to use statistical
    tests to reason about whether `sample3` is likely to be a random sample from our
    population of baseball players, or whether it is more likely to be associated
    with a different population, like basketball players or another group. Keep thinking
    about `sample3`, because reasoning about where `sample3` came from (and in general,
    whether two given samples come from the same population) will be the central goal
    of this chapter.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道`sample1`和`sample2`是来自我们棒球选手总体的随机样本，因为它们是通过`sample()`生成的。但`sample3`中的数据来源尚不清楚。稍后，你将学习如何使用统计检验推理`sample3`是否可能是我们棒球选手总体的随机样本，或者它是否更可能与另一个总体相关，如篮球选手或其他群体。继续思考`sample3`，因为推理`sample3`的来源（以及一般来说，判断两个给定样本是否来自同一总体）将是本章的核心目标。
- en: 'Let’s look at a plot of these samples to see whether they resemble each other
    and the full population:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下这些样本的图表，看看它们是否彼此相似，并且与整个总体相似：
- en: '[PRE6]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Here, we use the same box plot code we used before, but instead of plotting
    only one dataset, we plot four datasets: the distribution of heights of the full
    population and the distribution of heights of all three samples separately. We
    can see the results in [Figure 3-2](#figure3-2).'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们使用之前用过的相同箱线图代码，但这次不是仅绘制一个数据集，而是绘制四个数据集：整个总体的身高分布，以及三个样本的身高分布。我们可以在[图3-2](#figure3-2)中看到结果。
- en: '![](image_fi/502888c03/f03002.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](image_fi/502888c03/f03002.png)'
- en: 'Figure 3-2: Box plots of our full MLB population (far left), two samples from
    the population (middle), and a mystery sample that may or may not be from our
    population (right)'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图3-2：我们完整的MLB总体（最左边）、两个来自总体的样本（中间）以及一个可能来自或不来自我们总体的神秘样本（右边）的箱线图
- en: 'We can see that none of these box plots are quite identical, but they definitely
    bear some resemblance to one another. We see some similar median values and 75th
    percentile values, as well as some similar maxima. The similarity in the first
    three box plots should match your intuition: when we take large enough random
    samples from a population, the samples should resemble the population and should
    resemble one another. We can also check simple summary statistics related to each
    sample, like the mean:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，这些箱线图没有完全相同，但它们之间确实有一些相似之处。我们看到一些相似的中位数值和75百分位数值，以及一些相似的最大值。前三个箱线图的相似性应该符合你的直觉：当我们从一个总体中抽取足够大的随机样本时，样本应该与总体相似，并且彼此相似。我们还可以检查与每个样本相关的简单汇总统计量，如均值：
- en: '[PRE7]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Here, we check the mean height in all our samples. The mean height for `sample1`
    is 73.8, while the mean height for `sample2` is 74.4, and the mean height for
    `sample3` is 75.4\. These means are relatively close to the mean height of the
    full population, 73.7\. In this context, the mean height of the full population
    has a special name; it’s called the population’s *expected value*. If we take
    a random sample from our population, we expect that the mean height of our sample
    will be about the same as the population’s expected value for height, 73.7\. At
    least two of our samples are random samples from the population, and we see that
    their means are indeed close to our expected value.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们检查了所有样本的平均身高。`sample1`的平均身高为73.8，`sample2`的平均身高为74.4，`sample3`的平均身高为75.4。这些均值与总体的平均身高73.7非常接近。在这个背景下，总体的平均身高有一个特殊的名称；它被称为总体的*期望值*。如果我们从总体中抽取一个随机样本，我们期望该样本的平均身高大致与总体的期望值73.7相同。至少有两个样本是来自总体的随机样本，我们可以看到它们的均值确实接近我们的期望值。
- en: When we look at the box plot of `sample3`, we can see that it doesn’t seem to
    resemble the other three box plots as much as they resemble each other. We may
    interpret this as evidence that it isn’t a random sample from our population of
    baseball players. On the other hand, it doesn’t look different enough from the
    population or other samples that we can be immediately certain that it isn’t a
    random sample from our population. We need to learn more before we can feel certain
    about whether `sample3` is a random draw from our population or whether it comes
    from some other population.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们查看`sample3`的箱形图时，我们可以看到它似乎不像其他三个箱形图那样相似。我们可以将其解释为它不是来自我们棒球运动员总体的随机样本。另一方面，它看起来并没有足够不同于总体或其他样本，以至于我们可以立刻确定它不是来自我们总体的随机样本。在我们能够确信`sample3`是来自我们总体的随机抽样，还是来自其他总体之前，我们需要更多的信息。
- en: 'So far, we’ve used vague and impressionistic language to talk about our samples:
    they *resemble* each other, and they have means that are *relatively close* or
    *about the same* as our expectations. If we want to make concrete, evidence-based
    decisions, we need to be more precise. In the next section, we’ll explore quantitative
    methods that statisticians have developed for reasoning about the differences
    between groups, including some easy-to-use tests that help us decide whether two
    groups come from the same population.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们使用了模糊和印象性的语言来描述我们的样本：它们*相似*，它们的均值*相对接近*或者*大致相同*于我们的期望。如果我们想要做出具体的、基于证据的决策，我们需要更加精确。在下一部分，我们将探讨统计学家为推理群体间差异所开发的定量方法，包括一些易于使用的测试，帮助我们决定两个群体是否来自相同的总体。
- en: Differences Between Sample Data
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 样本数据之间的差异
- en: 'We saw a difference of about 0.6 inches between `sample1` and `sample2` and
    a difference of more than 1.6 inches between `sample1` and `sample3`. Here’s the
    important question we would like to answer: Do we believe that `sample3` is a
    random sample from the same population as `sample1` and `sample2`? We need a method
    more reliable than intuition to say, for example, that a difference of 0.6 inches
    between sample means is plausible or probable, while a difference of 1.6 inches
    between sample means makes it implausible that the samples come from the same
    population. How big of a difference between sample means would make it implausible
    that two samples come from the same population?'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到`sample1`和`sample2`之间大约有0.6英寸的差异，而`sample1`和`sample3`之间的差异超过了1.6英寸。这里是我们想要回答的一个重要问题：我们是否相信`sample3`是来自与`sample1`和`sample2`相同总体的随机样本？我们需要一种比直觉更可靠的方法来判断，例如，样本均值之间0.6英寸的差异是合理或可能的，而样本均值之间1.6英寸的差异使得它们来自相同总体的可能性变得不太可信。样本均值之间的差异多大时，才会让我们认为这两个样本不可能来自同一总体？
- en: To answer this question, we need to understand the size differences we should
    expect between random samples from our population. So far, we’ve looked at only
    two random samples from our population. Instead of trying to generalize based
    on only two samples, let’s look at a large collection of samples and see how much
    they tend to differ from one another. This will help us understand which variations
    are plausible and which variations are implausible.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 要回答这个问题，我们需要理解我们期望从总体中随机抽取的样本之间的大小差异。到目前为止，我们只看了来自我们总体的两个随机样本。与其仅仅基于这两个样本进行概括，不如看一大批样本，看看它们之间的差异有多大。这将帮助我们理解哪些变化是合理的，哪些变化是不可接受的。
- en: 'Here’s some code to get a collection of 2,000 sample means and their differences:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是一些代码，用来获取 2,000 个样本均值及其差异：
- en: '[PRE8]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'In this snippet, we create the `alldifferences` variable as an empty list.
    Then we create a loop that goes through 1,000 iterations. In each iteration, we
    create two new samples and append the difference between their sample means to
    our `alldifferences` list. The final result is a completely filled-in `alldifferences`,
    a list of 1,000 differences between randomly selected samples. After running this
    snippet, you should see the following output:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个代码片段中，我们将 `alldifferences` 变量创建为空列表。然后我们创建一个循环，进行 1,000 次迭代。在每次迭代中，我们创建两个新的样本，并将它们的样本均值之差附加到
    `alldifferences` 列表中。最终结果是一个完全填充的 `alldifferences` 列表，其中包含 1,000 个随机选取样本之间的差异。在运行此代码片段后，您应该看到以下输出：
- en: '[PRE9]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You can see that the first two samples we checked have means that are about
    0.83 inches apart. The second pair of samples has means that are about 0.3 inches
    apart. The sixth pair of samples has means that are almost a full inch apart from
    each other (about –0.97 inches), while the fifth pair of samples has means that
    are nearly identical, only about 0.07 inches apart. Looking at these 10 numbers,
    we can see that 0.6 is not an implausible difference between two samples from
    our population, since several of our first 10 differences are greater in magnitude
    than 0.6\. However, none of the differences we’ve seen so far are greater than
    1 inch in magnitude, so 1.6 inches is starting to seem more implausible.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到我们检查的前两个样本的均值相差约 0.83 英寸。第二对样本的均值相差约 0.3 英寸。第六对样本的均值几乎相差一英寸（约 -0.97 英寸），而第五对样本的均值几乎相同，仅相差约
    0.07 英寸。通过查看这 10 个数字，我们可以看到，0.6 并不是我们总体中两个样本之间不合理的差异，因为我们前 10 个差异中有几个大于 0.6。然而，到目前为止，我们看到的差异都没有超过
    1 英寸，所以 1.6 英寸开始显得不太合理。
- en: 'We can see a fuller representation of our 1,000 differences by drawing a plot
    of the `alldifferences` list:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过绘制 `alldifferences` 列表来查看我们 1,000 个差异的完整表现：
- en: '[PRE10]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Here, we import the seaborn package because it can make beautiful plots. We
    use its `distplot()` method to plot the differences we find. You can see the results
    in [Figure 3-3](#figure3-3).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，我们导入 seaborn 包，因为它可以绘制美观的图表。我们使用它的 `distplot()` 方法来绘制我们找到的差异。你可以在[图 3-3](#figure3-3)中查看结果。
- en: '![](image_fi/502888c03/f03003.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](image_fi/502888c03/f03003.png)'
- en: 'Figure 3-3: A histogram showing the distribution of differences between mean
    heights of random samples, creating an approximate bell curve pattern'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-3：显示随机样本均值差异分布的直方图，形成一个大致的钟形曲线模式
- en: 'In this histogram, each bar represents a relative frequency; it represents
    how likely each observation is compared to other observations. There’s a high
    bar at the point marked 0 on the x-axis. This indicates a relatively high number
    of differences in our `alldifferences` list that are very close to 0\. A much
    lower bar appears at *x* = 1\. This indicates relatively few cases in which the
    difference between the sample means is about 1\. The full shape of the plot should
    make solid intuitive sense: it’s rare for our random samples to be very different
    from each other, because they’re samples from the same population and we expect
    their means to be roughly the same.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个直方图中，每个柱状条代表一个相对频率；它表示每个观察值相对于其他观察值的可能性。在 x 轴标记为 0 的位置有一个较高的柱状条。这表示我们的`alldifferences`列表中，接近
    0 的差异相对较多。在 *x* = 1 的位置出现了一个较低的柱状条。这表示样本均值之间差异接近 1 的情况相对较少。整个图形的形状应该是直观上可以理解的：我们的随机样本之间很少有很大的差异，因为它们来自同一个总体，我们期望它们的均值大致相同。
- en: The shape that the bars make in [Figure 3-3](#figure3-3) resembles a bell. You
    can see that we’ve drawn a line over the bars that shows this general bell shape.
    The curve that this plot approximates is called a *bell curve*. Approximate bell
    curves are found in many situations. One powerful theoretical result in statistics
    is called the *central limit theorem*, and it states that under a certain set
    of common conditions, differences between means of samples will be distributed
    in a shape that’s approximately a bell curve. The technical conditions that make
    this theorem true are that the random samples are independent and *identically
    distributed* (that is, random draws from the same population) and that the population
    has a finite expected value and a finite variance. The fact that we see approximate
    bell curves in so many domains provides evidence that these technical conditions
    are often met.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 3-3](#figure3-3) 中柱形图的形状类似于一个钟形曲线。你可以看到，我们在柱形图上绘制了一条线，显示了这个大致的钟形曲线。这个图形所近似的曲线被称为*钟形曲线*。在许多情况下，都可以找到近似的钟形曲线。统计学中有一个强大的理论结果叫做*中心极限定理*，它指出，在某些常见的条件下，样本均值之间的差异会呈现出一种大致为钟形曲线的分布。这一定理成立的技术条件是：随机样本彼此独立且*同分布*（即来自同一群体的随机抽样），且该群体具有有限的期望值和有限的方差。我们在许多领域看到近似的钟形曲线，表明这些技术条件在很多情况下得到了满足。'
- en: 'Once we know the shape and size of the bell curve in [Figure 3-3](#figure3-3),
    we can reason more accurately about difficult statistical questions. Let’s return
    to the question of `sample3`. Given what we know so far, do we believe that `sample3`
    is a random sample from our population of baseball players? We saw that the difference
    between the mean of `sample3` and the mean of `sample1` is about 1.6 inches. When
    we look at [Figure 3-3](#figure3-3), we can see that the bell curve is extremely
    low there, close to 0\. This means that random samples from our population only
    rarely differ by as much as 1.6 inches. This makes it seem relatively implausible
    that `sample3` is a random sample from our baseball player population. We can
    find out how implausible it is by checking exactly how many of our differences
    have magnitude greater than or equal to 1.6 inches:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们了解了[图 3-3](#figure3-3) 中钟形曲线的形状和大小，我们就可以更准确地推理出一些困难的统计问题。让我们回到 `sample3`
    的问题。基于我们目前所知道的，我们是否认为 `sample3` 是我们棒球选手群体中的一个随机样本？我们看到 `sample3` 的均值与 `sample1`
    的均值之间的差异大约是 1.6 英寸。当我们查看[图 3-3](#figure3-3)时，我们可以看到钟形曲线在那个位置非常低，接近 0。这意味着从我们群体中随机抽取的样本，均值差异达到
    1.6 英寸的情况是非常罕见的。这使得 `sample3` 是我们棒球选手群体中的随机样本的可能性看起来相对不太可信。我们可以通过检查有多少差异大于或等于
    1.6 英寸来了解它的不可信程度：
- en: '[PRE11]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: In this snippet, we create `largedifferences`, a list that contains all elements
    of `alldifferences` with magnitude greater than or equal to 1.6\. We then check
    the length of the `largedifferences` list. We find that the list has only eight
    elements, meaning random samples from our `mlb` population have means that differ
    by 1.6 or more only about 8 in 1,000 times, or 0.8 percent of the time. This value,
    0.8 percent or 0.008, is a calculated likelihood. We can think of it as our best
    estimate of the probability that the mean heights of two random samples from the
    `mlb` population differ by 1.6 inches or more. This probability is often called
    a *p-value*, where *p* is short for *probability*.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个代码片段中，我们创建了`largedifferences`，这是一个包含所有`alldifferences`中大于或等于 1.6 的元素的列表。然后我们检查`largedifferences`列表的长度。我们发现该列表仅包含八个元素，意味着从我们`mlb`群体中随机抽取的样本，均值差异达到
    1.6 或更多的情况大约只有每千次中 8 次，或 0.8% 的时间。这个值，0.8% 或 0.008，是一个计算得出的可能性。我们可以把它看作是我们估算的概率，即从
    `mlb` 群体中随机抽取的两个样本的均值差异大于或等于 1.6 英寸的概率。这个概率通常被称为*p值*，其中*p*是*概率*的缩写。
- en: 'If we assume that `sample3` is a random sample from our `mlb` population, we
    have to believe that this rare difference, something whose extremity occurs less
    than 1 percent of the time, has happened naturally. The low likelihood of this
    event may convince us to reject the idea that `sample3` comes from the same population
    as `sample1`. In other words, the low *p*-value causes us to reject the notion
    that these two groups come from the same population. The lower the *p*-value,
    the more confident we feel about rejecting the notion that the groups come from
    the same population, because low *p*-values require us to believe in more and
    more unlikely coincidences. By contrast, consider how common it is that differences
    between sample means from our population are 0.6 inches or more:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们假设 `sample3` 是来自我们 `mlb` 人群的随机样本，我们就必须相信这种罕见的差异，发生概率不到 1%，是自然发生的。这个事件发生的低概率可能让我们相信
    `sample3` 并不来自与 `sample1` 相同的人群。换句话说，低 *p*-值促使我们拒绝这两个群体来自同一人群的观点。*p*-值越低，我们就越有信心拒绝这两个群体来自同一人群的观点，因为低
    *p*-值要求我们相信越来越不可能发生的巧合。相反，考虑一下我们的人群中，样本均值差异达到 0.6 英寸或更多的情况有多常见：
- en: '[PRE12]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Here, we create `smalldifferences`, a list containing every element of `alldifferences`
    that has magnitude greater than or equal to 0.6 inches. We can see that differences
    of this magnitude occur about 31.4 percent of the time. In this case, we would
    say that our *p*-value is 0.314\. If `sample1` and `sample2` come from the same
    population, we would have to believe that this size of difference, which occurs
    about 31 percent of the time, occurred in our case. It’s not hard to believe that
    something with 31 percent probability occurred, so we conclude that the difference
    between `sample1` and `sample2` is plausible; we’re willing to accept that, though
    not identical, they’re random samples from the same population.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们创建了 `smalldifferences`，一个包含所有 `alldifferences` 中大于或等于 0.6 英寸的元素的列表。我们可以看到，这样大小的差异大约发生
    31.4% 的时间。在这种情况下，我们会说我们的 *p*-值是 0.314。如果 `sample1` 和 `sample2` 来自同一人群，我们就必须相信这种差异的大小，约
    31% 的概率会发生在我们的案例中。相信 31% 概率发生的事件并不难，所以我们得出结论，`sample1` 和 `sample2` 之间的差异是合理的；我们愿意接受它们虽然不完全相同，但它们是来自同一人群的随机样本。
- en: The *p*-values we’ve calculated here have led us to accept the notion that `sample1`
    and `sample2` come from the same population, and to reject the notion that `sample1`
    and `sample3` come from the same population. You can see how important the size
    of a *p*-value is in our efforts to compare groups.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里计算的 *p*-值使我们接受了 `sample1` 和 `sample2` 来自同一人群的观点，并拒绝了 `sample1` 和 `sample3`
    来自同一人群的观点。你可以看到，*p*-值的大小在我们比较群体时有多么重要。
- en: Performing Hypothesis Testing
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进行假设检验
- en: 'We’ve outlined all the ingredients needed for a method of statistical reasoning
    called *hypothesis testing*. We can formalize this method of reasoning in more
    scientific terms. We’re trying to determine whether `sample3` is a random sample
    from the same population as `sample1`. In scientific terms, we can say that we’re
    considering two separate hypotheses:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经概述了进行统计推理方法所需的所有要素，这种方法被称为 *假设检验*。我们可以用更科学的术语来形式化这种推理方法。我们正在尝试确定 `sample3`
    是否是来自与 `sample1` 相同人群的随机样本。从科学的角度讲，我们可以说我们在考虑两种不同的假设：
- en: Hypothesis 0 `sample1` and `sample3` are random samples from the same population.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 假设 0 `sample1` 和 `sample3` 是来自同一人群的随机样本。
- en: Hypothesis 1 `sample1` and `sample3` are not random samples from the same population.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 假设 1 `sample1` 和 `sample3` 不是来自同一人群的随机样本。
- en: 'In the common statistical parlance, we call Hypothesis 0 the *null hypothesis*,
    and we call Hypothesis 1 the *alternative hypothesis*. The null hypothesis asserts
    that both samples are randomly drawn from one population (our baseball player
    dataset), with just one mean and one standard deviation. The alternative hypothesis
    asserts that the samples are randomly drawn from two totally different populations,
    each with its own mean, its own standard deviation, and all of its own unique
    characteristics. The way we choose between these two hypotheses is by following
    the same reasoning we followed previously:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在常见的统计学术语中，我们将假设 0 称为 *零假设*，将假设 1 称为 *备择假设*。零假设断言这两个样本是从同一人群（我们的棒球运动员数据集）中随机抽取的，只有一个均值和一个标准差。备择假设则断言这两个样本是从两个完全不同的人群中随机抽取的，每个样本有自己的均值、标准差和所有独特特征。我们选择这两种假设之间的区别方式与我们之前遵循的推理方式相同：
- en: Assume that Hypothesis 0, the null hypothesis, is true.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设零假设（Hypothesis 0）为真。
- en: Find how likely we are to observe sample means that differ by as much as our
    observed sample means, assuming that Hypothesis 0 is true. The likelihood of this
    occurring is called the *p*-value.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设零假设为真，我们需要找到观察到的样本均值与假设的样本均值之间差异的可能性。这种可能性称为*p*-值。
- en: If the *p*-value is small enough, we reject Hypothesis 0, and we’re therefore
    willing to accept Hypothesis 1.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果*p*-值足够小，我们就拒绝零假设，并因此愿意接受假设1。
- en: 'Notice that step 3 is stated vaguely: it doesn’t specify how small the *p*-value
    should be to justify rejecting the null hypothesis. The reason for this vagueness
    is that there’s no mathematically dictated choice for how small the *p*-value
    needs to be. We can choose whatever level of smallness we think is appropriate
    to justify rejecting Hypothesis 0, based on our own judgment and intuitions. The
    *p*-value size that we believe justifies rejecting Hypothesis 0 is called the
    *significance level*.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，第3步表述得很模糊：它没有具体说明*p*-值需要小到什么程度才能证明拒绝零假设是合理的。这种模糊性是因为没有数学上的定量要求，决定*p*-值需要多小才能拒绝零假设。我们可以根据自己的判断和直觉选择一个合适的小值来证明拒绝零假设是合理的。我们认为可以用来拒绝零假设的*p*-值大小被称为*显著性水平*。
- en: The most common significance level used in empirical research is 5 percent,
    meaning that we consider the rejection of the null hypothesis justified if *p*
    < 0.05\. In the case of `sample1` and `sample3`, we can justify rejecting Hypothesis
    0 at a significance level as low as 1 percent, because we found *p* < 0.01\. When
    we find a *p*-value that’s less than our chosen significance level, we say that
    the difference between our groups is *statistically significant*. The recommended
    practice is to choose the significance level that we want to use before we do
    any calculations; that way, we avoid the temptation to choose a significance level
    that confirms whichever hypothesis we want to be confirmed.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 实证研究中最常用的显著性水平是5%，这意味着如果*p* < 0.05，我们认为拒绝零假设是有依据的。对于`sample1`和`sample3`，我们可以在显著性水平仅为1%的情况下拒绝零假设，因为我们发现*p*
    < 0.01。 当我们发现*p*-值小于我们选择的显著性水平时，我们称组间差异是*统计学显著的*。推荐的做法是在进行任何计算之前，先确定我们要使用的显著性水平；这样，我们可以避免选择一个能支持我们希望被确认的假设的显著性水平。
- en: The t-Test
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: t检验
- en: 'We don’t have to go through the whole process of calculating means, creating
    a histogram, and manually calculating *p*-values every time we want to do hypothesis
    testing. Statisticians have discovered succinct equations that define how likely
    two groups are to come from the same population. They’ve created a relatively
    simple test called a *t-test* that does the process of hypothesis testing quickly
    and painlessly, without requiring a `for` loop or a histogram. We can do a t-test
    to test our Hypothesis 0 and Hypothesis 1\. We’ll check whether `sample1` and
    `sample2` come from the same population as follows:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不必每次进行假设检验时都重新计算均值、绘制直方图，或者手动计算*p*-值。统计学家们发现了简洁的方程，定义了两组数据来自同一总体的可能性。他们创建了一种相对简单的检验方法，称为*t检验*，它能快速而轻松地完成假设检验过程，无需使用`for`循环或直方图。我们可以使用t检验来检验我们的零假设（Hypothesis
    0）和假设1。我们将按照以下方式检查`sample1`和`sample2`是否来自同一总体：
- en: '[PRE13]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Here, we import the `scipy.stats` module. The SciPy package that this module
    is a part of is a popular Python library that includes, among other things, many
    statistical tests that could be useful as you get more advanced in statistics
    and data science. After importing this module, we use its `ttest_ind` command
    to check for differences between our samples. Its output is the following:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们导入`scipy.stats`模块。这个模块属于SciPy包，SciPy是一个流行的Python库，包含了许多统计检验工具，在你深入学习统计学和数据科学时会非常有用。导入此模块后，我们使用其`ttest_ind`命令来检查样本之间的差异。它的输出如下：
- en: '[PRE14]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Here, the *p*-value is relatively high (about 0.283), certainly higher than
    a 0.05 significance threshold. (It differs a little from the 0.314 *p*-value we
    calculated earlier because that *p*-value calculation method was an approximate
    method, and this one is more mathematically exact.) This high *p*-value indicates
    that it is plausible that these are samples from the same population. This is
    not surprising because we know that they are from the same population (we created
    them ourselves). In this case, we decide not to reject our null hypothesis, and
    we accept (until any other evidence convinces us otherwise) that `sample1` and
    `sample2` come from the same population. You can also run `scipy.stats.ttest_ind(sample1['height'],sample3)`
    to compare `sample1` and `sample3`, and if you do, you’ll find a low *p*-value
    (less than 0.05), which justifies rejecting the null hypothesis that `sample1`
    and `sample3` come from the same population.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*p*-值相对较高（约为0.283），明显高于0.05的显著性阈值。（它与我们之前计算的0.314 *p*-值略有不同，因为之前的* p*-值计算方法是近似方法，而这一方法更为数学精确。）这个较高的*p*-值表明这些样本来自同一人群的可能性较大。这并不令人惊讶，因为我们知道它们来自同一人群（我们自己创建了这些样本）。在这种情况下，我们决定不拒绝原假设，并接受（直到有其他证据让我们改变看法）`sample1`和`sample2`来自同一人群。你也可以运行`scipy.stats.ttest_ind(sample1['height'],
    sample3)`来比较`sample1`和`sample3`，如果这样做，你会发现一个较低的*p*-值（小于0.05），这表明我们可以拒绝原假设，即`sample1`和`sample3`来自同一人群。
- en: 'Several types of t-tests exist, as well as other hypothesis tests besides the
    t-test. The `ttest_ind` command we’ve used so far has an `_ind` suffix to indicate
    that it’s meant to be used for independent samples. Here, *independent* means
    just what we would expect: no meaningful, consistent relationship exists between
    the individuals in one sample and the individuals in the other—the samples consist
    of different people who were randomly selected.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 存在几种类型的t检验，除了t检验，还有其他假设检验方法。我们目前使用的`ttest_ind`命令带有`_ind`后缀，表示它是用来处理独立样本的。在这里，*独立*意味着我们所期望的：一个样本中的个体与另一个样本中的个体之间没有有意义或一致的关系——这些样本由随机选择的不同人组成。
- en: If we have *related* rather than independent samples, we can use another command,
    `scipy.stats.ttest_rel`, which performs another type of t-test that is mathematically
    a little different from `ttest_ind`. The `ttest_rel` command would be appropriate
    when observations in different samples have a meaningful relationship to each
    other—for example, if they’re two different exam scores for the same student,
    or two different medical test results for the same patient.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们有*相关*样本而非独立样本，我们可以使用另一个命令`scipy.stats.ttest_rel`，它执行一种数学上与`ttest_ind`略有不同的t检验。当不同样本中的观测值之间有有意义的关系时，`ttest_rel`命令就适用——例如，如果它们是同一学生的两次考试成绩，或是同一患者的两项不同医疗测试结果。
- en: Another type of t-test, the *Welch’s t-test*, is designed for comparing samples
    when we don’t want to assume that the samples have equal variance. You can implement
    Welch’s t-test in Python by adding `equal_var=False` to the t-test command.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种t检验类型是*Welch的t检验*，它适用于我们不希望假设样本方差相等的情况。当我们不希望假设样本具有相同方差时，Welch的t检验是设计用来比较样本的。你可以通过在t检验命令中添加`equal_var=False`来实现Welch的t检验。
- en: 'The t-test is a *parametric test*, meaning that it relies on assumptions about
    the distribution of the data in our population. The t-test relies on several technical
    assumptions: first, that the groups being compared should have sample means that
    follow a bell curve; second, that the variances of the groups being compared should
    be identical (unless using Welch’s t-test); and third, that the two groups are
    independent of each other. If these assumptions are not met, the t-test is not
    completely accurate, though it’s rarely too far from the truth even if the assumptions
    are not met.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: t检验是一种*参数检验*，意味着它依赖于我们数据集分布的假设。t检验依赖于几个技术性假设：首先，被比较的组的样本均值应当遵循正态分布；其次，被比较组的方差应当相同（除非使用Welch的t检验）；第三，两个组之间应当是独立的。如果这些假设不成立，t检验就不完全准确，尽管即使假设不成立，结果也通常不会偏差太大。
- en: 'In some cases, we’d prefer to perform hypothesis testing with a test that didn’t
    make these strong assumptions that may not be true. If so, we can rely on a body
    of knowledge called *nonparametric statistics*, which provides tools for hypothesis
    testing and other statistical reasoning that make fewer assumptions about the
    distribution of our data (for example, we don’t need to work with populations
    whose sample means follow bell curves). One hypothesis test from nonparametric
    statistics is called the *Mann-Whitney U test* (or the *Wilcoxon rank-sum test*),
    and we can implement it easily in Python as follows:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，我们希望进行假设检验时使用一种不做这些强假设的检验，因为这些假设可能并不成立。如果是这样，我们可以依赖一种称为*非参数统计*的知识体系，它提供了进行假设检验和其他统计推理的工具，这些工具对我们数据分布的假设较少（例如，我们不需要处理那些样本均值呈钟形曲线分布的总体）。一种来自非参数统计的假设检验叫做*Mann-Whitney
    U 检验*（或*Wilcoxon 秩和检验*），我们可以通过以下 Python 代码轻松实现：
- en: '[PRE15]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: This test requires only one line, since the SciPy package includes an implementation
    of the Mann-Whitney U test. Just like the t-test, all we need to input is the
    data we’re comparing, and the code will output a *p*-value. If you want to have
    a deep understanding of the various kinds of hypothesis tests and exactly when
    to use them, you should read some advanced theoretical statistics textbooks. For
    now, the simple independent sample t-test we’ve used is quite robust and should
    work in most practical scenarios.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这个检验只需要一行代码，因为 SciPy 包含了 Mann-Whitney U 检验的实现。就像 t 检验一样，我们需要输入的是我们要比较的数据，代码会输出一个*p*-值。如果你想深入了解各种假设检验及其准确使用时机，你应该阅读一些高级的理论统计学教材。现在，我们使用的简单独立样本
    t 检验已经相当稳健，应该适用于大多数实际场景。
- en: Nuances of Hypothesis Testing
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 假设检验的细微差别
- en: Hypothesis testing using a null hypothesis and a t-test is common enough to
    be called *popular*, but it’s not as beloved as most popular things are. Students
    tend to dislike it because it’s not intuitive to most people, and it requires
    some tortured reasoning to understand. Teachers sometimes dislike it because their
    students dislike it and struggle to learn it. Many methodological researchers
    find it irritating because it’s so common at all levels for people to misunderstand
    and misinterpret t-tests, *p*-values, and hypothesis tests in general. The antipathy
    toward hypothesis testing has even led some respected scientific journals to ban
    it from their publications, although this has been rare.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 使用零假设和 t 检验进行假设检验足够常见，以至于被称为*流行*，但它并不像大多数流行事物那样受到喜爱。学生们往往不喜欢它，因为它对大多数人来说不直观，并且需要一些复杂的推理才能理解。教师们有时也不喜欢它，因为他们的学生不喜欢它并且在学习上遇到困难。许多方法学研究者感到恼火，因为在各个层次上，人们普遍误解和误用
    t 检验、*p*-值和假设检验。对假设检验的反感甚至导致一些受尊敬的科学期刊禁止发表相关内容，尽管这种情况较为罕见。
- en: Most of the negative feelings toward hypothesis testing are the result of misunderstanding.
    Researchers misunderstand some nuances of hypothesis testing and misuse it, and
    then mistakes in research result, which methodological sticklers resent. Since
    these misunderstandings are common even among professionals, it’s worthwhile to
    mention some of them here and try to explain nuances that will help you avoid
    some of these same mistakes.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数对假设检验的负面情绪源于误解。研究人员误解了假设检验的一些细微差别并滥用它，进而导致研究中的错误，这让方法学上的严格要求者感到不满。由于这些误解在专业人士中也很常见，因此值得在这里提到其中一些，并试图解释一些细微差别，帮助你避免这些相同的错误。
- en: 'One important point to remember is what a *p*-value tells you: it tells you
    the likelihood of observing data, after assuming a null hypothesis to be true.
    People often think or wish it told them the converse: the likelihood of a hypothesis’s
    truth, given some observed data. Always remember that a *p*-value should not be
    interpreted directly as a probability of a hypothesis being true. So, when we
    see that the *p*-value for comparing the heights of `sample1` and `sample3` is
    *p* = 0.008, we can’t say, “These samples have only a 0.8 percent probability
    of coming from the same population,” nor can we say, “The null hypothesis has
    a 0.8 percent probability of being true.” We can say only, “If the null hypothesis
    is true, something with 0.8 percent probability occurred.” This enables us to
    decide whether to reject the null hypothesis, but it doesn’t enable us to say
    exactly how likely either hypothesis is to be true.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: 'Another important nuance is the difference between accepting a hypothesis and
    failing to reject it. Hypothesis testing has only two possible outcomes: either
    we reject a null hypothesis, or we decide not to reject the null hypothesis. Failing
    to reject something is not quite the same as wholeheartedly accepting it, and
    just because a *p*-value is not below a significance threshold does not mean that
    two groups are certainly the same. Just because one t-test fails to lead to a
    rejection of the null hypothesis does not mean that the null hypothesis is certainly
    true.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: Similarly, just because one *p*-value seems to justify a rejection of a null
    hypothesis does not mean that the null hypothesis is certainly false. This is
    especially true when we have limited data; difficult, noisy measurements; or a
    reason to doubt our measurements. Hypothesis testing does not let us take uncertain
    data and have perfect certainty about hypotheses. Rather, it provides one piece
    of evidence that we have to understand properly and then weigh together with a
    great deal of other evidence.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: 'Another important concept to remember is the Anna Karenina principle. Leo Tolstoy
    wrote in *Anna Karenina* that “all happy families are alike; each unhappy family
    is unhappy in its own way.” Statistics has an analogous principle: all acceptances
    of the null hypothesis are alike, but each rejection of the null hypothesis happens
    for a different reason. The null hypothesis states that two samples are random
    draws from the same population. If we reject the null hypothesis, any one or more
    of a number of things could be true: our two samples could be random draws from
    different populations, or both could be samples from the same population but not
    randomly selected, or a source of sampling bias could be present, or blind luck
    might be occurring. Just because we are confident about rejecting the null hypothesis
    doesn’t mean we can be confident about which part of the null hypothesis is incorrect.
    As empirical researchers like to say, “Further research is needed.”'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: A final nuance to remember is the difference between *statistical significance*
    and *practical significance*. It’s possible for one sample of athletes to have
    mean height 73.11 and another sample of athletes to have mean height 73.12, and
    for these two means to have a statistically significant difference according to
    a t-test. We can justifiably conclude that these two groups are not random samples
    from the same population and treat them differently because of their different
    mean height. However, even if this difference of 0.01 inches is statistically
    significant, it’s not clear that this difference has practical significance. Members
    of these two groups should be able to wear the same clothes, sit on the same seats
    on airplanes, and reach the same high cupboards (on average). We have no reason
    to suppose that one group would be better than the other group at baseball in
    any practically important sense. In this case, we might wish to ignore the results
    of a t-test, since even though a statistically detectable difference exists, it’s
    not a difference that has any practical consequence. Practical significance is
    always an important thing to consider during the process of hypothesis testing.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 需要记住的一个细微差别是*统计显著性*和*实际显著性*之间的区别。一个运动员样本的平均身高可能是73.11，另一个运动员样本的平均身高可能是73.12，并且根据t检验，这两个平均值之间可能存在统计显著性差异。我们可以合理地得出结论，这两个群体不是来自同一总体的随机样本，并且由于它们的平均身高不同，我们应该以不同的方式对待它们。然而，即使这个0.01英寸的差异在统计上是显著的，是否具有实际显著性仍不明确。这两个群体的成员应该能够穿相同的衣服、坐在飞机的同样座位上，并且（平均而言）够得到同样高的橱柜。我们没有理由认为一个群体在棒球方面会比另一个群体更优秀，至少在任何实际重要的意义上是如此。在这种情况下，我们可能希望忽略t检验的结果，因为尽管存在统计上可检测到的差异，但这个差异并没有任何实际后果。在假设检验过程中，实际显著性始终是一个重要的考虑因素。
- en: Now that we’ve discussed hypothesis testing and its thorny theoretical nuances,
    let’s turn to a practical business example.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经讨论了假设检验及其棘手的理论细节，让我们转向一个实际的商业例子。
- en: Comparing Groups in a Practical Context
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在实际情境中比较不同的群体
- en: 'So far, this chapter has focused on statistical theory. But for data scientists,
    theoretical considerations always take place within a practical context. Let’s
    switch from our baseball example to a marketing example. Suppose you’re running
    a company that manufactures computers. To keep in touch with customers and increase
    sales, your company maintains email lists: interested customers can sign up for
    a topic they’re interested in and receive periodic emails from your company related
    to that topic. For now, you have only two email lists: the desktop list and the
    laptop list, designed for customers who are interested in your desktop computers
    and your laptop computers, respectively.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，本章主要集中在统计理论上。但对于数据科学家来说，理论性的考虑总是在实际情境中进行的。让我们从棒球的例子转到市场营销的例子。假设你正在运营一家制造计算机的公司。为了保持与客户的联系并增加销售额，你的公司维护着邮件列表：感兴趣的客户可以注册自己感兴趣的主题，并定期收到与你公司相关的邮件。目前，你只有两个邮件列表：桌面电脑列表和笔记本电脑列表，分别是为对桌面电脑和笔记本电脑感兴趣的客户设计的。
- en: 'Until now, desktops and laptops have been the only products your company makes.
    But soon you’ll be releasing a new set of products that have been in development
    for several years: top-of-the-line web servers. It’s a natural product line for
    your company, since you already manufacture computer hardware and already have
    many tech clients who need server infrastructure. But since this product line
    is new, almost no one knows about it. Your marketing team is planning to email
    the subscribers on your email lists to tell them about your great new products
    and hopefully get started on the right foot with high sales of the new servers.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，桌面电脑和笔记本电脑是你公司唯一的产品。但很快，你将推出一套已经开发了几年新产品：顶级的网络服务器。这是你公司自然的产品线，因为你已经制造计算机硬件，并且已有许多需要服务器基础设施的科技客户。但由于这个产品线是新的，几乎没有人知道它。你的营销团队计划通过邮件列表向订阅者发送邮件，告知他们这些新产品，并希望能够顺利启动并获得服务器产品的高销售额。
- en: 'The marketing team members want to make this email campaign as effective as
    possible. They have a discussion with you about the campaign strategy. They could
    design one email and send it to every person on both email lists, or they could
    design one email message for the desktop subscribers and a different email message
    for the laptop subscribers. The experts on your marketing team know a lot about
    targeting: for example, they know that the email messages that extroverts react
    to most positively are different from the email messages that introverts react
    to most positively. Other personal characteristics—including age, income, and
    culture—also have strong effects on responses to advertising.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: We need to know whether the desktop subscribers have different characteristics
    than the laptop subscribers. If the two groups are essentially the same, we can
    save the marketing team members some time and have them send the same email to
    everyone. If the two groups are significantly different in ways we understand,
    we can craft better messages that appeal to each group and improve sales numbers.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: 'We can start our investigation by reading in our data. We’ll read in two fabricated
    datasets (not based on real people or products, just created to illustrate the
    points in the chapter). You can download these two datasets from [https://bradfordtuckfield.com/desktop.csv](https://bradfordtuckfield.com/desktop.csv)
    and [https://bradfordtuckfield.com/laptop.csv](https://bradfordtuckfield.com/laptop.csv),
    and then read them into Python as follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'You can run `print(desktop.head())` and `print(laptop.head())` to see the first
    five rows of each dataset. You’ll notice that both datasets have four columns:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: '`userid` Contains a unique number identifying a particular user'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: '`spending` Contains a record of how much that user has spent at your company’s
    website'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
- en: '`age` Holds the user’s age, which you may have recorded during a separate survey'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '`visits` Holds the number of times the user has visited pages on your website'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: Our goal is to determine whether the users described in the `desktop` dataframe
    and the users described in the `laptop` dataframe differ significantly from each
    other. Let’s draw some plots and see whether any immediately apparent differences
    exist.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: 'We can start with a plot of the amounts that subscribers to each list have
    spent on our company’s products. We’ll create a box plot with the following code:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Here, we import Matplotlib to create plots. We use its `boxplot()` command with
    data from `desktop`’s spending column and `laptop`’s spending column. You can
    see the results in [Figure 3-4](#figure3-4).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: '![](image_fi/502888c03/f03004.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
- en: 'Figure 3-4: Box plots showing the spending levels of subscribers to the desktop
    email list (left) and subscribers of the laptop email list (right)'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: We can learn a few things by looking at these box plots. Both groups have minima
    at 0\. Laptop subscribers have a higher 25th percentile, 50th percentile, and
    75th percentile, as well as a high outlier that is higher than any observations
    in the desktop subscriber group. On the other hand, the distributions don’t seem
    terribly different either; desktop subscribers don’t seem totally different from
    laptop subscribers. We have groups that are different, but not too different.
    We should look more closely and see if some more precise quantitative metrics
    will help us judge how different they are.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
- en: 'Besides plotting, we can do simple calculations that get summary statistics
    for our data. In the following snippet, we’ll get some of these descriptive statistics:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'In this snippet, we check the mean age of desktop subscribers and laptop subscribers.
    The results reveal that the mean desktop subscriber is about 35.8 years old, and
    the mean laptop subscriber is about 38.7 years old. We can conclude that these
    groups are different, in the sense that they’re not identical. But it’s not clear
    whether the groups are different enough that we should tell our marketing group
    to create two separate emails instead of one. To make that judgment, we need to
    use our hypothesis-testing framework. We can specify our null hypothesis and alternative
    hypothesis as follows:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: Hypothesis 0 The two email lists are random samples from the same population.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: Hypothesis 1 The two email lists are not random samples from the same population.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
- en: Hypothesis 0, our null hypothesis, is describing a world in which there’s a
    population of people who are interested in computers, both laptops and desktops.
    People from this population sign up for your company’s email lists occasionally.
    But when they sign up for a list, they choose completely at random which of your
    two lists they sign up for. In this world, your lists have superficial differences,
    but they are truly two random samples from the same population and don’t differ
    in any essential ways that would warrant different treatment by your company.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: Hypothesis 1, the alternative hypothesis, describes a world in which the null
    hypothesis is not true. This would mean that your subscribers’ membership on different
    email lists is the result at least partially of underlying differences in people
    who like desktops and people who like laptops. If Hypothesis 0 is true, it would
    be reasonable to send the same marketing email to both groups. If Hypothesis 1
    is true, sending different marketing emails to each group makes more sense. A
    business decision now depends on the result of a statistical test.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s run our t-test and see whether our two subscriber groups actually differ
    from each other. First, we should specify a significance level. Let’s use the
    5 percent significance level that’s common in research. We can run our t-test
    with only one line of code:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: When you look at the results from our t-test, you can see that our *p*-value
    is about 0.04\. Since we use the common 5 percent significance level, this *p*-value
    is low enough for us to conclude that the desktop and laptop groups are not random
    draws from the same population, so we can reject the null hypothesis. It appears
    that desktop and laptop email subscribers are at least slightly different in a
    detectable way.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: 'After finding these differences, we can talk to our company’s marketing team
    and collectively make a decision about whether to design different email campaigns
    for the different groups. Suppose that the team decides to do so. We can feel
    proud of ourselves that our statistical analysis has led to a practical decision
    that we feel is justified. We didn’t only analyze data; we used the data to make
    a decision. This is common in data science: we use our data analysis for data-driven
    decision-making to improve business outcomes.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: 'But what next? We have come so far in this chapter only to make one decision:
    a yes/no decision to send different emails to both of our subscriber lists. The
    next set of questions we need to ask is about how our emails to each group should
    differ: What should their content be, how should we design them, and how will
    we know whether we’re doing it right? In the next chapter, we’ll talk about A/B
    testing, a powerful framework for answering these difficult questions.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this chapter, we talked about populations and samples, as well as how samples
    that come from the same population should resemble each other. We introduced hypothesis
    testing, including the t-test, an easy, useful tool for detecting whether two
    groups are likely to be random draws from the same population. We discussed some
    business scenarios where the t-test would be useful, including a marketing scenario
    and a decision about whether to send different emails to different email lists.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: The next chapter will build on the tools we introduced here. Instead of just
    comparing groups, we’ll discuss how to run experiments and then use group comparison
    tools to check for the differences between our experimental treatments.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
