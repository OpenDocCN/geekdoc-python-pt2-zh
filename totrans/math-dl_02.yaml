- en: '**2'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**2'
- en: PROBABILITY**
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概率**
- en: '![image](Images/common.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/common.jpg)'
- en: Probability affects every aspect of our lives, but in reality, we’re all pretty
    bad at it, as some of the examples in this chapter demonstrate. We need to study
    probability to get it right. And we need to get it right because deep learning
    deals extensively with ideas from probability theory. Probability appears everywhere,
    from the outputs of neural networks to how often different classes appear in the
    wild to the distributions used to initialize deep networks.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 概率影响着我们生活的方方面面，但实际上，我们在这方面都做得不好，正如本章中的一些例子所展示的那样。我们需要学习概率学才能掌握它。而我们需要掌握它，因为深度学习广泛涉及概率论的概念。概率无处不在，从神经网络的输出到不同类别在现实中出现的频率，再到用于初始化深度网络的分布。
- en: This chapter aims to expose you to the sorts of probability-related ideas and
    terms you’ll frequently encounter in deep learning. We’ll start with basic ideas
    about probability and introduce the notion of a random variable. We’ll then jump
    to the rules of probability. These sections cover the basics that will put us
    in a position to talk about *joint and marginal probabilities*. You’ll encounter
    those terms over and over again as you explore deep learning. Once you understand
    how to use joint and marginal probabilities, I’ll explain the first of the two
    chain rules discussed in this book. The second is in [Chapter 6](ch06.xhtml#ch06)
    on differential calculus. We’ll continue our study of probability in [Chapter
    3](ch03.xhtml#ch03).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的目标是让你了解在深度学习中你会经常遇到的与概率相关的概念和术语。我们将从概率的基本概念开始，并介绍随机变量的概念。接着我们将讨论概率的基本规则。这些部分涵盖了基础知识，为我们后续讨论*联合概率与边际概率*奠定基础。在你深入探索深度学习时，你会一遍又一遍地遇到这些术语。一旦你掌握了如何使用联合概率和边际概率，我将介绍本书中讨论的两个链式法则中的第一个。第二个在[第六章](ch06.xhtml#ch06)的微积分部分中讨论。我们将在[第三章](ch03.xhtml#ch03)继续研究概率。
- en: Basic Concepts
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 基本概念
- en: A *probability* is a number between zero and one that measures how likely something
    is to happen. If there’s no chance the something will happen, its probability
    is zero. If it’s absolutely certain that it will happen, its probability is one.
    We’ll usually express probabilities this way, though in everyday use, people seem
    to dislike saying things like, “The chance of rain tomorrow is 0.25.” Instead,
    we say, “The chance of rain tomorrow is 25 percent.” In everyday speech, we convert
    the fractional probability to a percentage. We’ll do the same in this chapter.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 一个*概率*是一个介于零和一之间的数字，用来衡量某件事发生的可能性。如果某件事不可能发生，那么它的概率就是零。如果某件事肯定会发生，那么它的概率就是一。我们通常以这种方式表达概率，尽管在日常生活中，人们似乎不喜欢说“明天下雨的概率是0.25”。相反，我们会说“明天下雨的几率是25%”。在日常口语中，我们将分数概率转换为百分比。在本章中我们也会这样做。
- en: 'The previous paragraph used multiple words associated with probability: *likely*,
    *chance*, and *certainty*. This is fine in casual use, and even somewhat in deep
    learning, but when we need to be explicit, we’ll stick with *probability* and
    express it numerically in the range zero to one, [0, 1]. The square brackets mean
    the upper and lower limit are included. If the limit isn’t included in the range,
    a normal parenthesis is used. For example, the NumPy function `np.random.random()`
    returns a pseudorandom floating-point number in the range [0, 1). So, it might
    return exactly zero, but it will never return exactly one.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 上一段使用了多个与概率相关的词汇：*可能性*、*机会*和*确定性*。在日常使用中这样表达是可以的，甚至在深度学习中也是如此，但当我们需要明确时，我们将坚持使用*概率*，并将其以零到一之间的数字表示，范围为[0,
    1]。方括号表示上下限都包括在内。如果范围内不包括某个限值，则使用普通括号。例如，NumPy函数`np.random.random()`返回一个伪随机的浮点数，范围是[0,
    1)。因此，它可能返回零，但永远不会返回一。
- en: Next, I’ll introduce the foundational concepts of sample space, events, and
    random variables. I’ll close with some examples of how humans are bad at probability.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我将介绍样本空间、事件和随机变量的基础概念。最后，我会给出一些关于人类如何在概率上犯错的例子。
- en: Sample Space and Events
  id: totrans-9
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 样本空间和事件
- en: Put succinctly, a *sample space* is a discrete set or continuous range that
    represents all the possible outcomes of an event. An *event* is something that
    happens. Usually, it’s the outcome of some physical process, like the flipping
    of a coin or the roll of a die. All the possible events we’ve grouped together
    are the sample space we’re working with. Each event is a *sample* from the sample
    space, and the sample space represents *all* the possible events. Let’s look at
    a few examples.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 简单来说，*样本空间* 是一个离散集合或连续范围，表示一个事件的所有可能结果。*事件* 是发生的事情，通常是某个物理过程的结果，比如硬币的翻转或骰子的掷出。我们将所有可能的事件归纳在一起，形成我们正在处理的样本空间。每个事件都是样本空间中的一个*样本*，而样本空间则代表*所有*可能的事件。让我们来看几个例子。
- en: The possible outcomes of a coin flip are heads (H) or tails (T); thus, the sample
    space for a coin flip is the set {H, T}. The sample space for the roll of a standard
    die is the set {1, 2, 3, 4, 5, 6} because, discounting the die perching itself
    on its edge, one of the six faces of the cube will be on top when the die stops
    moving. These are examples of discrete sample spaces. In deep learning, most sample
    spaces are continuous and they consist of floating-point numbers, not integers
    or elements of a set. For example, if a feature input to a neural network can
    take on any value in the range [0, 1], then [0, 1] is the sample space for that
    feature.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 硬币翻转的可能结果是正面（H）或反面（T）；因此，硬币翻转的样本空间是集合 {H, T}。标准骰子掷出的样本空间是集合 {1, 2, 3, 4, 5,
    6}，因为排除骰子在其边缘停留的情况，当骰子停止移动时，六个面中的一个会在顶部。这些是离散样本空间的例子。在深度学习中，大多数样本空间是连续的，它们由浮点数组成，而不是整数或集合的元素。例如，如果神经网络的某个特征输入可以取值于区间
    [0, 1]，那么 [0, 1] 就是该特征的样本空间。
- en: We can ask about the likelihood of certain events happening. For a coin, we
    can ask, what’s the likelihood the coin will land heads up when flipped? Intuitively,
    assuming the coin isn’t weighted so that one side is more likely to show up than
    the other, we say the likelihood of heads is 50 percent. The probability of getting
    heads is then 0.5 (50 percent as a percentage). We see that the probability of
    getting tails is also 0.5\. Finally, since heads and tails are the only possible
    outcomes, we see that the sum of the probabilities over all possible results is
    0.5 + 0.5 = 1.0\. Probabilities *always* sum to 1.0 over all possible values of
    the sample space.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以询问某些事件发生的可能性。例如，对于一个硬币，我们可以问，硬币翻转后正面朝上的概率是多少？直观地讲，假设硬币没有偏重，也就是说两面出现的可能性相等，我们可以说正面朝上的概率是50%。那么正面朝上的概率就是0.5（以百分比表示为50%）。我们可以看到，反面朝上的概率也是0.5。最后，由于正面和反面是唯一的可能结果，我们发现所有可能结果的概率和为0.5
    + 0.5 = 1.0。概率*总是*加起来等于1.0，覆盖所有可能的样本空间值。
- en: What’s the probability of rolling a four with a six-sided die? Again, there
    is no reason to favor one face over another, and only one of the six faces has
    four dots, so the probability is one out of six, 1/6 ≈ 0.166666 . . . or about
    17 percent.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，掷一个六面骰子得到四点的概率是多少呢？同样的，掷骰子的每一面没有偏重，只有六个面中的一个面有四个点，所以概率是六分之一，1/6 ≈ 0.166666...
    或大约17%。
- en: Random Variables
  id: totrans-14
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 随机变量
- en: Let’s denote the outcome of a coin flip by a variable, *X*. *X* is what’s called
    a *random variable*, a variable that takes on values from its sample space with
    a certain probability. Because here the sample space is discrete, *X* is a *discrete
    random variable*, which we denote with an uppercase letter. For the coin, the
    probability of *X* being heads equals the probability of *X* being tails, both
    0.5\. To write this formally, we use
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用一个变量*X*表示硬币翻转的结果。*X* 是所谓的*随机变量*，一个从其样本空间中取值并具有一定概率的变量。因为这里的样本空间是离散的，*X*
    是一个*离散随机变量*，我们用大写字母表示。对于硬币，*X* 为正面的概率等于 *X* 为反面的概率，都是0.5。为了正式地表达这个，我们使用：
- en: '*P*(*X* = heads) = *P*(*X* = tails) = 0.5'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '*P*(*X* = 正面) = *P*(*X* = 反面) = 0.5'
- en: 'where *P* is universally used to indicate the probability of the event in parentheses
    for the specified random variable. A *continuous random variable* is a random
    variable from a continuous sample space, denoted with a lowercase letter, like
    *x*. We usually talk about the probability of the random variable being in some
    range of the sample space, not a particular real number. For example, if we use
    the NumPy `random` function to return a value in [0, 1), we can ask: What’s the
    probability that it will return a value in the range [0, 0.25)? Since any number
    is as likely to be returned as any other, we say that the probability of being
    in that range is 0.25 or 25 percent.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 其中*P*是普遍用于表示括号内指定随机变量事件的概率。*连续随机变量*是指来自连续样本空间的随机变量，通常用小写字母表示，比如*x*。我们通常讨论的是随机变量位于样本空间某个范围内的概率，而不是一个特定的实数。例如，如果我们使用NumPy的`random`函数返回一个[0,
    1)范围内的值，我们可以问：它返回值落在[0, 0.25)范围内的概率是多少？由于任何数字的返回概率和其他数字一样，我们可以说，落在该范围内的概率是0.25，或者25％。
- en: Humans Are Bad at Probability
  id: totrans-18
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 人类在概率上很差
- en: We’ll dive into the math of probability in the next section. But before then,
    let’s look at two examples involving probability that show how bad humans can
    be at it. Both of these examples have stumped experts, not because the experts
    are somehow lacking, but because our intuitions about probability are often entirely
    incorrect, and even experts are thoroughly human.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一节深入探讨概率的数学。但在此之前，让我们先看看两个涉及概率的例子，看看人类在这方面有多糟糕。这两个例子都曾让专家们感到困惑，这并不是因为专家们缺乏能力，而是因为我们对概率的直觉常常是完全错误的，甚至专家们也是彻底的人类。
- en: The Monty Hall Dilemma
  id: totrans-20
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 蒙提·霍尔难题
- en: This problem is a particular favorite of mine, as it confuses even mathematicians
    with advanced degrees. The dilemma is taken from an old American game show called
    *Let’s Make a Deal*. The original host of the show, Monty Hall, would select a
    member of the audience and show that person three large closed doors labeled 1,
    2, and 3\. Behind one of the doors was a new car. Behind the remaining two doors
    were joke prizes, such as a live goat.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这个问题是我特别喜欢的一个，因为它甚至让拥有高级学位的数学家感到困惑。这个难题来源于一个美国的老牌游戏节目《*让我们来交易*》。节目的原主持人蒙提·霍尔会从观众中选出一个人，展示三扇标有1、2和3的封闭大门。其中一扇门后面藏着一辆新车，另外两扇门后面则是一些搞笑奖品，比如一只活山羊。
- en: 'The contestant was asked to pick a door. Then, Hall would ask that one of the
    doors the contestant *didn’t* pick be opened, naturally one that didn’t have a
    car behind it. After the audience stopped laughing at whatever joke prize was
    behind that door, Hall would ask the contestant if they wanted to keep the originally
    selected door, or if they would rather change their selection to the remaining
    door. The dilemma is simply that: do they keep their original guess, or do they
    switch to the remaining door?'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 参赛者被要求选择一扇门。然后，霍尔会要求打开参赛者没有选择的其中一扇门，通常是那扇没有新车的门。当观众停止笑声后，霍尔会问参赛者是否愿意坚持原先选择的门，还是更愿意将选择换成剩下的那扇门。这个难题其实就是：他们是保留最初的选择，还是换到剩下的门？
- en: If you want to think about it for a while, please do. Put the book down, walk
    around, get out a pencil and some paper, make notes, then, when you have a solution
    (or give up), read on. . . .
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想思考一下这个问题，尽管去做。放下书本，走一走，拿出铅笔和纸，做些笔记，然后，当你有了答案（或放弃了），继续往下读……
- en: 'Here’s the right answer: change doors. If you do, you’ll win the car 2/3 of
    the time. If you don’t, you’ll only win the car 1/3 of the time, as that’s the
    probability of selecting the correct door initially: one correct choice out of
    three.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是正确答案：换门。如果你换，你将在2/3的情况下赢得汽车。如果你不换，你只有1/3的机会赢得汽车，因为最初选择正确的概率就是1/3：从三个选项中选一个正确的。
- en: When Marilyn vos Savant presented this problem in her *Parade* magazine column
    in 1990 and stated that the correct solution is to change doors, she was flooded
    with letters, many from mathematicians, some angry, insisting she was wrong. She
    wasn’t. One way to see that she was right is to use a computer program to simulate
    the game. We won’t develop the code for one here, but it isn’t too hard. If you
    write one and run it, you’ll see the probability of winning when changing doors
    converges on 2/3 as the number of simulated games increases. However, we can also
    use common sense and basic ideas about probability to see the solution.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 当玛丽莲·沃斯·萨凡特在1990年于《*Parade*》杂志专栏中提出这个问题并指出正确的解答是换门时，她收到了大量的来信，很多来自数学家，其中一些愤怒地坚持认为她错了。她并没有错。验证她正确的一种方法是使用计算机程序来模拟这个游戏。我们这里不开发代码，但并不难。如果你编写并运行它，你会看到随着模拟游戏次数的增加，换门时赢的概率趋近于2/3。然而，我们也可以通过常识和基本的概率理论来理解解决方案。
- en: First, if we don’t change doors, we know we have a 1/3 probability of winning
    the car. Now, consider what can happen when we change doors. If we change doors,
    the only way we can *lose* is if we happened to select the correct door in the
    first place. Why? Suppose we initially chose one of the joke prize doors instead.
    Hall, who knows full well which door the car is behind, will never open the door
    with the car. Since we selected one of the joke doors already, he’s forced to
    choose the remaining joke door and open it for us, thereby ensuring the car is
    behind the only remaining door. If we switch doors, we win. Since there are two
    doors without the car, our chance of selecting the wrong door initially is 2/3\.
    However, we just saw that if we choose the wrong door initially and switch when
    given the opportunity, we’ll win the car. Therefore, we have a 2/3 chance of winning
    the car by changing our guess. The 1/3 probability of losing by changing our initial
    guess is, of course, the case where we initially selected the correct door.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，如果我们不换门，我们知道赢得汽车的概率是1/3。现在，考虑一下换门时会发生什么。如果我们换门，唯一可能*失败*的情况是我们最初选择了正确的门。为什么？假设我们最初选择了一个假奖门。霍尔知道车在哪个门后，他永远不会打开有车的门。由于我们已经选择了一个假门，他被迫选择剩下的假门并为我们打开，这样就能确保车在唯一剩下的门后面。如果我们换门，我们就能赢。因为有两个门没有车，所以我们最初选错门的机会是2/3。然后我们刚刚看到，如果我们最初选择错门并在有机会时换门，我们就会赢得汽车。因此，通过改变我们的猜测，我们有2/3的机会赢得汽车。换门失败的1/3概率，当然是指我们最初选择了正确的门的情况。
- en: Cancer or Not?
  id: totrans-27
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 癌症还是非癌症？
- en: This example is found in several popular books about probability and statistics
    (for instance, *More Damned Lies and Statistics*, by Joel Best [UC Press, 2004],
    and *The Drunkard’s Walk*, by Leonard Mlodinow [Pantheon, 2008]). It’s based on
    an actual study. The task is to determine the probability that a woman in her
    40s has breast cancer if she has a positive mammogram. Note that the numbers that
    follow might have been accurate when the study was conducted, but they may not
    be valid now. Please consider them only as an example.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子出现在几本关于概率和统计的流行书籍中（例如，乔尔·贝斯特的《更多可恶的谎言与统计数据》（*More Damned Lies and Statistics*，UC
    Press，2004年）和伦纳德·莫洛迪诺的《醉汉的步伐》（*The Drunkard’s Walk*，Pantheon，2008年））。它基于一项实际的研究。任务是确定一位40多岁的女性在做了阳性乳腺X光检查后，她患有乳腺癌的概率。请注意，以下的数字可能在研究进行时是准确的，但现在可能不再有效，请仅将其视为一个示例。
- en: 'We are told the following:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们被告知以下内容：
- en: The probability that a randomly selected woman in her 40s has breast cancer
    is 0.8 percent (8 out of 1,000).
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位40多岁女性患有乳腺癌的概率是0.8%（每1,000人中有8人）。
- en: The probability that a woman with breast cancer will have a positive mammogram
    is 90 percent.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位患有乳腺癌的女性在做乳腺X光检查时，出现阳性结果的概率是90%。
- en: The probability that a woman *without* breast cancer will have a positive mammogram
    is 7 percent.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位*没有*乳腺癌的女性在做乳腺X光检查时，出现阳性结果的概率是7%。
- en: A woman comes to the clinic and is screened. The mammogram is positive. What’s
    the probability, based on what we’ve been told, that she actually has breast cancer?
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一位女性来到诊所进行筛查，乳腺X光结果为阳性。根据我们得到的信息，她实际上患有乳腺癌的概率是多少？
- en: 'From #1 above, we know that if we select 1,000 women in their 40s at random,
    8 of them will have breast cancer (on average). Therefore, of those 8, 90 percent
    of them (#2 above) will have a positive mammogram. This means 7 women with cancer
    will have a positive mammogram because 8 × 0.9 = 7.2\. This leaves 992 of the
    original 1,000 who don’t have breast cancer. From #3 above, 992 × 0.07 = 69.4,
    so 69 women without breast cancer will also have a positive mammogram, giving
    a total of 7 + 69 = 76 positive mammograms, of which 7 are actual cancer and 69
    are false-positive results. Therefore, the probability that a positive mammogram
    indicates cancer is 7 out of 76 or 7/76 = 0.092—about 9 percent.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 根据上述#1，我们知道如果我们随机选择1,000位40多岁的女性，其中平均会有8位患乳腺癌。因此，在这8位女性中，90%（即上述#2）会有阳性乳腺X光检查结果。这意味着7位患癌症的女性会有阳性乳腺X光检查结果，因为8
    × 0.9 = 7.2。剩下的1,000位中没有乳腺癌的女性有992位。根据上述#3，992 × 0.07 = 69.4，因此69位没有乳腺癌的女性也会有阳性乳腺X光检查结果，总共有7
    + 69 = 76个阳性乳腺X光检查结果，其中7个是实际的癌症病例，69个是假阳性结果。因此，阳性乳腺X光检查结果表示癌症的概率为7/76，即0.092——大约9%。
- en: The median estimate that doctors presented with this problem gave was a probability
    of cancer of around 70 percent, with over one-third giving an estimate of 90 percent.
    Probabilities are hard for humans, even for those with a lot of training. The
    doctors’ mistake wasn’t properly accounting for the probability of a randomly
    selected woman in her 40s having breast cancer. We’ll see in [Chapter 3](ch03.xhtml#ch03)
    how to calculate this result using Bayes’ theorem, which does take this probability
    into account.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 医生在面对这个问题时给出的中位数估计是癌症的概率大约为70%，其中超过三分之一的人给出了90%的估计。对人类而言，概率是难以掌握的，尤其是对于那些有大量训练的人。医生的错误在于没有正确考虑到随机选择一位40多岁的女性患乳腺癌的概率。在[第三章](ch03.xhtml#ch03)中，我们将看到如何使用贝叶斯定理计算这一结果，贝叶斯定理考虑了这个概率。
- en: For now, let’s switch from intuition to mathematical formality.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们从直觉转向数学的严谨性。
- en: The Rules of Probability
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 概率规则
- en: Let’s get started with the basic rules of probability. These are foundational
    rules that we’ll need for the remainder of the chapter and beyond. We’ll learn
    about the probability of events, the sum rule for probabilities, and what we mean
    by a conditional probability. After that, the product rule will let us tackle
    the birthday paradox. In the birthday paradox, we’ll see how to calculate the
    minimum number of people to have together in a room such that the probability
    of at least two of them sharing a birthday exceeds 50 percent. The answer is fewer
    than you might think.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从概率的基本规则开始。这些是我们在接下来的章节中以及更远的章节中需要用到的基础规则。我们将学习事件的概率、概率的和规则，以及条件概率的含义。之后，乘积规则将帮助我们解决生日悖论。在生日悖论中，我们将看到如何计算在一个房间里，至少有两个人共享生日的概率超过50%的最小人数。答案比你想象的要少。
- en: Probability of an Event
  id: totrans-39
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 事件的概率
- en: We mentioned earlier that the sum of all the probabilities for a sample space
    is one. This means that the chance of any event from the sample space is always
    less than or equal to one, since the event came from the sample space, and the
    sample space encompasses all possible events. This implies, for any event *A*,
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们之前提到过，样本空间中所有概率的总和为1。这意味着样本空间中的任何事件的概率始终小于或等于1，因为该事件来自样本空间，而样本空间包含所有可能的事件。这意味着，对于任何事件*A*，
- en: '![image](Images/02equ01.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ01.jpg)'
- en: and, for all events *A[i]* in the sample space,
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 并且，对于样本空间中的所有事件*A[i]*，
- en: '![image](Images/02equ02.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ02.jpg)'
- en: where ∑ (sigma) means to sum over the expression on the right for each of the
    *i*’s. Think of a `for` loop in Python with the expression on the right as the
    body of the loop.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 其中∑（sigma）表示对右边表达式中的每个*i*进行求和。可以将右边的表达式视为Python中`for`循环的循环体。
- en: 'If we roll a six-sided die, we intuitively (and correctly) understand that
    the probability of getting any value is the same: one out of six possibilities,
    or 1/6\. Therefore, [Equation 2.1](ch02.xhtml#ch02equ01) tells us that *P*(1),
    the probability of rolling a one, is between zero and one. This is true since
    ![image](Images/022equ01.jpg). Furthermore, [Equation 2.2](ch02.xhtml#ch02equ02)
    tells us that the sum of the probabilities of all events in the sample space must
    be one. This is also true for the six-sided die, since ![image](Images/022equ02.jpg)
    and ![image](Images/022equ03.jpg).'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们掷一个六面骰子，我们直观上（并且正确地）理解到得到任意值的概率是相同的：六种可能中的一种，或者1/6。因此，[方程2.1](ch02.xhtml#ch02equ01)告诉我们，*P*(1)，掷出1的概率在0和1之间。这是因为![image](Images/022equ01.jpg)。此外，[方程2.2](ch02.xhtml#ch02equ02)告诉我们，样本空间中所有事件的概率之和必须是1。这对于六面骰子同样成立，因为![image](Images/022equ02.jpg)和![image](Images/022equ03.jpg)。
- en: If the probability of an event happening is *P(A)*, then the probability that
    event *A does not* happen is
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 如果事件发生的概率是*P(A)*，那么事件*A不发生*的概率是
- en: '![image](Images/02equ03.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ03.jpg)'
- en: with ![image](Images/022equ04.jpg) read as “not *A*.” ![image](Images/022equ04.jpg)
    is known as the *complement* of *A*. You’ll sometimes see ![image](Images/022equ04.jpg)
    written as *P*(¬*A*) using ¬, the logical symbol for “not.”
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 其中![image](Images/022equ04.jpg)表示“不是*A*”。![image](Images/022equ04.jpg)被称为*A*的*补集*。有时你会看到![image](Images/022equ04.jpg)写作*P*(¬*A*)，其中¬是“非”运算符的逻辑符号。
- en: '[Equation 2.3](ch02.xhtml#ch02equ03) comes from [Equation 2.1](ch02.xhtml#ch02equ01)
    and [Equation 2.2](ch02.xhtml#ch02equ02) because the probability of an event is
    less than one and the probability of any event from the sample space happening
    is one, so the probability of events that aren’t *A* happening must be one minus
    the probability of event *A* happening.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '[方程2.3](ch02.xhtml#ch02equ03)来自[方程2.1](ch02.xhtml#ch02equ01)和[方程2.2](ch02.xhtml#ch02equ02)，因为事件的概率小于1，而样本空间中任何事件的发生概率是1，所以非*A*事件发生的概率必须是1减去事件*A*发生的概率。'
- en: For example, when rolling a die, the probability of getting a value in [1, 6]
    is one, but the probability of getting a four is 1/6\. So, the chance of *not*
    rolling a four is all the probability that remains when the chance of rolling
    a four is removed,
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在掷骰子时，得到[1, 6]范围内的任何值的概率是1，但得到四点的概率是1/6。所以，*不*掷出四点的概率就是去掉掷出四点的概率后剩下的概率。
- en: '![image](Images/022equ05.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/022equ05.jpg)'
- en: meaning we have an 83 percent chance of not rolling a four.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着我们有83%的概率不会掷出四点。
- en: What if we roll two dice and sum them? The sample space is the set of integers
    from 2 through 12\. However, each sum is not equally likely in this case, a situation
    that’s at the core of the casino game craps, for example. We calculate the probabilities
    of each sum by enumerating all the ways they can happen. By counting the ways
    events can happen and dividing by the total number of events, we can determine
    the probability. [Table 2-1](ch02.xhtml#ch02tab01) shows all the possible ways
    to generate each sum.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们掷两个骰子并求和，会怎样呢？样本空间是从2到12的整数集合。然而，在这种情况下，每个和的出现概率并不相同，这种情况正是赌场游戏“掷骰子”中的核心。例如，我们通过列举所有可能的情况来计算每个和的概率。通过计算事件发生的方式数并除以事件的总数，我们可以确定概率。[表2-1](ch02.xhtml#ch02tab01)显示了生成每个和的所有可能方式。
- en: '**Table 2-1:** The Number of Combinations of Two Dice Leading to Different
    Sums'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**表2-1：** 两个骰子产生不同和的组合数'
- en: '| **Sum** | **Combinations** | **Count** | **Probability** |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| **和** | **组合** | **计数** | **概率** |'
- en: '| --- | --- | --- | --- |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| 2 | 1 + 1 | 1 | 0.0278 |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 1 + 1 | 1 | 0.0278 |'
- en: '| 3 | 1 + 2, 2 + 1 | 2 | 0.0556 |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 1 + 2, 2 + 1 | 2 | 0.0556 |'
- en: '| 4 | 1 + 3, 2 + 2, 3 + 1 | 3 | 0.0833 |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 1 + 3, 2 + 2, 3 + 1 | 3 | 0.0833 |'
- en: '| 5 | 1 + 4, 2 + 3, 3 + 2, 4 + 1 | 4 | 0.1111 |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 1 + 4, 2 + 3, 3 + 2, 4 + 1 | 4 | 0.1111 |'
- en: '| 6 | 1 + 5, 2 + 4, 3 + 3, 4 + 2, 5 + 1 | 5 | 0.1389 |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| 6 | 1 + 5, 2 + 4, 3 + 3, 4 + 2, 5 + 1 | 5 | 0.1389 |'
- en: '| 7 | 1 + 6, 2 + 5, 3 + 4, 4 + 3, 5 + 2, 6 + 1 | 6 | 0.1667 |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| 7 | 1 + 6, 2 + 5, 3 + 4, 4 + 3, 5 + 2, 6 + 1 | 6 | 0.1667 |'
- en: '| 8 | 2 + 6, 3 + 5, 4 + 4, 5 + 3, 6 + 2 | 5 | 0.1389 |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 8 | 2 + 6, 3 + 5, 4 + 4, 5 + 3, 6 + 2 | 5 | 0.1389 |'
- en: '| 9 | 3 + 6, 4 + 5, 5 + 4, 6 + 3 | 4 | 0.1111 |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 9 | 3 + 6, 4 + 5, 5 + 4, 6 + 3 | 4 | 0.1111 |'
- en: '| 10 | 4 + 6, 5 + 5, 6 + 4 | 3 | 0.0833 |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| 10 | 4 + 6, 5 + 5, 6 + 4 | 3 | 0.0833 |'
- en: '| 11 | 5 + 6, 6 + 5 | 2 | 0.0556 |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| 11 | 5 + 6, 6 + 5 | 2 | 0.0556 |'
- en: '| 12 | 6 + 6 | 1 | 0.0278 |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| 12 | 6 + 6 | 1 | 0.0278 |'
- en: '|  |  | 36 | 1.0000 |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '|  |  | 36 | 1.0000 |'
- en: 'In [Table 2-1](ch02.xhtml#ch02tab01), there are 36 possible combinations of
    the two dice. We see that the most likely sum is 7, since six combinations add
    to 7\. The least likely are 2 and 12; there’s only one way to get either. If there
    are six ways to get a sum of 7, then the probability of a 7 is “6 out of 36,”
    or 6/36 ≈ 0.1667\. We’ll return to [Table 2-1](ch02.xhtml#ch02tab01) later in
    the next chapter when we discuss probability distributions and Bayes’ theorem.
    [Table 2-1](ch02.xhtml#ch02tab01) illustrates a general rule: if we can enumerate
    the sample space, then we can calculate the probabilities of specific events.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在[表 2-1](ch02.xhtml#ch02tab01)中，两个骰子的可能组合有36种。我们看到，最可能的和是7，因为有六种组合的点数和为7。最不可能的是2和12；这两种情况各只有一种可能。如果有六种方式可以得到和为7，那么得到7的概率是“36中有6”，即6/36
    ≈ 0.1667。我们将在下一章讨论概率分布和贝叶斯定理时回到[表 2-1](ch02.xhtml#ch02tab01)。[表 2-1](ch02.xhtml#ch02tab01)展示了一个普遍的规则：如果我们可以列举样本空间，那么就可以计算特定事件的概率。
- en: 'As a final example, if you flip three coins simultaneously, what is the probability
    of getting no heads, one head, two heads, or three heads? We can enumerate the
    possible outcomes and see. We get the following:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 作为最后一个例子，如果你同时掷三枚硬币，得到零个、一个、两个或三个正面的概率是多少？我们可以列举可能的结果并观察。结果如下：
- en: '| **Heads** | **Combinations** | **Count** | **Probability** |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| **正面** | **组合** | **计数** | **概率** |'
- en: '| --- | --- | --- | --- |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| 0 | TTT | 1 | 0.125 |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| 0 | TTT | 1 | 0.125 |'
- en: '| 1 | HTT, THT, TTH | 3 | 0.375 |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| 1 | HTT, THT, TTH | 3 | 0.375 |'
- en: '| 2 | HHT, HTH, THH | 3 | 0.375 |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| 2 | HHT, HTH, THH | 3 | 0.375 |'
- en: '| 3 | HHH | 1 | 0.125 |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| 3 | HHH | 1 | 0.125 |'
- en: '|  |  | 8 | 1.000 |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '|  |  | 8 | 1.000 |'
- en: 'From this table, we claim that the probability of getting one or two heads
    in three coin flips is the same: 37.5 percent. Let’s test this with a bit of code:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个表格中，我们可以看出，掷三枚硬币时，得到一个或两个正面的概率是相同的：37.5%。我们可以通过一些代码来验证这一点：
- en: '[PRE0]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The code runs 1,000,000 tests (`N`) simulating the flip of three coins (`M`).
    The number of times each test ends up with 0, 1, 2, or 3 heads is stored in `heads`.
    Each test selects three values in [0, 1] (`flips`) and counts how many heads (a
    zero) show up. We use `np.bincount` for this and throw away the number of tails.
    The number of heads is then tallied, and the next set of flips happens.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 代码运行了1,000,000次测试（`N`），模拟了三枚硬币的投掷（`M`）。每次测试中，0、1、2或3个正面的出现次数存储在`heads`中。每次测试选择三个值[0,
    1]（`flips`），并计算出现多少个正面（即零）。我们使用`np.bincount`来实现这一点，并丢弃反面的数量。然后统计正面的数量，并进行下一组投掷。
- en: 'When all `N` simulations are complete, we convert the number of heads to probabilities
    by dividing by the number of simulations run (`prob`). Finally, we print the corresponding
    probabilities. For zero, one, two, or three heads, a single run returned the following:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 当所有`N`次模拟完成后，我们通过除以运行的模拟次数(`prob`)将正面的数量转化为概率。最后，我们打印出对应的概率。对于零个、一个、两个或三个正面，一次运行的结果如下：
- en: '[PRE1]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: These are quite close to the probabilities we calculated above, so we have confidence
    that we’re correct.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这些结果与我们之前计算的概率非常接近，因此我们有信心认为我们的计算是正确的。
- en: Sum Rule
  id: totrans-84
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 求和规则
- en: 'We’ll start with a definition: two events *A* and *B* are said to be *mutually
    exclusive* if they can’t both happen; either one or the other happens. For example,
    a coin flip is either heads or tails; it can’t be heads *and* tails. Mutually
    exclusive events mean if event *A* happens, event *B* is excluded, and vice versa.
    Additionally, if the probabilities of two events happening are completely unrelated,
    meaning the probability of *A* is unaffected by whether *B* has happened, we say
    the two events are *independent*.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我们先从定义开始：如果两个事件*A*和*B*不能同时发生，意思是要么*A*发生，要么*B*发生，我们称这两个事件是*互斥的*。例如，抛硬币时，要么是正面，要么是反面；它不可能同时是正面*和*反面。互斥事件意味着如果事件*A*发生了，那么事件*B*就被排除，反之亦然。此外，如果两个事件发生的概率完全不相关，也就是说事件*A*的概率不受事件*B*是否发生的影响，我们称这两个事件是*独立的*。
- en: 'The sum rule is concerned with the probability of more than one mutually exclusive
    event happening. It tells us the probability of either event happening. For example,
    what’s the probability of rolling a four or a five with a standard die? We know
    the probability of rolling a four is 1/6, as is the probability of rolling a five.
    Since the events are mutually exclusive, we can intuit that the probability of
    getting a four *or* a five is their sum, since four and five as outcomes are both
    parts of the sample space, and either one or the other happens or neither happens.
    So, we get the following:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 求和法则关注的是多个互斥事件发生的概率。它告诉我们其中一个事件发生的概率。例如，掷标准骰子得到四或五的概率是多少？我们知道掷出四的概率是 1/6，掷出五的概率也是
    1/6。由于这些事件是互斥的，我们可以直观地理解得到四 *或* 五的概率是它们的和，因为四和五作为结果都是样本空间的一部分，而且要么四发生，要么五发生，或者两者都不发生。所以，我们得到以下结论：
- en: '![image](Images/02equ04.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ04.jpg)'
- en: Here ∪ means “or” or “union.” You’ll see ∪ often. For a standard die, the probability
    of rolling a four or a five is ![image](Images/024equ01.jpg), or about 33 percent.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这里 ∪ 代表“或”或“并集”。你会经常看到 ∪。对于标准骰子，掷出四或五的概率是 ![image](Images/024equ01.jpg)，大约是
    33%。
- en: 'The sample space of two coin flips is {HH, HT, TH, TT}; therefore, this is
    the probability of getting two heads or two tails:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 两次投掷硬币的样本空间是 {HH, HT, TH, TT}；因此，得到两个正面或两个反面的概率是：
- en: '![image](Images/024equ02.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/024equ02.jpg)'
- en: There’s more to the sum rule, but before we can see it, we need to consider
    the product rule.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 求和法则还有更多内容，但在我们能看到之前，需要先考虑乘法法则。
- en: Product Rule
  id: totrans-92
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 乘法法则
- en: 'The sum rule tells us about the probability of events *A* or *B* happening.
    The product rule tells us the probability of events *A and B*:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 求和法则告诉我们事件 *A* 或 *B* 发生的概率。乘法法则则告诉我们事件 *A 和 B* 发生的概率：
- en: '![image](Images/02equ05.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ05.jpg)'
- en: Here ∩ means “and” or “intersection.”
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这里 ∩ 代表“且”或“交集”。
- en: If events *A* and *B* are mutually exclusive, we will immediately see that *P*(*A*
    ∩ *B*) = 0 because if event *A* happens with probability *P*(*A*), then event
    *B*’s probability is *P*(*B*) = 0, and their product is also zero. The same is
    true if event *B* happens; then *P*(*A*) = 0.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 如果事件 *A* 和 *B* 是互斥的，我们会立即看到 *P*(*A* ∩ *B*) = 0，因为如果事件 *A* 发生的概率是 *P*(*A*)，那么事件
    *B* 的概率是 *P*(*B*) = 0，它们的乘积也为零。如果事件 *B* 发生，那么 *P*(*A*) = 0，情况也是如此。
- en: Not all events are mutually exclusive, of course. For example, assume 80 percent
    of the people in the world have brown eyes and 50 percent are female. What’s the
    probability of a randomly selected person being a female with brown eyes? Let’s
    use the product rule,
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，并不是所有事件都是互斥的。例如，假设全球有 80% 的人有棕色眼睛，50% 的人是女性。那么，随机选取一个人是棕色眼睛的女性的概率是多少？我们可以使用乘法法则，
- en: '*P*(female, brown-eyed) = *P*(female)*P*(brown-eyed) = 0.5(0.8) = 0.4'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*P*(女性, 棕色眼睛) = *P*(女性)*P*(棕色眼睛) = 0.5(0.8) = 0.4'
- en: to see there is a 40 percent chance of a randomly selected person being a brown-eyed
    female.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 可以看到，随机选取一个人是棕色眼睛的女性的概率是 40%。
- en: The product rule makes sense if we think about it a bit. Calculating the fraction
    of people, which is the probability, who are female won’t change the fraction
    of those females who are brown-eyed. One event, being female, has no impact on
    the other event, being brown-eyed.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们稍微思考一下，乘法法则就能理解了。计算女性这一事件的概率不会改变这些女性中拥有棕色眼睛的比例。一个事件，女性，并不影响另一个事件，棕色眼睛。
- en: 'The product rule isn’t limited to only two events. Consider the following.
    According to insurance companies, the probability of being struck by lightning
    in any given year, if you live in the US, is about 1/1,222,000, or 0.000082 percent.
    What’s the probability of being a brown-eyed female and being struck by lightning
    in any given year, assuming you live in the US? Again, we can use the product
    rule:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 乘法法则不仅限于两个事件。考虑以下情况。根据保险公司数据，在美国，任何一年内被雷击的概率大约是 1/1,222,000，或者 0.000082%。那么，假设你住在美国，成为棕色眼睛女性并在任何一年内被雷击的概率是多少？我们可以再次使用乘法法则：
- en: '![image](Images/025equ01.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/025equ01.jpg)'
- en: 'The population of the United States is about 331,000,000, of which 0.000033
    percent are brown-eyed females who’ll be struck by lightning this year: 109 people,
    by our calculation above. According to the US National Weather Service, about
    270 people will be struck by lightning in a given year. As we saw above, 40 percent
    of those people will be brown-eyed females, which yields 270(0.4) = 108\. So,
    our calculation is entirely believable.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 美国的人口大约是3.31亿，其中0.000033%是今年会被闪电击中的棕眼女性：根据我们上面的计算是109人。根据美国国家气象局的统计，每年大约有270人会被闪电击中。正如我们上面所看到的，其中40%的人是棕眼女性，这样计算得出270(0.4)
    = 108。所以，我们的计算完全可信。
- en: Sum Rule Revisited
  id: totrans-104
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 求和规则回顾
- en: 'We stated above that there’s more to the sum rule. Let’s see now what we were
    missing above. [Equation 2.4](ch02.xhtml#ch02equ04) gives us the sum rule for
    mutually exclusive events *A* and *B*. What if the events aren’t mutually exclusive?
    In that case, the sum rule needs to be modified:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们上面提到过求和规则还有更多内容。现在让我们看看上面我们遗漏了什么。[公式 2.4](ch02.xhtml#ch02equ04)给出了互斥事件*A*和*B*的求和规则。如果事件不是互斥的呢？在这种情况下，求和规则需要进行修改：
- en: '![image](Images/02equ06.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ06.jpg)'
- en: Let’s look at an example.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一个例子。
- en: An archaeologist has discovered a small cache of 20 ancient coins. He notes
    that 12 of the coins are Roman and 8 are Greek. He also notes that 6 of the Roman
    coins and 3 of the Greek coins are silver. The remaining coins are bronze. What’s
    the probability of selecting a silver or Roman coin from the cache?
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 一位考古学家发现了一小批20枚古币。他注意到其中12枚是罗马币，8枚是希腊币。他还注意到6枚罗马币和3枚希腊币是银币。其余的都是青铜币。那么，从这批硬币中选出一枚银币或罗马币的概率是多少？
- en: 'If we believe that silver and Roman are mutually exclusive, we’d be tempted
    to say the following:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们认为银币和罗马币是互斥的，我们可能会倾向于说出以下结论：
- en: '![image](Images/026equ01.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/026equ01.jpg)'
- en: However, the sum of the two probabilities is ![image](Images/026equ02.jpg),
    and we *can’t* have a probability greater than one. Something is amiss.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，两个概率的和是![image](Images/026equ02.jpg)，而我们*不能*有大于1的概率。显然有什么不对劲。
- en: 'The problem is that there are Roman coins in the cache that are made of silver.
    We counted them twice—once in *P* (silver) and again in *P*(Roman)—so now we need
    to subtract them from the overall sum. There are six silver Roman coins. So, the
    probability of being a silver Roman coin is *P*(silver and Roman)![image](Images/026equ03.jpg).
    Subtracting that part, we see that the probability of picking a silver coin or
    a Roman coin is 75 percent:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 问题在于，硬币堆中有一些是银制的罗马币。我们已经将它们计算了两次——一次在*P*（银币）中，再次在*P*（罗马币）中——因此现在我们需要从总和中减去它们。共有6枚银制罗马币。所以，成为银制罗马币的概率是*P*（银币且罗马币）![image](Images/026equ03.jpg)。减去这部分后，我们可以看到选出银币或罗马币的概率是75%：
- en: '![image](Images/026equ04.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/026equ04.jpg)'
- en: As with the sum rule, there’s more to the product rule, and we’ll get to that
    shortly. But first, let’s use the product rule to see if we can solve the birthday
    paradox.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 和求和规则一样，乘法规则还有更多内容，我们稍后会讲解。但是首先，让我们用乘法规则看看能否解决生日悖论。
- en: The Birthday Paradox
  id: totrans-115
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 生日悖论
- en: On average, how many people do we need together in a room to have a higher than
    50 percent chance that two of them share the same birthday? This problem is known
    as the *birthday paradox*. Let’s see if we can use our knowledge of the product
    rule for probability to see what the solution is.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 平均而言，我们需要将多少人聚集在一个房间里，才能让其中两人有超过50%的概率共享同一天生日？这个问题被称为*生日悖论*。让我们看看能否利用概率的乘法规则来求解这个问题。
- en: 'We’ll ignore leap years and state that there are 365 days in a year. Intuitively,
    we see that the probability of randomly selected people sharing a birthday is
    one day (the shared birthday) out of 365 possible birthdays in a year. The sample
    space is 365 days, and the shared birthday is the one day in common. So, we get
    the following:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们忽略闰年，并假设一年有365天。直观上，我们可以看到，随机选择的人共享同一天生日的概率是1天（共享生日）/365个可能的生日。因此，样本空间是365天，而共享的生日是其中的1天。所以，我们得到如下结果：
- en: '![image](Images/027equ01.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/027equ01.jpg)'
- en: 'They either share a birthday or they don’t: 1 – 1/365 = 365/365 – 1/365 = 364/365\.
    So we get the following:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 他们要么共享生日，要么不共享生日：1 – 1/365 = 365/365 – 1/365 = 364/365。因此，我们得到如下结果：
- en: '![image](Images/027equ02.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/027equ02.jpg)'
- en: Of the 365 days in a year, there is one possible match, leaving 364 days that
    don’t match.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在一年中的365天里，有一天可能是匹配的，剩下的364天则不匹配。
- en: A 0.3 percent chance of randomly selected people sharing a birthday is pretty
    low. It means if you randomly choose pairs of people and ask if they share a birthday,
    on average you’ll get three matches in a thousand—not terribly likely.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 随机选择的人共享生日的概率为0.3%，这相当低。意味着如果你随机选择人对并询问他们是否有相同的生日，平均每千对会有三对是匹配的——这并不太可能发生。
- en: For our calculation, we’ll look at things the other way. We’re looking for the
    number of people we need together so that the probability of *no* two people sharing
    a birthday is below 50 percent.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的计算，我们将反过来看待这个问题。我们需要找出多少人集合在一起，才能使得两个人没有共享生日的概率低于50%。
- en: 'We know the probability that two randomly selected people *don’t* share a birthday:
    ![image](Images/027equ03.jpg). Therefore, if we select two pairs of people at
    random, the probability that both pairs do not share a birthday is the following:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道两个人随机选择没有共享生日的概率：![image](Images/027equ03.jpg)。因此，如果我们随机选择两对人，两对人都没有共享生日的概率如下：
- en: '![image](Images/027equ04.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/027equ04.jpg)'
- en: 'Here, we’re using the product rule. Similarly, with three people, *(A*, *B*,
    *C*), we can form three different pairs, *(A*, *B*), (*A*, *C*), and (*B*, *C*),
    so we calculate the following:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们使用乘法法则。同样地，对于三个人，*(A*, *B*, *C*)，我们可以形成三对不同的组合，*(A*, *B*)，(*A*, *C*) 和
    (*B*, *C*)，所以我们可以计算如下：
- en: '![image](Images/027equ05.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/027equ05.jpg)'
- en: 'For *n* comparisons, here’s the probability that none share a birthday:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 *n* 次比较，这里是没有人共享生日的概率：
- en: '![image](Images/02equ07.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ07.jpg)'
- en: Our task is to find the minimum number of comparisons, *n*, leading to a probability
    of no shared birthday < 50 percent, where *n* is a function of the number of people
    in the room, *m*. Why less than 50 percent? Because if we find an *n* leading
    to a less than 50 percent probability that there is no shared birthday, the probability
    that there *is* a shared birthday must then be > 50 percent.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的任务是找到最小的比较次数，*n*，使得没有共享生日的概率小于50%，其中 *n* 是房间里人数 *m* 的函数。为什么小于50%？因为如果我们找到一个
    *n*，使得没有共享生日的概率小于50%，那么共享生日的概率必定大于50%。
- en: If you pick three people at random, there are three pairs of people to check
    to see if they share a birthday. If you have four people, there are six pairs.
    So, the larger the group of people, the more pairs there are. Can we find a rule
    that maps the number of people, *m*, to the number of pairs to compare, *n*? If
    we have that, we can find the smallest *m* leading to an *n* where the probability
    of [Equation 2.7](ch02.xhtml#ch02equ07) is < 50 percent.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你随机挑选三个人，就有三对人需要检查是否有共同的生日。如果有四个人，就有六对。也就是说，人数越多，组合对数越多。我们能否找到一个规则，将人数 *m*
    映射到需要比较的对数 *n* 上呢？如果找到了，我们就可以找到最小的 *m*，使得在该人数下的 *n*，[公式 2.7](ch02.xhtml#ch02equ07)
    的概率小于50%。
- en: 'When we have a set of *m* unique objects, like people in a room, and we select
    pairs of them, how many different pairs can we select? In other words, how many
    combinations of *m* things are there when taken two at a time? The formula to
    calculate the number of combinations of *m* things taken *k* at a time is this:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们有 *m* 个独特的物体（例如房间里的人员），并且我们选择它们的组合时，我们可以选择多少种不同的组合？换句话说，*m* 个物体两两组合有多少种可能？计算
    *m* 个物体中选择 *k* 个的组合数的公式是：
- en: '![image](Images/028equ01.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/028equ01.jpg)'
- en: You’ll sometimes hear this referred to as “*m* choose *k*,” where, for us, *k*
    = 2\. Let’s find the number of comparisons we need, *n*, and use the number of
    combinations of things taken two at a time to find an *m* leading to at least
    *n* comparisons.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 你有时会听到这个叫做“*m* 选 *k*”，对于我们来说，*k* = 2。让我们找到所需的比较次数 *n*，并使用两两组合的公式来找出一个 *m*，使得我们至少有
    *n* 次比较。
- en: 'A straightforward loop in Python locates the *n* we need:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 一个简单的 Python 循环可以找到我们需要的 *n*：
- en: '[PRE2]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We’re told *n* = 253\. So, we need to make, on average, 253 comparisons, 253
    pairs of people, to have a greater than 50 percent chance that one of those pairs
    shares a birthday. The final step is to find how many combinations of *m* people
    taken two at a time are at least 253\. A bit of brute force trial and error tells
    us this:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道 *n* = 253。所以，我们需要平均进行253次比较，即253对人，才能有超过50%的机会让这些人中某一对共享生日。最后一步是找出 *m*
    个人数中，至少有253种两两组合的数量。通过一些暴力试验和错误，我们得到了以下结果：
- en: '![image](Images/028equ02.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/028equ02.jpg)'
- en: We need *m* = 23 people on average to have a higher than 50 percent chance at
    least two of them share a birthday. All thanks to the product rule.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们平均需要 *m* = 23人，才能有超过50%的概率至少有两个人的生日相同。这一切都要归功于乘法规则。
- en: 'Is our result reliable or just sleight of hand? Some code can tell us. First,
    let’s verify via simulation that the probability of randomly picking two people
    who share a birthday is 0.3 percent:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的结果可靠吗，还是只是手法巧妙？有些代码可以告诉我们。首先，让我们通过模拟验证随机挑选到两个生日相同的人概率为0.3%：
- en: '[PRE3]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The code simulates 100,000 random pairs of people, where the random integer
    in [0, 364] represents the person’s birthday. If the two random birthdays match,
    `match` is incremented. After all simulations run, we print the probability. A
    run of this code produced the following, making our assertion of a 0.3 percent
    chance believable:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码模拟了100,000对随机人物，其中[0, 364]之间的随机整数代表某个人的生日。如果两个人的生日相同，则`match`会增加。所有模拟完成后，我们会打印出概率。这段代码的运行结果如下，这让我们对0.3%的概率的断言变得可信：
- en: '[PRE4]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'What about the number of people to get a > 50 percent chance of sharing a birthday?
    Here, we have two loops. The first is over the number of people in the room (`m`),
    and the second is over the number of simulations for that many people in the room
    (`n`). In code, that looks like this:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，至少要有多少人才能使共享生日的概率大于50%呢？这里我们有两个循环。第一个是遍历房间内的人数（`m`），第二个是遍历该人数下的模拟次数（`n`）。在代码中，它看起来是这样的：
- en: '[PRE5]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: We let `m` range over 2 to 30 people. For each set of `m` people, we run 100,000
    simulations. For each simulation, we pick a set of birthdays for each person in
    the room (`b`) and then compare each person with every other person to see if
    there’s a matching birthday. If there is, we increment `match`. If we had at least
    one match, we increment `matches` and move to the next simulation. Finally, when
    all of the simulations for the current number of people in the room are complete,
    we print the probability of at least a single match.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 我们让`m`的值从2到30人变化。对于每一组`m`人，我们运行100,000次模拟。每次模拟中，我们为每个人（`b`）挑选一个生日，然后将每个人与其他所有人进行比较，看看是否有生日相同。如果有相同的生日，则`match`增加。如果至少有一次匹配，我们就增加`matches`并进入下一个模拟。最后，当当前人数的所有模拟完成时，我们会打印出至少有一次匹配的概率。
- en: If we run the code and plot the output, we get [Figure 2-1](ch02.xhtml#ch02fig01),
    where the dashed line is 50 percent. The first point above the dashed line is
    23 people, precisely as we calculated.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们运行代码并绘制输出，我们得到[图2-1](ch02.xhtml#ch02fig01)，其中虚线表示50%的概率。第一个超出虚线的点是23人，正是我们之前计算的结果。
- en: '![image](Images/02fig01.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02fig01.jpg)'
- en: '*Figure 2-1: The probability of a shared birthday as a function of the number
    of people in a room*'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '*图2-1：共享生日的概率与房间人数的关系*'
- en: It’s always satisfying to see the simulation line up with the math.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 看到模拟结果与数学结果一致总是令人满意的。
- en: Conditional Probability
  id: totrans-151
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 条件概率
- en: 'Consider a bag of 10 marbles: 8 red and 2 blue. We know if we pick a marble
    at random from the bag, we have a 2 out of 10, or 20 percent, chance of picking
    a blue marble. Say we pick a blue marble. After admiring its pretty shade of blue,
    we put it back in the bag, shake the bag, and pull out another marble. What’s
    our chance of picking a blue marble a second time? Again, there are 2 blue marbles
    and 10 total, so it’s still 20 percent.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 假设有一个装有10颗弹珠的袋子：8颗红色和2颗蓝色。我们知道，从袋子里随机挑选一颗弹珠，挑中蓝色弹珠的概率是2/10，或者20%。假设我们挑选到了蓝色弹珠。在欣赏它漂亮的蓝色后，我们将其放回袋中，摇动袋子，再抽出一颗弹珠。我们第二次挑选到蓝色弹珠的概率是多少？再次，因为袋中仍有2颗蓝色弹珠，总共有10颗弹珠，所以概率仍然是20%。
- en: If the fact that event *A* happened (here, picking a blue marble that we then
    returned to the bag) hasn’t affected the probability of a future event *B*, the
    two are independent events. Our chance of picking a blue marble a second time
    is in no way affected by the fact that we previously chose a blue marble. The
    same is true for a coin flip. The fact that we’ve landed heads up four times in
    a row has nothing to do with the probability of getting tails on the next flip,
    assuming it’s a fair coin, i.e., it’s not weighted on one side or two-headed (or
    two-tailed).
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 如果事件 *A* 发生（这里是挑选了一颗蓝色弹珠并将其放回袋中）没有影响未来事件 *B* 的概率，那么这两个事件是独立的。我们第二次挑选到蓝色弹珠的机会不会受到之前挑选到蓝色弹珠的影响。同样的道理也适用于投掷硬币。我们连续四次正面朝上的事实与下一次投掷得到反面的概率无关，前提是假设硬币是公平的，也就是说它没有偏向某一面，或者是双正面（或双反面）。
- en: Now, consider an alternate scenario. We still have a bag with eight red and
    two blue marbles. We pick a marble—say it’s red this time—and because we like
    the color, we keep the marble and put it aside. Now, we pick another marble from
    the bag. What’s the probability of picking another red marble? Here, things have
    changed. There are nine marbles now, and seven of them are red. So, our chance
    of picking a second red marble is now 7 of 9, or 78 percent. The possibility of
    choosing a red marble initially was 8 of 10, or 80 percent. The fact that event
    *A* happened, picking a red marble we then kept, has altered the probability of
    a second event. The two events are no longer independent. The probability of the
    second event was changed by the first event happening. Notationally, we write
    *P**(B*|*A*) to mean the probability of event *B given* event *A* has happened.
    This is a *conditional probability* because it’s conditional on event *A* happening.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，考虑一个替代场景。我们仍然有一个装有八颗红色弹珠和两颗蓝色弹珠的袋子。我们拿出一颗弹珠——假设这次是红色的——因为我们喜欢这种颜色，所以我们保留这颗弹珠并将其放在一边。现在，我们从袋子里拿出另一颗弹珠。再拿到一颗红色弹珠的概率是多少？在这里，情况发生了变化。现在有9颗弹珠，其中7颗是红色的。所以，拿到第二颗红色弹珠的概率现在是9分之7，即78%。最初拿到红色弹珠的概率是10分之8，即80%。事件*A*的发生，即我们拿到了并保留了一颗红色弹珠，改变了第二个事件的概率。这两个事件不再是独立的。第二个事件的概率被第一个事件的发生所改变。从符号上来说，我们写作*P**(B*|*A*)，意味着在事件*A*发生的条件下事件*B*发生的概率。这是一个*条件概率*，因为它是基于事件*A*发生的条件。
- en: Here’s where we update the product rule. The version in [Equation 2.5](ch02.xhtml#ch02equ05)
    assumes that the two events are independent, like being female and having brown
    eyes. If we have a dependent situation, the rule becomes
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是我们更新乘法法则的地方。[方程 2.5](ch02.xhtml#ch02equ05)中的版本假设两个事件是独立的，比如性别是女性和眼睛是棕色的。如果我们遇到依赖关系的情况，规则变为：
- en: '![image](Images/02equ08.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ08.jpg)'
- en: meaning the probability of the two events both happening is the product of the
    probability of one given the other has happened and the probability of the other.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着两个事件同时发生的概率是其中一个事件在另一个事件发生的条件下发生的概率与另一个事件发生的概率的乘积。
- en: 'Looking back at our marble example above, we calculated the probability of
    picking a red marble after already picking and keeping a red marble to be 7 of
    9, or about 78 percent. That’s *P**(B*|*A*). For *P(A*), we need the probability
    of picking a red marble initially, which we said was 80 percent. Therefore, the
    probability of picking a red marble that we keep, *A*, and picking a red marble
    on a second draw, *B*, is 62 percent:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 回顾我们上面的弹珠例子，我们计算了在已经拿走并保留了一颗红色弹珠之后，再拿到一颗红色弹珠的概率为9分之7，约为78%。那就是*P**(B*|*A*)。对于*P(A*)，我们需要计算最初拿到红色弹珠的概率，我们说这是80%。因此，拿到一颗红色弹珠并保留它（*A*）以及第二次抽到一颗红色弹珠（*B*）的概率是62%：
- en: '![image](Images/031equ01.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/031equ01.jpg)'
- en: If two events are mutually exclusive, *P**(B*|*A*) = *P*(*A*|*B*) = 0\. If events
    *A* and *B* are independent, then *P*(*A*|*B*) = *P*(*A*) and *P*(*B*|*A*) = *P*(*B*)
    because the conditional event happening or not has no influence on the later event.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 如果两个事件是互斥的，*P**(B*|*A*) = *P*(*A*|*B*) = 0。如果事件*A*和*B*是独立的，那么*P*(*A*|*B*) =
    *P*(*A*)，*P*(*B*|*A*) = *P*(*B*)，因为条件事件是否发生对后续事件没有影响。
- en: Finally, note that typically *P**(B*|*A*) ≠ *P*(*A*|*B*), and confusing the
    two conditional probabilities is a common and often serious error. As we’ll see
    in [Chapter 3](ch03.xhtml#ch03), something called Bayes’ theorem gives the proper
    relationship between the conditional probabilities. We’ll encounter conditional
    probability again when discussing the chain rule for probability.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，请注意，通常*P**(B*|*A*) ≠ *P*(*A*|*B*)，混淆这两个条件概率是一个常见且经常是严重的错误。正如我们将在[第3章](ch03.xhtml#ch03)中看到的，贝叶斯定理给出了条件概率之间的正确关系。当我们讨论概率的链式法则时，我们将再次遇到条件概率。
- en: Total Probability
  id: totrans-162
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 总概率
- en: 'If our sample space is separated into disjoint regions, *B[i]* (*B*[1], *B*[2],
    etc.) so that the totality of the sample space is covered by the collection of
    *B[i]*s and the *B*[i]s don’t overlap, we can calculate the probability of an
    event over all the partitions as the following:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们的样本空间被划分为不相交的区域，*B[i]*（*B*[1]、*B*[2]等），使得样本空间的总和由所有的*B[i]*组成，并且这些*B[i]*之间没有重叠，我们可以按如下方式计算事件在所有划分上的概率：
- en: '![image](Images/031equ02.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/031equ02.jpg)'
- en: Here *P**(A*|*B[i]*) is the probability of *A* given partition *B[i]* and *P*(*B[i]*)
    is the probability of partition *B[i]*, which is the amount of the sample space
    that *B[i]* represents. In this view, *P**(A*) is the *total probability* of *A*
    over the partitions, *B[i]*. Let’s see an example of how to use this law.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的*P**(A*|*B[i]*)是条件概率，表示在*B[i]*条件下发生*A*的概率，而*P*(*B[i]*)是*B[i]*的概率，它表示样本空间中*B[i]*所代表的部分。在这种情况下，*P**(A*)是*A*在所有*B[i]*分区下的*总概率*。让我们来看一个如何使用这个法则的例子。
- en: 'You have three cities, Kish, Kesh, and Kuara, and their populations are 2,000,
    1,000, and 3,000, respectively. Additionally, the percentages of people with blue
    eyes in these cities are 12 percent, 3 percent, and 21 percent, respectively.
    We want to know the probability that a randomly selected person from among the
    cities has blue eyes. The cities’ populations affect things, as the probability
    of having blue eyes varies by city and the cities vary in population. To find
    *P*(blue), we use the total probability:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 你有三座城市，Kish、Kesh和Kuara，分别拥有2000人、1000人和3000人。此外，这三座城市中拥有蓝眼睛的比例分别是12%、3%和21%。我们想知道从这些城市中随机选择一位居民，该居民拥有蓝眼睛的概率是多少。城市的人口影响着这个概率，因为不同城市的蓝眼睛概率不同，而各城市的人口也不相同。为了求得*P*(blue)，我们需要使用总概率法则：
- en: '![image](Images/032equ01.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/032equ01.jpg)'
- en: Here *P*(blue|Kish) is the probability of having blue eyes given you live in
    Kish, and *P* (Kish) is the probability of living in Kish, and so on.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的*P*(blue|Kish)表示在你住在Kish的前提下，拥有蓝眼睛的概率，而*P*(Kish)是住在Kish的概率，依此类推。
- en: 'We know the necessary quantities to find the total probability. The probability
    of blue eyes per city is given above, and the probability of living in each city
    is found from its population and the total population of the three cities:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道了所需的量来计算总概率。每个城市的蓝眼睛概率如上所示，而每个城市的居民比例则由该城市人口与三座城市总人口之比得出：
- en: '![image](Images/032equ02.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/032equ02.jpg)'
- en: Therefore, *P*(blue) is
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，*P*(blue)是
- en: '![image](Images/032equ03.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/032equ03.jpg)'
- en: 'meaning there is a 15 percent chance a randomly selected inhabitant of the
    three cities will have blue eyes. Note the sum of the probabilities for selecting
    the cities: *P*(Kish) + *P*(Kesh) + *P*(Kuara) = 1\. This must be the case for
    the partitioning of the total sample space, all the inhabitants of the cities,
    to be covered by the partitioning into cities.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着随机选取的三座城市中的一位居民有15%的机会拥有蓝眼睛。请注意，选择这些城市的概率总和为：*P*(Kish) + *P*(Kesh) + *P*(Kuara)
    = 1\. 这是因为对总样本空间（所有城市居民）进行划分时，所有城市的划分必须覆盖整个样本空间。
- en: Joint and Marginal Probability
  id: totrans-174
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 联合概率与边缘概率
- en: The *joint probability* of two variables, *P**(X* = *x*, *Y* = *y*), is the
    probability that random variable *X* will have the value *x* at the same time
    random variable *Y* is *y*. We’ve already seen an example of a joint probability.
    When we use “and” when calculating a probability, we’re calculating a joint probability.
    A joint probability is the probability of multiple conditions being true at the
    same time, which is “and.” The *marginal probability* is what we get when we calculate
    the probability of one or more of those conditions without caring about the value
    of the others; in other words, the probability of a subset of the random variables
    in the “and.”
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 两个变量的*联合概率*，*P**(X* = *x*, *Y* = *y*)，是指随机变量*X*在*Y*为*y*的情况下，*X*为*x*的概率。我们之前已经看到过一个联合概率的例子。当我们在计算概率时使用“和”时，实际上我们就是在计算联合概率。联合概率是多个条件同时成立的概率，即“和”的概率。*边缘概率*是指在不考虑其他条件的情况下，计算其中一个或多个条件的概率；换句话说，就是在“和”的条件下计算某一子集的概率。
- en: In this section, we’ll examine joint and marginal probabilities using simple
    tables. We’ll then introduce the chain rule for probability. This rule lets us
    break down a joint probability into the product of smaller joint probabilities
    and conditional probabilities.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将通过简单的表格来研究联合概率和边缘概率。然后，我们将介绍概率的链式法则。这个法则让我们可以将联合概率分解成更小的联合概率和条件概率的乘积。
- en: Joint Probability Tables
  id: totrans-177
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 联合概率表
- en: According to Colour Blind Awareness (*[http://www.colourblindawareness.org/](http://www.colourblindawareness.org/)*),
    approximately 1 in 12 men and 1 in 200 women are color-blind. The difference comes
    from the fact that the affected gene is on the X chromosome, requiring a woman
    to inherit the recessive gene from both her mother and father. A man need only
    inherit the gene from one parent.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 根据色盲意识组织（*[http://www.colourblindawareness.org/](http://www.colourblindawareness.org/)*）的资料，大约每12个男性中就有1人是色盲，而每200个女性中就有1人是色盲。之所以会有差异，是因为导致色盲的基因位于X染色体上，女性需要同时从母亲和父亲继承该隐性基因，而男性只需从一个父母那里继承该基因。
- en: 'Pretend we survey 1,000 people. We can count the number of people who are male
    and color-blind, female and color-blind, male and not color-blind, and female
    and not color-blind. We do this and arrange the data in a table like so:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们对1,000人进行调查。我们可以计算出男性且色盲、女性且色盲、男性且非色盲、女性且非色盲的人数。我们完成这个统计并将数据安排成如下表格：
- en: '|  | **Color-blind** | **Not color-blind** |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '|  | **色盲** | **非色盲** |'
- en: '| --- | --- | --- |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| **Male** | 42 | 456 | 498 |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| **男性** | 42 | 456 | 498 |'
- en: '| **Female** | 3 | 499 | 502 |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| **女性** | 3 | 499 | 502 |'
- en: '|  | 45 | 955 | 1000 |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '|  | 45 | 955 | 1000 |'
- en: Tables like these are known as *contingency tables*. The tallied data is in
    the center 2 × 2 numerical portion of the table. The rightmost column is the sum
    across the rows, and the final row is the sum of the columns. The sum of the final
    row or column is in the last cell and, by necessity, sums to the 1,000 people
    we surveyed.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 这种表格被称为*列联表*。统计数据位于表格中间的2 × 2数值区域。最右边一列是每行的总和，最后一行是每列的总和。最后一行或最后一列的总和位于最后一个单元格，并且必然总和为我们调查的1,000人。
- en: 'We can turn the contingency table into a table of probabilities by dividing
    each cell by 1,000, the number of people surveyed. Doing this gives us the following:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过将每个单元格除以1,000（即调查的总人数）来将列联表转化为概率表。这样得到的结果如下：
- en: '|  | **Color-blind** | **Not color-blind** |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '|  | **色盲** | **非色盲** |'
- en: '| --- | --- | --- |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| **Male** | 0.042 | 0.456 | 0.498 |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| **男性** | 0.042 | 0.456 | 0.498 |'
- en: '| **Female** | 0.003 | 0.499 | 0.502 |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| **女性** | 0.003 | 0.499 | 0.502 |'
- en: '|  | 0.045 | 0.955 | 1.000 |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '|  | 0.045 | 0.955 | 1.000 |'
- en: The table is now a joint probability table. With it, we can look up the probability
    of being male and color-blind. Notationally, we write
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，这个表格是一个联合概率表。通过它，我们可以查找男性和色盲的概率。符号表示为
- en: '*P*(sex = male, color-blind = yes) = 0.042'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '*P*(性别 = 男性，色盲 = 是) = 0.042'
- en: and, similarly, we see that
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 同样地，我们可以看到
- en: '*P*(sex = female, color-blind = no) = 0.499'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '*P*(性别 = 女性，色盲 = 否) = 0.499'
- en: Using the joint probability table, we can predict what we would expect to measure
    given a random sample of people. For example, if we have a sample of 20,000 people,
    then, based on our table, we’ll expect to find about 20000(0.042) = 840 color-blind
    men and about 20000(0.003) = 60 color-blind women.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 使用联合概率表，我们可以预测在对人群进行随机抽样时可能观察到的结果。例如，如果我们有一个20,000人的样本，那么根据我们的表格，我们预计会发现大约20000(0.042)
    = 840个色盲男性，以及大约20000(0.003) = 60个色盲女性。
- en: What if we wanted to know the probability of being color-blind regardless of
    sex? For that, we sum the probabilities along the color-blind column and see that
    there is a 4.5 percent chance that a randomly selected person is color-blind.
    Likewise, summing along the row gives us an estimated probability of being female
    as 50.2 percent. We do need to bear in mind that our table was built from a sample
    of only 1,000 people. You might guess that if we had instead sampled 100,000 people,
    our split between male and female would be closer to 50/50, and you’d be right.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想知道一个人是色盲的概率，而不考虑性别怎么办？为此，我们沿着色盲那一列求和，结果显示随机选择一个人是色盲的概率为4.5%。同样，沿着行求和会给我们估计的女性概率为50.2%。我们需要牢记的是，我们的表格是基于仅有1,000人的样本。如果我们改为对100,000人进行抽样，男性和女性的比例将更接近50/50，而你猜得没错。
- en: Calculating the probability of being color-blind or female from the joint probability
    table is calculating a marginal probability. In the first case, we summed along
    the column to remove the effect of sex, whereas in the second case, we summed
    along the row to remove the effect of color-blindness.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 从联合概率表中计算色盲或女性的概率实际上是在计算边际概率。在第一个情况下，我们是沿着列求和，以消除性别的影响；而在第二个情况下，我们是沿着行求和，以消除色盲的影响。
- en: 'Mathematically, we get the marginal probabilities by summing across the variables
    we don’t want. If we have a joint probability table for two variables, like the
    example above, we get the marginal probabilities by summing:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 从数学上讲，我们通过对不需要的变量进行求和来获得边际概率。如果我们有一个两个变量的联合概率表格，像上面的例子，我们就通过求和得到边际概率：
- en: '![image](Images/034equ01.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/034equ01.jpg)'
- en: Using the table above, we can write
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 使用上面的表格，我们可以写出：
- en: '![image](Images/034equ02.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/034equ02.jpg)'
- en: where we sum across sex to remove its effect. Now, let’s explore another table,
    one with three variables.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，我们对性别进行求和，以消除它的影响。现在，让我们探索另一个表格，包含三个变量的表格。
- en: 'Sometime during the night of April 14, 1912, the RMS *Titanic* sank in the
    North Atlantic on its maiden voyage from England to New York City. Based on a
    sample of 887 people who were on board the *Titanic*, we can generate [Table 2-2](ch02.xhtml#ch02tab02)
    showing the joint probability for three variables: survival, sex, and cabin class.'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 1912年4月14日的某个时刻，RMS *泰坦尼克号*在从英国前往纽约市的首航途中沉没于北大西洋。根据对887名在*泰坦尼克号*上的乘客样本，我们可以生成[表2-2](ch02.xhtml#ch02tab02)，显示三个变量的联合概率：生存、性别和舱位等级。
- en: '**Table 2-2:** Joint Probability Table for *Titanic* Passengers'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '**表2-2：** *泰坦尼克号*乘客的联合概率表'
- en: '|  |  | **Cabin1** | **Cabin2** | **Cabin3** |'
  id: totrans-206
  prefs: []
  type: TYPE_TB
  zh: '|  |  | **舱位1** | **舱位2** | **舱位3** |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-207
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| **Dead** | **Male** | 0.087 | 0.103 | 0.334 |'
  id: totrans-208
  prefs: []
  type: TYPE_TB
  zh: '| **死亡** | **男性** | 0.087 | 0.103 | 0.334 |'
- en: '| **Female** | 0.003 | 0.007 | 0.081 |'
  id: totrans-209
  prefs: []
  type: TYPE_TB
  zh: '| **女性** | 0.003 | 0.007 | 0.081 |'
- en: '| **Alive** | **Male** | 0.051 | 0.019 | 0.053 |'
  id: totrans-210
  prefs: []
  type: TYPE_TB
  zh: '| **生还** | **男性** | 0.051 | 0.019 | 0.053 |'
- en: '| **Female** | 0.103 | 0.079 | 0.081 |'
  id: totrans-211
  prefs: []
  type: TYPE_TB
  zh: '| **女性** | 0.103 | 0.079 | 0.081 |'
- en: Let’s use [Table 2-2](ch02.xhtml#ch02tab02) to calculate some probabilities.
    Note, we’ll use the values in [Table 2-2](ch02.xhtml#ch02tab02), which are accurate
    to three decimals. As a result, the overall numbers will be slightly off from
    the probabilities we’d calculate from the counts, but doing this makes the link
    between the table and the equations more concrete.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用[表2-2](ch02.xhtml#ch02tab02)来计算一些概率。注意，我们将使用[表2-2](ch02.xhtml#ch02tab02)中的值，这些值精确到小数点后三位。因此，整体数字与我们从计数中计算出的概率会略有偏差，但这样做能够使表格和方程之间的联系更加明确。
- en: 'First, we can read directly from the table for specific triplets of survived,
    sex, and cabin class. Here’s an example:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们可以直接从表格中读取特定的生还、性别和舱位等级的三元组。例如：
- en: '*P*(dead, male, cabin3) = 0.334'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '*P*(死亡，男性，舱位3) = 0.334'
- en: 'This means the probability of a randomly selected passenger being a man who
    was in a third-class cabin and didn’t survive is 33 percent. What about men in
    first class? That’s in the table too:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，随机选中的乘客是第三舱的男性且未生还的概率为33%。那么第一舱的男性呢？这个在表中也有：
- en: '*P*(dead, male, cabin1) = 0.087'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '*P*(死亡，男性，舱位1) = 0.087'
- en: This means that a selected passenger has a 9 percent chance of being a man in
    first class who died. We can see that class differences, in cabins and society,
    mattered quite a bit.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着选中的乘客有9%的机会是第一舱的男性且已死亡。我们可以看到，舱位和社会阶层的差异确实影响了生还率。
- en: 'Let’s use the table to calculate some other joint and marginal probabilities.
    First, what’s the probability of not surviving? To find it, we need to sum over
    sex and cabin:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用表格来计算一些其他的联合概率和边际概率。首先，未生还的概率是多少？要找到它，我们需要对性别和舱位进行求和：
- en: '![image](Images/02equ09.jpg)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ09.jpg)'
- en: Here we’ve introduced a shorthand notation for male/female (*M*/*F*) and cabin
    class (1, 2, 3).
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们为男性/女性(*M*/*F*)和舱位等级（1, 2, 3）引入了简写符号。
- en: 'Let’s calculate the probability of not surviving *given* the passenger was
    male, *P*(dead|*M*). To do this, we look back to [Equation 2.8](ch02.xhtml#ch02equ08),
    remembering that the “and” implies a joint probability. We rewrite [Equation 2.8](ch02.xhtml#ch02equ08)
    to solve for *P*(*B*|*A*):'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们计算一下给定乘客为男性时未生还的概率，*P*(死亡|*M*)。为此，我们回顾[方程2.8](ch02.xhtml#ch02equ08)，记住“与”意味着联合概率。我们重新写一下[方程2.8](ch02.xhtml#ch02equ08)，以便解出
    *P*(*B*|*A*)：
- en: '![image](Images/035equ01.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/035equ01.jpg)'
- en: This is sometimes used to define the conditional probability in the first place.
    Note, *P**(A*, *B*) means *P*(*A* and *B*)—both are joint probabilities. Using
    this form, the probability of not surviving given the passenger is male is
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 这有时用于首先定义条件概率。请注意，*P**(A*, *B*)表示 *P*(*A* 和 *B*)—二者都是联合概率。使用这种形式，给定乘客为男性时未生还的概率是：
- en: '![image](Images/036equ01.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/036equ01.jpg)'
- en: where *P*(dead, *M*) is the joint probability of being dead and male, and *P*(*M*)
    is the probability of being male.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 其中*P*(死亡, *M*)是死亡且为男性的联合概率，*P*(*M*)是为男性的概率。
- en: We need to be careful when thinking about the probabilities. *P*(dead, *M*)
    is not the probability of not surviving if the passenger is male. Instead, it’s
    the probability of a randomly selected passenger being a male who didn’t survive.
    What we want is *P*(dead|*M*), which is the probability of not surviving given
    a passenger was male.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 在思考这些概率时我们需要小心。*P*(死亡, *M*)并不是指乘客为男性时未存活的概率。相反，它是指随机选择的乘客是未存活的男性的概率。我们想要的是*P*(死亡|*M*)，即在乘客是男性的条件下未存活的概率。
- en: 'To get *P*(dead, *M*), we need to sum over cabin class:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 为了得到*P*(死亡, *M*)，我们需要对舱位类别求和：
- en: '![image](Images/02equ10.jpg)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ10.jpg)'
- en: 'To get *P*(*M*), we sum over survival and cabin class:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 为了得到*P*(*M*)，我们对存活与舱位类别求和：
- en: '![image](Images/02equ11.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ11.jpg)'
- en: 'To finally calculate *P*(dead|*M*):'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，为了计算*P*(死亡|*M*)：
- en: '![image](Images/036equ02.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/036equ02.jpg)'
- en: This tells us that 81 percent of the male passengers didn’t survive.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 这告诉我们，81%的男性乘客未能存活。
- en: 'A similar calculation, shown below, tells us the probability of being female
    and surviving:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的类似计算告诉我们女性并且存活的概率：
- en: '![image](Images/036equ03.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/036equ03.jpg)'
- en: We see that women were far more likely to survive than men. Here’s one instance
    where the phrase “women and children first” was actually the case. I leave it
    as an exercise for you to calculate the individual probabilities in *P*(alive|*F*).
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到女性比男性更可能存活。这是“女性和儿童优先”这一说法实际上成立的一个例子。我留给你做练习来计算*P*(存活|*F*)的个别概率。
- en: We’ve calculated *P*(dead, *M*), the probability of being a male who did not
    survive; *P*(*M*), the probability of being male; and *P*(dead|*M*), the probability
    of not surviving given being a male. Let’s do one more calculation based on [Table
    2-2](ch02.xhtml#ch02tab02). Let’s find *P*(dead or *M*), the probability of not
    surviving, or being male.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经计算了*P*(死亡, *M*)，即未存活的男性的概率；*P*(*M*)，即为男性的概率；以及*P*(死亡|*M*)，即在为男性的条件下未存活的概率。接下来，我们根据[表格
    2-2](ch02.xhtml#ch02tab02)做一次新的计算。让我们找出*P*(死亡或 *M*)，即未存活或为男性的概率。
- en: '[Equation 2.6](ch02.xhtml#ch02equ06) tells us that this is the probability:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '[公式 2.6](ch02.xhtml#ch02equ06)告诉我们这是概率：'
- en: '![image](Images/037equ01.jpg)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/037equ01.jpg)'
- en: If we look at [Equation 2.9](ch02.xhtml#ch02equ09) and [Equation 2.11](ch02.xhtml#ch02equ11),
    we see that both have the same terms, the very terms summed in [Equation 2.10](ch02.xhtml#ch02equ10).
    This is why we must subtract *P*(dead, *M*) from the calculation of *P*(dead or
    *M*) to avoid double-counting.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们查看[公式 2.9](ch02.xhtml#ch02equ09)和[公式 2.11](ch02.xhtml#ch02equ11)，我们会发现这两个公式具有相同的项，这些项正是[公式
    2.10](ch02.xhtml#ch02equ10)中求和的项。这就是为什么我们需要从*P*(死亡或 *M*)的计算中减去*P*(死亡, *M*)，以避免重复计算。
- en: 'To summarize, then:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下：
- en: The joint probability is the probability of two or more random variables having
    a specific set of values. The joint probability is often represented as a table.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 联合概率是指两个或更多随机变量具有特定取值的概率。联合概率通常用表格表示。
- en: The marginal probability for a random variable is found by summing over all
    the possible values of the other random variables.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 随机变量的边际概率是通过对其他随机变量的所有可能值求和得到的。
- en: The product rule with a conditional probability tells us how to calculate the
    joint probability given a conditional probability and an unconditional probability
    when we have two random variables. Let’s now see how to use the chain rule for
    probability to generalize that idea.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 使用条件概率的乘法法则告诉我们如何计算给定条件概率和无条件概率时，两个随机变量的联合概率。现在让我们看看如何使用概率链式法则来推广这个概念。
- en: Chain Rule for Probability
  id: totrans-245
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 概率链式法则
- en: '[Equation 2.8](ch02.xhtml#ch02equ08) tells us how to calculate the joint probability
    for two random variables in terms of the conditional probability. By using the
    *chain rule for probability*, we can expand [Equation 2.8](ch02.xhtml#ch02equ08)
    and calculate the joint probability for more than two random variables.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '[公式 2.8](ch02.xhtml#ch02equ08)告诉我们如何通过条件概率来计算两个随机变量的联合概率。通过使用*概率链式法则*，我们可以扩展[公式
    2.8](ch02.xhtml#ch02equ08)，并计算超过两个随机变量的联合概率。'
- en: 'In its generic form, the chain rule for the joint probability of *n* random
    variables is as follows:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 在其通用形式中，*n*个随机变量的联合概率的链式法则如下：
- en: '![image](Images/02equ12.jpg)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/02equ12.jpg)'
- en: Here ⋂ is used to indicate “and” for joint probabilities. [Equation 2.12](ch02.xhtml#ch02equ12)
    looks impressive, but it’s not hard to follow, as we’ll see with a few examples.
    I need to use ⋂ in the equation for the joint part of the conditional probabilities,
    but in the examples, I’ll use a comma, and you’ll see the pattern quickly enough.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 这里使用⋂表示“和”用于联合概率。[方程 2.12](ch02.xhtml#ch02equ12)看起来很复杂，但跟着几个例子走，你会发现并不难理解。我需要在条件概率的联合部分使用⋂，但在例子中，我会用逗号，你很快就会看出规律。
- en: 'Here’s how the chain rule breaks up a joint probability with three random variables:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是链式法则如何分解包含三个随机变量的联合概率：
- en: '![image](Images/038equ01.jpg)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/038equ01.jpg)'
- en: The first line says the probability of *X*, *Y*, and *Z* is the product of the
    probability of *X* given *Y* and *Z* and the probability of *Y* and *Z*. This
    is [Equation 2.8](ch02.xhtml#ch02equ08) with *X* for *B* and *Y*, *Z* for *A*.
    The second line applies the chain rule to *P*(*Y*, *Z*) to get *P*(*Y*|*Z*)*P*(*Z*).
    The rule can be applied in sequence, like a chain, hence the name.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 第一行表示*X*、*Y*和*Z*的概率是*X*在给定*Y*和*Z*情况下的条件概率与*Y*和*Z*的概率的乘积。这是[方程 2.8](ch02.xhtml#ch02equ08)，其中*X*为*B*，*Y*和*Z*为*A*。第二行对*P*(*Y*,
    *Z*)应用链式法则得到*P*(*Y*|*Z*)*P*(*Z*)。这个规则可以按顺序应用，就像链条一样，因此得名。
- en: 'What about a joint probability with four random variables? We get the following:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，四个随机变量的联合概率是什么？我们得到如下：
- en: '![image](Images/038equ02.jpg)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/038equ02.jpg)'
- en: Let’s work through an example that uses the chain rule. Say we’re very social
    and have 50 people at our party. Four of the 50 people have been to Boston in
    the fall. We pick three people at random. What’s the probability that *none* of
    them have been to Boston in the fall?
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一个使用链式法则的例子来演示。假设我们非常社交，派对上有50个人。50人中有四个在秋天去过波士顿。我们随机挑选三个人。那么，*没有一个*人去过波士顿的概率是多少？
- en: 'We’ll use *A[i]* to indicate the event of a person who has not been to Boston
    in the fall. Therefore, what we want to find is *P*(*A*[3], *A*[2], *A*[1]), the
    probability of three people all of whom have not been to Boston in the fall. The
    chain rule lets us break this probability up like so:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将用*A[i]*表示一个没有在秋天去过波士顿的人的事件。因此，我们要找的是*P*(*A*[3], *A*[2], *A*[1])，即三个都没有去过波士顿的人的概率。链式法则让我们可以将这个概率分解如下：
- en: '![image](Images/038equ04.jpg)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/038equ04.jpg)'
- en: We can work with the right-hand side of this equation intuitively. Look at *P*(*A*[1]).
    This is the probability of picking a random person in the room who has not been
    to Boston in the fall. Four of the people have, so 46 have not, and we see that
    *P*(*A*[1]) = 46/50\. Once we have a person picked, we need to know the probability
    of selecting a second person from the remaining 49, that’s *P*(*A*[2]|*A*[1])
    = 45/49\. There are only 49 people left, and we haven’t selected one of the four
    who has been to Boston in the fall. Finally, we have two people selected, so there
    are 48 people in the room, 44 of whom have not been to Boston in the fall. This
    means *P*(*A*[3]|*A*[2], *A*[1]) = 44/48.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以直观地理解这个方程的右侧。看一下*P*(*A*[1])。这是从房间里随机挑选一个没有在秋天去过波士顿的人的概率。四个人去过，因此有46个人没有去过，我们看到*P*(*A*[1])
    = 46/50。选定一个人后，我们需要知道从剩下的49个人中选一个人的概率，即*P*(*A*[2]|*A*[1]) = 45/49。剩下的只有49个人，而且我们还没有选到四个去过波士顿的人。最后，选了两个人后，房间里剩下48个人，其中44个没有去过波士顿。因此，*P*(*A*[3]|*A*[2],
    *A*[1]) = 44/48。
- en: 'We are now ready to answer our initial question. The probability of selecting
    three people from the room with none of them having been to Boston in the fall
    is as follows:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们准备好回答最初的问题了。从房间里随机选三个人且没有一个人去过秋天的波士顿的概率如下：
- en: '![image](Images/038equ03.jpg)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/038equ03.jpg)'
- en: That’s slightly more than 77 percent.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 这稍微超过了77%。
- en: 'We can check if our calculation is reasonable by simulating many draws of three
    people. This is the code we need:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过模拟多次随机抽取三个人来检查我们的计算是否合理。我们需要的代码如下：
- en: '[PRE6]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: We’ll run 100,000 simulations. Every time we select three people out of 50 who
    haven’t been to Boston in the fall, we’ll increment `nb`. We simulate selecting
    three people by choosing three random integers in the range [0, 50) and putting
    them in `s`. Then, we look at each of the three integers, asking if any are less
    than four. If any are, we say we selected a person who has been to Boston and
    set `fail` to `True`. If none of the three integers are less than four, we were
    successful with this simulation. When done, we print the fraction of simulations
    that did sample three people who never went to Boston in the fall.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将进行 100,000 次模拟。每次从 50 个没有在秋季去过波士顿的人中选择三个人时，我们将增加 `nb`。我们通过选择三个范围在 [0, 50)
    内的随机整数，并将其放入 `s` 中来模拟选择三个人。然后，我们检查这三个整数中的每一个，看看是否有小于四的。如果有，我们就说选择了一个去过波士顿的人，并将
    `fail` 设置为 `True`。如果三个整数都不小于四，那么这次模拟就是成功的。完成后，我们打印出在所有模拟中，选择了三位从未在秋季去过波士顿的人的比例。
- en: Running this code produced
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 运行这段代码得出了
- en: '[PRE7]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: which is close enough to our calculated value to give us confidence that we
    found the correct answer.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 这个结果足够接近我们计算的值，令我们相信我们找到了正确的答案。
- en: Summary
  id: totrans-268
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter introduced the fundamentals of probability. We explored basic concepts
    of probability, including sample spaces and random variables. We followed with
    some examples of how poor humans can be at probability. After that, we considered
    the rules of probability, with examples. The rules led us to joint and marginal
    probabilities and finally to the chain rule for probabilities.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了概率的基础知识。我们探讨了概率的基本概念，包括样本空间和随机变量。接着，通过一些例子说明了人类在概率方面的不足。然后，我们学习了概率的规则，并通过示例进行说明。这些规则引导我们进入了联合概率和边际概率，最终探讨了概率的链式法则。
- en: The next chapter continues our tour of probability, starting with probability
    distributions and how to sample from them and ending with Bayes’ theorem, which
    shows us correct way to compare conditional probabilities.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将继续探索概率，首先介绍概率分布及其采样方法，最后讲解贝叶斯定理，它展示了比较条件概率的正确方法。
