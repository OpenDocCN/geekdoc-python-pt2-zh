<html><head></head><body>
<h2 class="h2" id="ch05"><span epub:type="pagebreak" id="page_79"/><strong><span class="blue"><span class="big">5</span></span><br/>PREPARING THE SPACE STATION EQUIPMENT</strong></h2>
<div class="image1"><img src="../images/common01.jpg" alt="image"/></div>
<p class="noindent">Now that the space station walls are in place, we can start installing the equipment. We’ll need detailed information about the different pieces of equipment, including the furniture, survival systems, and experimental machinery. In this chapter, you’ll add information about all the items on the space station, including their images and descriptions. You’ll also experiment with designing your own room and view it using the <em>Explorer</em> program you created in <a href="ch04.xhtml#ch04">Chapter 4</a>.</p>
<h3 class="h3" id="lev73"><span epub:type="pagebreak" id="page_80"/><strong>CREATING A SIMPLE PLANETS DICTIONARY</strong></h3>
<p class="noindent">To store the information about the space station equipment, we’ll use a programming concept called dictionaries. A <em>dictionary</em> is a bit like a list but with a built-in search engine. Let’s take a closer look at how it works.</p>
<h4 class="h4" id="lev74"><strong>UNDERSTANDING THE DIFFERENCE BETWEEN A LIST AND A DICTIONARY</strong></h4>
<p class="noindent">As with a paper dictionary, you can use a word or phrase to look up information in a Python dictionary. That word or phrase is called the <em>key</em>, and the information linked to the key is called the <em>value</em>. Unlike in a paper dictionary, the entries in a Python dictionary can be in any order. They don’t have to be alphabetical. Python can go directly to the entry you need, wherever it is.</p>
<p class="indent">Imagine you have a list that contains information about previous space missions. You could get the first item from that list by using this line:</p>
<pre><span class="purple">print</span>(mission_info[0])</pre>
<p class="indent">If <code>mission_info</code> was a dictionary instead of a list, you could use a mission name instead of an index number to get the information on that mission, like this:</p>
<pre><span class="purple">print</span>(mission_info[<span class="green">"Apollo 11"</span>])</pre>
<p class="indent">The key can be a word or phrase but can also be a number. We’ll start by using words because it’s easier to understand the difference between a list and a dictionary that way.</p>
<h4 class="h4" id="lev75"><strong>MAKING AN ASTRONOMY CHEAT SHEET DICTIONARY</strong></h4>
<p class="noindent">All astronauts need a good understanding of the solar system, so let’s learn about the planets as we build our first dictionary. We’ll use the planet names as the keys and connect each name to information about that planet.</p>
<p class="indent">Take a look at <a href="ch05.xhtml#ch05list1">Listing 5-1</a>, which creates a dictionary called <code>planets</code>. When you make a dictionary, you use curly brackets <code>{}</code> to mark the start and end of it, instead of the square brackets you use for a list.</p>
<p class="indent">Each entry in the dictionary is made up of the key, followed by a colon and then the information for that entry. As with a list, we separate the entries with commas and put double quotes around pieces of text.</p>
<p class="indent">Open a new file in IDLE (<strong>File</strong> <span class="ent">▸</span> <strong>New File</strong>) and enter the following program. Save it as <em>listing5-1.py</em>.</p>
<p class="margin"><em>listing5-1.py</em></p>
<pre>   planets = { <span class="green">"Mercury"</span>: <span class="green">"The smallest planet, nearest the Sun",</span><br/>               <span class="green">"Venus"</span>: <span class="green">"Venus takes 243 days to rotate"</span>,<br/>               <span class="green">"Earth"</span>: <span class="green">"The only planet known to have native life"</span>,<br/>               <span class="green">"Mars"</span>: <span class="green">"The Red Planet is the second smallest planet"</span>,<br/><span epub:type="pagebreak" id="page_81"/>               <span class="green">"Jupiter"</span>: <span class="green">"The largest planet, Jupiter is a gas giant"</span>,<br/>               <span class="green">"Saturn"</span>: <span class="green">"The second largest planet is a gas giant"</span>,<br/>               <span class="green">"Uranus"</span>: <span class="green">"An ice giant with a ring system"</span>,<br/>               <span class="green">"Neptune"</span>: <span class="green">"An ice giant and farthest from the Sun"</span><br/>               }<br/><br/><span class="ent">➊</span> <span class="orange">while True</span>:<br/><span class="ent">➋</span>     query = <span class="purple">input</span>(<span class="green">"Which planet would you like information on? "</span>)<br/><span class="ent">➌</span>     <span class="purple">print</span>(planets[query])</pre>
<p class="listing" id="ch05list1"><em>Listing 5-1: Your first dictionary program</em></p>
<p class="indent">This program doesn’t use Pygame Zero, so you can run it by clicking <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong> at the top of the IDLE window. (It will still work if you run it using <code>pgzrun</code>, but it’s easier to use the menu.) When you run the program, it asks you which planet you want information on using the <code>input()</code> built-in function <span class="ent">➋</span>. Try entering <span class="codestrong">Earth</span> or <span class="codestrong">Jupiter</span> for the planet name.</p>
<pre><span class="blue">Which planet would you like information on?</span> Earth<br/><span class="blue">The only planet known to have native life</span><br/><span class="blue">Which planet would you like information on?</span> Jupiter<br/><span class="blue">The largest planet, Jupiter is a gas giant</span></pre>
<p class="indent">Whichever planet name you enter is stored in the variable <code>query</code>. That variable is then used to look up the information for that planet in the <code>planets</code> dictionary <span class="ent">➌</span>. Instead of using an index number inside the square brackets as we did with a list, we use the word we entered to get the information, and that word is stored in the variable <code>query</code>.</p>
<p class="indent">In Python, we can use a <code>while</code> <span class="ent">➊</span> loop to repeat a set of instructions. Unlike a <code>for</code> loop, which we use to repeat a certain number of times, a <code>while</code> loop usually repeats until something changes. Often in a game, the <code>while</code> command will check a variable to decide whether to keep repeating instructions. For example, the instruction <code>while lives &gt; 0</code> could keep a game going until the player runs out of lives. When the <code>lives</code> variable changes to 0, the instructions in the loop would stop repeating.</p>
<p class="indent">The <code>while</code> <code>True</code> command we use in <em>listing5-1.py</em> will keep repeating forever, because it means “while <code>True</code> is <code>True</code>,” which is always. For this <code>while</code> <code>True</code> command to work, make sure you capitalize <code>True</code> and place a colon at the end of the line.</p>
<p class="indent">Under the <code>while</code> command, we use four spaces to indent the instructions that should repeat. Here, we’ve indented the lines that ask you for a planet name and then give you the planet information, so they’re the instructions that repeat. After you enter a planet name and get the information, the program asks you for another planet name, and another, forever. Or until you stop the program by pressing <small>CTRL</small>-C, at least.</p>
<p class="indent">Although this program works, it isn’t complete yet. You might get an unhelpful error if you enter a planet name that isn’t in the dictionary. Let’s fix the code so it returns a useful message instead.</p>
<h4 class="h4" id="lev76"><span epub:type="pagebreak" id="page_82"/><strong>ERROR-PROOFING THE DICTIONARY</strong></h4>
<p class="noindent">When you enter a key that isn’t in the dictionary, you’ll see an error message. Python looks for an exact match. So, if you try to look up something that isn’t in the dictionary or make even a tiny spelling mistake, you won’t get the information you want.</p>
<p class="indent">Dictionary keys, like variable names, are case sensitive, so if you type <code>earth</code> instead of <code>Earth</code>, the program will crash. If you enter a planet that doesn’t exist, this is what happens:</p>
<pre><span class="blue">Which planet would you like information on?</span> Pluto<br/><span class="red">Traceback (most recent call last):</span><br/>  <span class="red">File "C:\Users\Sean\Documents\Escape\listing5-1.py", line 13, in &lt;module&gt;</span><br/>    <span class="red">print(planets[query])</span><br/><span class="red">KeyError: 'Pluto'</span><br/><span class="brown">&gt;&gt;&gt;</span></pre>
<p class="indent">Poor Pluto! After 76 years of service, it was disqualified as a planet in 2006, so it’s not in our <code>planets</code> dictionary.</p>
<div class="sidebar">
<p class="sidebart" id="ch05sb1"><strong>TRAINING MISSION #1</strong></p>
<p class="spara">Can you add an entry for Pluto in the dictionary? Pay special attention to the position of the quotes, colon, and comma. You can add it at any position in the dictionary.</p>
</div>
<p class="indent">When the program looks for an item in the dictionary that isn’t there, it stops the program and drops you back at the Python shell prompt. To avoid this, we need the program to check whether the word entered is one of the keys in the dictionary before it tries to use it.</p>
<p class="indent">You can see which keys are in the dictionary by entering the dictionary name followed by a dot and <code>keys()</code>. The technical jargon for this is a <em>method</em>. Roughly speaking, a method is a set of instructions that you can attach to a piece of data using a period. Run the following code in the Python shell:</p>
<pre><span class="brown">&gt;&gt;&gt;</span> <span class="purple">print</span>(planets.keys())<br/><span class="blue">dict_keys(['Mars', 'Pluto', 'Jupiter', 'Earth', 'Uranus', 'Saturn', 'Mercury',<br/>'Neptune', 'Venus'])</span></pre>
<p class="indent">You might notice something odd here. When I completed Training Mission #1, I added Pluto to the dictionary as the last item. But in this output, it’s in second place in my list of keys. When you add items to a list, they’re placed at the end, but in a dictionary, that is not always the case. It depends on which version of Python you’re using. (The latest version does keep dictionary items in the same order you added them.) As mentioned earlier, the order of the keys in the dictionary doesn’t matter, though. Python figures out where the keys are in the dictionary, so you never need to think about it.</p>
<p class="indent"><span epub:type="pagebreak" id="page_83"/>To stop the program from crashing when a user asks for information on a planet that isn’t in the dictionary, modify your program with the new lines shown in <a href="ch05.xhtml#ch05list2">Listing 5-2</a>.</p>
<p class="margin"><em>listing5-2.py</em></p>
<pre>   <span class="gray">--<span class="codeitalic1">snip</span>--</span><br/>   <span class="gray">while True:</span><br/>       <span class="gray">query = input("Which planet would you like information on? ")</span><br/><span class="ent">➊</span>     <span class="orange">if</span> query <span class="orange">in</span> planets.keys():<br/><span class="ent">➋</span>         <span class="purple">print</span>(planets[query])<br/>       <span class="orange">else</span>:<br/><span class="ent">➌</span>         <span class="purple">print</span>(<span class="green">"No data available! Sorry!"</span>)</pre>
<p class="listing" id="ch05list2"><em>Listing 5-2: Error proofing the dictionary lookup</em></p>
<p class="indent">Save the program as <em>listing5-2.py</em>, and run it by clicking <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong>. Check that it works by entering a planet correctly, and then enter another planet that isn’t in the list of keys. Here’s an example:</p>
<pre><span class="blue">Which planet would you like information on?</span> Venus<br/><span class="blue">Venus takes 243 days to rotate</span><br/><span class="blue">Which planet would you like information on?</span> Tatooine<br/><span class="blue">No data available! Sorry!</span></pre>
<p class="indent">We protect our program from crashing by making it check whether the key in <code>query</code> exists in the dictionary before the program tries to use it <span class="ent">➊</span>. If the key does exist, we use the query as we did before <span class="ent">➋</span>. Otherwise, we send a message to users telling them that we don’t have that information in our dictionary <span class="ent">➌</span>. Now the program is much friendlier.</p>
<h4 class="h4" id="lev77"><strong>PUTTING LISTS INSIDE DICTIONARIES</strong></h4>
<p class="noindent">Our planet dictionary is a bit limited at the moment. What if we want to add extra information, such as whether the planet has rings and how many moons it has? To do so, we can use a list to store multiple pieces of information about a planet and then put that list inside the dictionary.</p>
<p class="indent">For example, here is a new entry for Venus:</p>
<pre><span class="green">"Venus"</span>: [<span class="green">"Venus takes 243 days to rotate"</span>, <span class="orange">False</span>, 0]</pre>
<p class="indent">The square brackets mark the start and end of the list, and there are three items in the list: a short description, a <code>True</code> or <code>False</code> value that indicates whether or not the planet has rings, and the number of moons it has. Because Venus doesn’t have rings, the second entry is <code>False</code>. It also doesn’t have any moons, so the third entry is 0.</p>
<div class="note">
<p class="notet"><strong><span class="notes">RED ALERT</span></strong></p>
<p class="notep"><span class="codeitalic">True</span> <em>and</em> <span class="codeitalic">False</span> <em>values need to start with a capital letter and shouldn’t be in quotes. The words turn orange when you type them correctly in IDLE.</em></p>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_84"/>Change your dictionary code so each key has a list, as shown in <a href="ch05.xhtml#ch05list3">Listing 5-3</a>, keeping the rest of the code the same. Remember that dictionary entries are separated by commas, so there’s a comma after the closing bracket for all the lists except the last one. Save your updated program as <em>listing5-3.py</em>.</p>
<p class="indent">I’ve slipped in information for Pluto too. Some speculate that Pluto might have rings, and exploration continues. By the time you read this book, our understanding of Pluto might have changed.</p>
<p class="margin"><em>listing5-3.py</em></p>
<pre><span class="gray">planets = {</span> <span class="green">"Mercury"</span>: [<span class="green">"The smallest planet, nearest the Sun"</span>, <span class="orange">False</span>, 0],<br/>            <span class="green">"Venus"</span>: [<span class="green">"Venus takes 243 days to rotate"</span>, <span class="orange">False</span>, 0],<br/>            <span class="green">"Earth"</span>: [<span class="green">"The only planet known to have native life"</span>, <span class="orange">False</span>, 1],<br/>            <span class="green">"Mars"</span>: [<span class="green">"The second smallest planet"</span>, <span class="orange">False</span>, 2],<br/>            <span class="green">"Jupiter"</span>: [<span class="green">"The largest planet, a gas giant"</span>, <span class="orange">True</span>, 67],<br/>            <span class="green">"Saturn"</span>: [<span class="green">"The second largest planet is a gas giant"</span>, <span class="orange">True</span>, 62],<br/>            <span class="green">"Uranus"</span>: [<span class="green">"An ice giant with a ring system"</span>, <span class="orange">True</span>, 27],<br/>            <span class="green">"Neptune"</span>: [<span class="green">"An ice giant and farthest from the Sun"</span>, <span class="orange">True</span>, 14],<br/>            <span class="green">"Pluto"</span>: [<span class="green">"Largest dwarf planet in the Solar System"</span>, <span class="orange">False</span>, 5]<br/>            <span class="gray">}</span><br/><span class="gray">--<span class="codeitalic1">snip</span>--</span></pre>
<p class="listing" id="ch05list3"><em>Listing 5-3: Putting a list in a dictionary</em></p>
<p class="indent">Run the program by selecting <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong>. Now when you ask for information on a planet, the program should display the entire list for that planet:</p>
<pre><span class="blue">Which planet would you like information on?</span> Venus<br/><span class="blue">['Venus takes 243 days to rotate', False, 0]</span><br/><span class="blue">Which planet would you like information on?</span> Mars<br/><span class="blue">['The second smallest planet', False, 2]</span></pre>
<h4 class="h4" id="lev78"><strong>EXTRACTING INFORMATION FROM A LIST INSIDE A DICTIONARY</strong></h4>
<p class="noindent">We know how to get a list of information from a dictionary, so the next step is to get individual pieces of information from that list. For example, the <code>False</code> entry doesn’t mean much by itself. If we can separate it from the list, we can add an explanation beside it so the results are easier to understand. We previously used lists inside <em>lists</em> for the room map in <a href="ch04.xhtml#ch04">Chapter 4</a>. Now, as then, we’ll use index numbers to get items from a list in a <em>dictionary</em>.</p>
<p class="indent">Because <code>planets[query]</code> is the entire list, we can see just the description (the first item in the list) by using <code>planets[query][0]</code>. We can see whether it has rings or not by using <code>planets[query][1]</code>. Briefly, here is what we’re doing:</p>
<ol>
<li class="noindent">We’re using the planet name, stored in the variable <code>query</code>, to access a particular list from the <code>planets</code> dictionary.</li>
<li class="noindent">We’re using an index number to take an individual item from that list.</li>
</ol>
<p class="indent"><span epub:type="pagebreak" id="page_85"/>Modify your program to look like <a href="ch05.xhtml#ch05list4">Listing 5-4</a>. As before, change only the lines that are not grayed out. Save your program as <em>listing5-4.py</em>, and run it by clicking <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong>.</p>
<p class="margin"><em>listing5-4.py</em></p>
<pre>   <span class="gray">--<span class="codeitalic1">snip</span>--</span><br/>   <span class="gray">while True:</span><br/>       <span class="gray">query = input("Which planet would you like information on? ")</span><br/>       <span class="gray">if query in planets.keys():</span><br/><span class="ent">➊</span>         <span class="purple">print</span>(planets[query][0])<br/><span class="ent">➋</span>         <span class="purple">print</span>(<span class="green">"Does it have rings? "</span>, planets[query][1])<br/>       <span class="gray">else:</span><br/>           <span class="gray">print("Databanks empty. Sorry!")</span></pre>
<p class="listing" id="ch05list4"><em>Listing 5-4: Displaying information from the list stored in the dictionary</em></p>
<p class="indent">When you run the <em>listing5-4.py</em> program, you should see something like the following:</p>
<pre><span class="blue">Which planet would you like information on?</span> Earth<br/><span class="blue">The only planet known to have native life</span><br/><span class="blue">Does it have rings?  False</span><br/><span class="blue">Which planet would you like information on?</span> Saturn<br/><span class="blue">The second largest planet is a gas giant</span><br/><span class="blue">Does it have rings?  True</span></pre>
<p class="indent">This should work for every planet in the dictionary!</p>
<p class="indent">When you enter the name of a planet that’s in the dictionary, the program now prints the first item from its list of information, which is the description <span class="ent">➊</span>. On the next line, the program asks itself whether that planet has rings and then shows you the <code>True</code> or <code>False</code> answer, which is the second item in that planet’s list of information <span class="ent">➋</span>. You can display some text and some data using the same <code>print()</code> instruction, by separating them with a comma. The display is much clearer than printing the entire list, and the information is easier to understand.</p>
<div class="sidebar">
<p class="sidebart" id="ch05sb2"><strong>TRAINING MISSION #2</strong></p>
<p class="spara">Can you modify the program to also tell you how many moons the planet has?</p>
</div>
<h3 class="h3" id="lev79"><strong>MAKING THE SPACE STATION OBJECTS DICTIONARY</strong></h3>
<p class="noindent">Let’s put our knowledge of how to use dictionaries, and lists inside dictionaries, to use in the space station. With all the furniture, life support equipment, tools, and personal effects required on the space station, there’s a lot of information to keep track of. We’ll use a dictionary called <code>objects</code> to store information about all the different items in the game.</p>
<p class="indent"><span epub:type="pagebreak" id="page_86"/>We’ll use numbers as the keys for the objects. It’s simpler than using a word for each object. Also, using numbers makes it easier to understand the room map if you want to print it as we did in <a href="ch04.xhtml#ch04">Chapter 4</a>. There’s less risk of mistyping, too. When we create the code for the puzzles later, it’ll be less obvious what the solution is, which means there will be fewer spoilers if you’re building the game before playing it.</p>
<p class="indent">You might remember that we used the numbers 0, 1, and 2 to represent floor tiles, wall pillars, and soil in <a href="ch04.xhtml#ch04">Chapter 4</a>. We’ll continue using those numbers for those items, and the rest of the objects will use numbers 3 to 81.</p>
<p class="indentb">Each entry in the dictionary is a list containing information about the item, similar to how we made the <code>planets</code> dictionary earlier in this chapter. The lists contain the following information for each object:</p>
<p class="hang"><strong>An object image file</strong> Different objects can use the same image file. For example, all the access cards use the same image.</p>
<p class="hang"><strong>A shadow image file</strong> We use shadows to enhance the 3D perspective in the game. The two standard shadows are <em>images.full_shadow</em>, which fills a full tile space and is for larger objects, and <em>images.half_shadow</em>, which fills half a tile space for smaller objects. Objects with a distinctive outline, such as the cactus, have their own shadow image file that is used only for that object. Some items, like the chair, have the shadow within the image file. Some items have no shadow, like the crater and any items the player can carry. When an image has no shadow, we write <code>None</code> where its shadow filename belongs in the dictionary. The word <code>None</code> is a special data type in Python. Like with <code>True</code> and <code>False</code>, you don’t need any quotes around it, and it should start with a capital letter. When you enter it correctly, <code>None</code> turns orange in the code.</p>
<p class="hang"><strong>A long description</strong> A long description is displayed when you examine or select an object while playing the game. Some of the long descriptions include clues, and others simply describe the environment.</p>
<p class="hang"><strong>A short description</strong> Typically just a few words, such as “an access card,” a short description is shown onscreen when you do something with the object while playing the game. For example, “You have dropped an access card.” A short description is only required for items that the player can pick up or use, such as an access card or the vending machine.</p>
<p class="indentt">The game can reuse items in the <code>objects</code> dictionary. For example, if a room is made of 60 or more identical wall pillars, the game can just reuse the same wall pillar object. It only needs to be in the dictionary once.</p>
<p class="indent">There are some items that use the same image files but have other differences, which means we must store them separately in the dictionary. For example, the access cards have different descriptions depending on who they belong to, and the doors have different descriptions to tell you which key to use. Each access card and door has its own entry in the <code>objects</code> dictionary.</p>
<h4 class="h4" id="lev80"><span epub:type="pagebreak" id="page_87"/><strong>ADDING THE FIRST OBJECTS IN ESCAPE</strong></h4>
<p class="noindent">Open <em>listing4-3.py</em>, which you created in <a href="ch04.xhtml#ch04">Chapter 4</a>. This listing contains the game map and the code to generate the room map. We’ll add to this program to continue building the <em>Escape</em> game.</p>
<p class="indent">First, we need to set up some additional variables. Before the adventure begins, a research craft, called the Poodle lander, crash-lands on the planet surface. We’ll store coordinates for a random crash site in these new variables. We’ll add these variables now because the map object (number 27) will require them for its description.</p>
<p class="indent">Add the new lines in <a href="ch05.xhtml#ch05list5">Listing 5-5</a> to the <code>VARIABLES</code> section, marked out with a hashed box, in your existing <em>listing4-3.py</em> file. I recommend adding them at the end of your other variables, just above where the <code>MAP</code> section begins, so your listing and my listing are consistent. Save your program as <em>listing5-5.py</em>. The program won’t do anything new if you run it now, but if you want to try it, enter <span class="codestrong">pgzrun listing5-5.py</span>.</p>
<p class="margin"><em>listing5-5.py</em></p>
<pre><span class="gray">--<span class="codeitalic1">snip</span>--</span><br/><span class="gray">###############</span><br/><span class="gray">## VARIABLES ##</span><br/><span class="gray">###############</span><br/><br/><span class="gray">--<span class="codeitalic1">snip</span>--</span><br/><br/><span class="gray">DEMO_OBJECTS = [images.floor, images.pillar, images.soil]</span><br/><br/>LANDER_SECTOR = random.randint(1, 24)<br/>LANDER_X = random.randint(2, 11)<br/>LANDER_Y = random.randint(2, 11)<br/><br/><span class="gray">###############</span><br/><span class="gray">##    MAP    ##</span><br/><span class="gray">###############</span><br/><span class="gray">--<span class="codeitalic1">snip</span>--</span></pre>
<p class="listing" id="ch05list5"><em>Listing 5-5: Adding the crash site location variables</em></p>
<p class="indent">These new instructions create variables to remember the sector (or room number) the Poodle landed on, and its <em>x</em> and <em>y</em> position in that sector. The instructions use the <code>random.randint()</code> function, which picks a random number between the two numbers you give it. These instructions run once at the start of the game, so the lander location is different each time you play but doesn’t change during the game.</p>
<p class="indent">Now let’s add the first chunk of the objects data, shown in <a href="ch05.xhtml#ch05list6">Listing 5-6</a>. This section provides the data for objects 0 to 12. Because the player cannot pick up or use these objects, they don’t have a short description.</p>
<p class="indent">Place this section of the listing just above the <code>MAKE MAP</code> section of your existing program (<em>listing5-5.py</em>). To help you find your way around the listing, you can press <small>CTRL</small>-F in IDLE to search for a particular word or phrase. For example, try searching for <em>make map</em> to see where to start adding the code in <a href="ch05.xhtml#ch05list6">Listing 5-6</a>. After searching, click Close on the search dialog box. <span epub:type="pagebreak" id="page_88"/>Remember that if you get lost in the listing, you can always refer to the complete game listing in <a href="appa.xhtml#appa">Appendix A</a>.</p>
<p class="indent">If you prefer not to type the data, use the file <em>data-chapter5.py</em>, in the listings folder. It contains the <code>objects</code> dictionary, so you can copy and paste it into your program. You can start by just pasting the first 12 items.</p>
<p class="margin"><em>listing5-6.py</em></p>
<pre><span class="gray">--<span class="codeitalic1">snip</span>--</span><br/><br/><span class="gray">assert len(GAME_MAP)-1 == MAP_SIZE, "Map size and GAME_MAP don't match"</span><br/><br/><span class="red">###############</span><br/><span class="red">##  OBJECTS  ##</span><br/><span class="red">###############</span><br/><br/>objects = {<br/>    0: [images.floor, <span class="orange">None</span>, <span class="green">"The floor is shiny and clean"</span>],<br/>    1: [images.pillar, images.full_shadow, <span class="green">"The wall is smooth and cold"</span>],<br/>    2: [images.soil, <span class="orange">None</span>, <span class="green">"It's like a desert. Or should that be dessert?"</span>],<br/>    3: [images.pillar_low, images.half_shadow, <span class="green">"The wall is smooth and cold"</span>],<br/>    4: [images.bed, images.half_shadow, <span class="green">"A tidy and comfortable bed"</span>],<br/>    5: [images.table, images.half_shadow, <span class="green">"It's made from strong plastic."</span>],<br/>    6: [images.chair_left, <span class="orange">None</span>, <span class="green">"A chair with a soft cushion"</span>],<br/>    7: [images.chair_right, <span class="orange">None</span>, <span class="green">"A chair with a soft cushion"</span>],<br/>    8: [images.bookcase_tall, images.full_shadow,<br/>        <span class="green">"Bookshelves, stacked with reference books"</span>],<br/>    9: [images.bookcase_small, images.half_shadow,<br/>        <span class="green">"Bookshelves, stacked with reference books"</span>],<br/>    10: [images.cabinet, images.half_shadow,<br/>         <span class="green">"A small locker, for storing personal items"</span>],<br/>    11: [images.desk_computer, images.half_shadow,<br/>         <span class="green">"A computer. Use it to run life support diagnostics"</span>],<br/>    12: [images.plant, images.plant_shadow, <span class="green">"A spaceberry plant, grown here"</span>]<br/>    }<br/><br/><span class="gray">###############</span><br/><span class="gray">## MAKE MAP  ##</span><br/><span class="gray">###############</span><br/><span class="gray">--<span class="codeitalic1">snip</span>--</span></pre>
<p class="listing" id="ch05list6"><em>Listing 5-6: Adding the first objects</em></p>
<p class="indent">Remember that the colors of the code can help you spot errors. If your text sections aren’t green, you’ve left out the opening double quotes. If there is too much green, you might have forgotten the closing double quotes. Some of the lists continue on the next line, and Python knows the list isn’t complete until it sees the closing bracket. If you struggle to get any of the listings to work, you can use my version of the code (see “<a href="ch01.xhtml#ch01sb1">Using My Example Listings</a>” on <a href="ch01.xhtml#page_21">page 21</a>) and pick up the project from any point.</p>
<p class="indent"><a href="ch05.xhtml#ch05list6">Listing 5-6</a> looks similar to our earlier <code>planets</code> dictionary: we use curly brackets to mark the start and end of the dictionary, and each entry in the dictionary is a list so it is inside square brackets. The main difference is that this time the key is a number instead of a word.</p>
<p class="indent"><span epub:type="pagebreak" id="page_89"/>Save your new program as <em>listing5-6.py</em>. This program uses Pygame Zero for the graphics, so you need to run your new program by entering <span class="codestrong">pgzrun listing5-6.py</span>. It should work the same as it did previously because we’ve added new data but haven’t done anything with that data yet. It’s worth running the program anyway, because if you see an error message in the command line window, you can fix the new code before you go any further.</p>
<h4 class="h4" id="lev81"><strong>VIEWING OBJECTS WITH THE SPACE STATION EXPLORER</strong></h4>
<p class="noindent">To see the objects, we have to tell the game to use the new dictionary. Change the following line in the <code>EXPLORER</code> part of the program from this:</p>
<pre>image_to_draw = DEMO_OBJECTS[room_map[y][x]]</pre>
<p class="noindent">to the following:</p>
<pre><span class="gray">image_to_draw =</span> objects<span class="gray">[room_map[y][x]]</span>[0]</pre>
<p class="indent">This small change makes the <em>Explorer</em> code use our new <code>objects</code> dictionary instead of the <code>DEMO_OBJECTS</code> list we told it to use previously.</p>
<p class="indent">Notice that we’re now using lowercase letters instead of capital letters. In this program, I use capital letters for constants whose values won’t change. The <code>DEMO_OBJECTS</code> list never changed: it was only used for looking up the image filenames. But the <code>objects</code> dictionary will sometimes have its content changed as the game is played.</p>
<p class="indent">The other difference is that <code>[0]</code> is on the end of the line now. This is because when we pull an item from the <code>objects</code> dictionary, it gives us an entire list of information. But we just want to use the image here, which is the first item in that list, so we use the index number <code>[0]</code> to extract it.</p>
<p class="indent">Save the program and run it again, and you should see that the rooms look the same as before. That’s because we haven’t added any new objects yet, and we kept the object numbers for the floor, wall, and soil the same as the index numbers we were using for them before.</p>
<h4 class="h4" id="lev82"><strong>DESIGNING A ROOM</strong></h4>
<p class="noindent">Let’s add some items to the room display. In the <code>EXPLORER</code> section of the code, add the new lines shown in <a href="ch05.xhtml#ch05list7">Listing 5-7</a>:</p>
<p class="margin"><em>listing5-7.py</em></p>
<pre><span class="gray">--<span class="codeitalic1">snip</span>--</span><br/><br/><span class="gray">###############</span><br/><span class="gray">## EXPLORER  ##</span><br/><span class="gray">###############</span><br/><br/><span class="gray">def draw():</span><br/>    <span class="gray">global room_height, room_width, room_map</span><br/>    <span class="gray">print(current_room)</span><br/>    <span class="gray">generate_map()</span><br/><span epub:type="pagebreak" id="page_90"/>    <span class="gray">screen.clear()</span><br/>    room_map[2][4] = 7<br/>    room_map[2][6] = 6<br/>    room_map[1][1] = 8<br/>    room_map[1][2] = 9<br/>    room_map[1][8] = 12<br/>    room_map[1][9] = 9<br/><span class="gray">--<span class="codeitalic1">snip</span>--</span></pre>
<p class="listing" id="ch05list7"><em>Listing 5-7: Adding some objects in the room display</em></p>
<p class="indent">These new instructions add objects to the <code>room_map</code> list at different positions before the room is displayed.</p>
<p class="indent">Remember that <code>room_map</code> uses the y-coordinate before the x-coordinate. The first index number says how far from the back of the room the objects are; the smaller the number the nearer to the back they are. The smallest useful number is usually 1 because the wall is in row 0.</p>
<p class="indent">The second number says how far across the room the objects are, from left to right. There’s usually a wall in column 0, so 1 is the smallest useful number for this position too.</p>
<p class="indent">The number on the other side of the equal sign is the key for a particular object. You can check which object each number represents by looking at the <code>objects</code> dictionary in <a href="ch05.xhtml#ch05list6">Listing 5-6</a>.</p>
<p class="indent">So this line:</p>
<pre>room_map[1][1] = 8</pre>
<p class="noindent">places object 8 (a tall bookcase) into the top-left corner of the room. And this line:</p>
<pre>room_map[2][6] = 6</pre>
<p class="noindent">places a chair (object 6) three rows from the top and seven positions from the left. (Remember that index numbers start at 0.)</p>
<p class="indent">Save your program as <em>listing5-7.py</em> and enter <span class="codestrong">pgzrun listing5-7.py</span> to run it. <a href="ch05.xhtml#ch05fig1">Figure 5-1</a> shows what you should see now.</p>
<div class="image"><a id="ch05fig1"/><img src="../images/fig5-1.jpg" alt="image"/></div>
<p class="figcap"><em>Figure 5-1: Cozy! Some objects displayed in the space station</em> Explorer <em>program</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_91"/>Because the <em>Explorer</em> program is just a demo, some things don’t work yet. For example, some objects have a black square under them because there’s no floor tile there. Also, all the rooms look the same because we’ve coded the objects into the <code>EXPLORER</code> section, so they appear in every room we display. This means you can’t view all the rooms anymore, because the objects won’t fit in some of them. As a result, you can’t use the arrow keys to look at all the rooms. The program doesn’t display wide objects such as the bed correctly yet, either. We’ll fix all of these problems later, but we can continue building and testing the space station in the meantime.</p>
<div class="sidebar">
<p class="sidebart" id="ch05sb3"><strong>TRAINING MISSION #3</strong></p>
<p class="spara">Experiment with the code you’ve added to the <em>Explorer</em> program to reposition the furniture to your liking. Playing with this code is a great way to learn how to position objects in the rooms. If you want to play with a bigger room, change the value of <code>current_room</code> in the <code>VARIABLES</code> section from 31 to 40 (which is the biggest room in the game). Save your program as <em>mission5-3.py</em> and run it using <code>pgzrun mission5-3.py</code>. You’ll need to keep a safe copy of the existing <em>Explorer</em> code (<em>listing5-7.py</em>) to use in Training Mission #4.</p>
</div>
<h4 class="h4" id="lev83"><strong>ADDING THE REST OF THE OBJECTS</strong></h4>
<p class="noindent">So far we’ve added objects 0 to 12 to the <code>objects</code> dictionary. There are 81 objects in total in the game, so let’s add the rest now by adding the new lines in <a href="ch05.xhtml#ch05list8">Listing 5-8</a>. Remember to add a comma after item 12 before adding the rest of the items in the dictionary.</p>
<p class="indent">When the same filename or a similar description is used for more than one object, you can just copy and paste it. To copy code, click and hold down the mouse button at the beginning of the chunk of code, move the mouse to highlight it, and then press <small>CTRL</small>-C. Then click the mouse where you want to paste that code and press <small>CTRL</small>-V. Remember too that you can copy and paste the whole dictionary from the <em>data-chapter5.py</em> file if you want to save time typing.</p>
<p class="indent">Save the program as <em>listing5-8.py</em>. You can test that the program still works by entering <span class="codestrong">pgzrun listing5-8.py</span>, although you won’t see anything new yet.</p>
<p class="indent">This is <a href="ch05.xhtml#ch05list8">Listing 5-8</a>:</p>
<p class="margin"><em>listing5-8.py</em></p>
<pre>   <span class="gray">###############</span><br/>   <span class="gray">##  OBJECTS  ##</span><br/>   <span class="gray">###############</span><br/><br/>   <span class="gray">objects = {</span><br/>       <span class="gray">0: [images.floor, None, "The floor is shiny and clean"],</span><br/>       <span class="gray">--<span class="codeitalic1">snip</span>--</span><br/><br/>       <span class="gray">12: [images.plant, images.plant_shadow, "A spaceberry plant, grown locally"]</span>,<br/><span epub:type="pagebreak" id="page_92"/><span class="ent">➊</span>     13: [images.electrical1, images.half_shadow,<br/>            <span class="green">"Electrical systems used for powering the space station"</span>],<br/>       14: [images.electrical2, images.half_shadow,<br/>            <span class="green">"Electrical systems used for powering the space station"</span>],<br/>       15: [images.cactus, images.cactus_shadow, <span class="green">"Ouch! Careful on the cactus!"</span>],<br/>       16: [images.shrub, images.shrub_shadow,<br/>            <span class="green">"A space lettuce. A bit limp, but amazing it's growing here!"</span>],<br/>       17: [images.pipes1, images.pipes1_shadow, <span class="green">"Water purification pipes"</span>],<br/>       18: [images.pipes2, images.pipes2_shadow,<br/>            <span class="green">"Pipes for the life support systems"</span>],<br/>       19: [images.pipes3, images.pipes3_shadow,<br/>            <span class="green">"Pipes for the life support systems"</span>],<br/><span class="ent">➋</span>     20: [images.door, images.door_shadow, <span class="green">"Safety door. Opens automatically \</span><br/>   <span class="green">for astronauts in functioning spacesuits."</span>],<br/>       21: [images.door, images.door_shadow, <span class="green">"The airlock door. \</span><br/>   <span class="green">For safety reasons, it requires two person operation."</span>],<br/>       22: [images.door, images.door_shadow, <span class="green">"A locked door. It needs "</span> \<br/>            + PLAYER_NAME + <span class="green">"'s access card"</span>],<br/>       23: [images.door, images.door_shadow, <span class="green">"A locked door. It needs "</span> \<br/>            + FRIEND1_NAME + <span class="green">"'s access card"</span>],<br/>       24: [images.door, images.door_shadow, <span class="green">"A locked door. It needs "</span> \<br/>            + FRIEND2_NAME + <span class="green">"'s access card"</span>],<br/>       25: [images.door, images.door_shadow,<br/>            <span class="green">"A locked door. It is opened from Main Mission Control"</span>],<br/>       26: [images.door, images.door_shadow,<br/>            <span class="green">"A locked door in the engineering bay."</span>],<br/><span class="ent">➌</span>     27: [images.map, images.full_shadow,<br/>            <span class="green">"The screen says the crash site was Sector: "</span> \<br/>            + <span class="purple">str</span>(LANDER_SECTOR) + <span class="green">" // X: "</span> + <span class="purple">str</span>(LANDER_X) + \<br/>            <span class="green">" // Y: "</span> + <span class="purple">str</span>(LANDER_Y)],<br/>       28: [images.rock_large, images.rock_large_shadow,<br/>            <span class="green">"A rock. Its coarse surface feels like a whetstone"</span>, <span class="green">"the rock"</span>],<br/>       29: [images.rock_small, images.rock_small_shadow,<br/>            <span class="green">"A small but heavy piece of Martian rock"</span>],<br/>       30: [images.crater, <span class="orange">None</span>, <span class="green">"A crater in the planet surface"</span>],<br/>       31: [images.fence, <span class="orange">None</span>,<br/>            <span class="green">"A fine gauze fence. It helps protect the station from dust storms"</span>],<br/>       32: [images.contraption, images.contraption_shadow,<br/>            <span class="green">"One of the scientific experiments. It gently vibrates"</span>],<br/>       33: [images.robot_arm, images.robot_arm_shadow,<br/>            <span class="green">"A robot arm, used for heavy lifting"</span>],<br/>       34: [images.toilet, images.half_shadow, <span class="green">"A sparkling clean toilet"</span>],<br/>       35: [images.sink, <span class="orange">None</span>, <span class="green">"A sink with running water"</span>, <span class="green">"the taps"</span>],<br/>       36: [images.globe, images.globe_shadow,<br/>            <span class="green">"A giant globe of the planet. It gently glows from inside"</span>],<br/>       37: [images.science_lab_table, <span class="orange">None</span>,<br/>            <span class="green">"A table of experiments, analyzing the planet soil and dust"</span>],<br/>       38: [images.vending_machine, images.full_shadow,<br/>            <span class="green">"A vending machine. It requires a credit."</span>, <span class="green">"the vending machine"</span>],<br/>       39: [images.floor_pad, <span class="orange">None</span>,<br/>            <span class="green">"A pressure sensor to make sure nobody goes out alone."</span>],<br/>       40: [images.rescue_ship, images.rescue_ship_shadow, <span class="green">"A rescue ship!"</span>],<br/>       41: [images.mission_control_desk, images.mission_control_desk_shadow, \<br/>            <span class="green">"Mission Control stations."</span>],<br/><span epub:type="pagebreak" id="page_93"/>       42: [images.button, images.button_shadow,<br/>            <span class="green">"The button for opening the time-locked door in engineering."</span>],<br/>       43: [images.whiteboard, images.full_shadow,<br/>            <span class="green">"The whiteboard is used in brainstorms and planning meetings."</span>],<br/>       44: [images.window, images.full_shadow,<br/>            <span class="green">"The window provides a view out onto the planet surface."</span>],<br/>       45: [images.robot, images.robot_shadow, <span class="green">"A cleaning robot, turned off."</span>],<br/>       46: [images.robot2, images.robot2_shadow,<br/>            <span class="green">"A planet surface exploration robot, awaiting set-up."</span>],<br/>       47: [images.rocket, images.rocket_shadow, <span class="green">"A 1-person craft in repair."</span>],<br/>       48: [images.toxic_floor, <span class="orange">None</span>, <span class="green">"Toxic floor - do not walk on!"</span>],<br/>       49: [images.drone, <span class="orange">None</span>, <span class="green">"A delivery drone"</span>],<br/>       50: [images.energy_ball, <span class="orange">None</span>, <span class="green">"An energy ball - dangerous!"</span>],<br/>       51: [images.energy_ball2, <span class="orange">None</span>, <span class="green">"An energy ball - dangerous!"</span>],<br/>       52: [images.computer, images.computer_shadow,<br/>            <span class="green">"A computer workstation, for managing space station systems."</span>],<br/>       53: [images.clipboard, <span class="orange">None</span>,<br/>            <span class="green">"A clipboard. Someone has doodled on it."</span>, <span class="green">"the clipboard"</span>],<br/>       54: [images.bubble_gum, <span class="orange">None</span>,<br/>            <span class="green">"A piece of sticky bubble gum. Spaceberry flavour."</span>, <span class="green">"bubble gum"</span>],<br/>       55: [images.yoyo, <span class="orange">None</span>, <span class="green">"A toy made of fine, strong string and plastic. \</span><br/>   <span class="green">Used for antigrav experiments."</span>, PLAYER_NAME + <span class="green">"'s yoyo"</span>],<br/>       56: [images.thread, <span class="orange">None</span>,<br/>            <span class="green">"A piece of fine, strong string"</span>, <span class="green">"a piece of string"</span>],<br/>       57: [images.needle, <span class="orange">None</span>,<br/>            <span class="green">"A sharp needle from a cactus plant"</span>, <span class="green">"a cactus needle"</span>],<br/>       58: [images.threaded_needle, <span class="orange">None</span>,<br/>            <span class="green">"A cactus needle, spearing a length of string"</span>, <span class="green">"needle and string"</span>],<br/>       59: [images.canister, <span class="orange">None</span>,<br/>            <span class="green">"The air canister has a leak."</span>, <span class="green">"a leaky air canister"</span>],<br/>       60: [images.canister, <span class="orange">None</span>,<br/>            <span class="green">"It looks like the seal will hold!"</span>, <span class="green">"a sealed air canister"</span>],<br/>       61: [images.mirror, <span class="orange">None</span>,<br/>            <span class="green">"The mirror throws a circle of light on the walls."</span>, <span class="green">"a mirror"</span>],<br/>       62: [images.bin_empty, <span class="orange">None</span>,<br/>            <span class="green">"A rarely used bin, made of light plastic"</span>, <span class="green">"a bin"</span>],<br/>       63: [images.bin_full, <span class="orange">None</span>,<br/>            <span class="green">"A heavy bin full of water"</span>, <span class="green">"a bin full of water"</span>],<br/>       64: [images.rags, <span class="orange">None</span>,<br/>            <span class="green">"An oily rag. Pick it up by a corner if you must!"</span>, <span class="green">"an oily rag"</span>],<br/>       65: [images.hammer, <span class="orange">None</span>,<br/>            <span class="green">"A hammer. Maybe good for cracking things open..."</span>, <span class="green">"a hammer"</span>],<br/>       66: [images.spoon, <span class="orange">None</span>, <span class="green">"A large serving spoon"</span>, <span class="green">"a spoon"</span>],<br/>       67: [images.food_pouch, <span class="orange">None</span>,<br/>            <span class="green">"A dehydrated food pouch. It needs water."</span>, <span class="green">"a dry food pack"</span>],<br/>       68: [images.food, <span class="orange">None</span>,<br/>            <span class="green">"A food pouch. Use it to get 100% energy."</span>, <span class="green">"ready-to-eat food"</span>],<br/>       69: [images.book, <span class="orange">None</span>, <span class="green">"The book has the words 'Don't Panic' on the \</span><br/>   <span class="green">cover in large, friendly letters"</span>, <span class="green">"a book"</span>],<br/>       70: [images.mp3_player, <span class="orange">None</span>,<br/>            <span class="green">"An MP3 player, with all the latest tunes"</span>, <span class="green">"an MP3 player"</span>],<br/>       71: [images.lander, <span class="orange">None</span>, <span class="green">"The Poodle, a small space exploration craft. \</span><br/>   <span class="green">Its black box has a radio sealed inside."</span>, <span class="green">"the Poodle lander"</span>],<br/>       72: [images.radio, <span class="orange">None</span>, <span class="green">"A radio communications system, from the \</span><br/>   <span class="green">Poodle"</span>, <span class="green">"a communications radio"</span>],<br/><span epub:type="pagebreak" id="page_94"/>       73: [images.gps_module, <span class="orange">None</span>, <span class="green">"A GPS Module"</span>, <span class="green">"a GPS module"</span>],<br/>       74: [images.positioning_system, <span class="orange">None</span>, <span class="green">"Part of a positioning system. \</span><br/>   <span class="green">Needs a GPS module."</span>, <span class="green">"a positioning interface"</span>],<br/>       75: [images.positioning_system, <span class="orange">None</span>,<br/>            <span class="green">"A working positioning system"</span>, <span class="green">"a positioning computer"</span>],<br/>       76: [images.scissors, <span class="orange">None</span>, <span class="green">"Scissors. They're too blunt to cut \</span><br/>   <span class="green">anything. Can you sharpen them?"</span>, <span class="green">"blunt scissors"</span>],<br/>       77: [images.scissors, <span class="orange">None</span>,<br/>            <span class="green">"Razor-sharp scissors. Careful!"</span>, <span class="green">"sharpened scissors"</span>],<br/>       78: [images.credit, <span class="orange">None</span>,<br/>            <span class="green">"A small coin for the station's vending systems"</span>,<br/>            <span class="green">"a station credit"</span>],<br/>       79: [images.access_card, <span class="orange">None</span>,<br/>            <span class="green">"This access card belongs to "</span> + PLAYER_NAME, <span class="green">"an access card"</span>],<br/>       80: [images.access_card, <span class="orange">None</span>,<br/>            <span class="green">"This access card belongs to "</span> + FRIEND1_NAME, <span class="green">"an access card"</span>],<br/>       81: [images.access_card, <span class="orange">None</span>,<br/>            <span class="green">"This access card belongs to "</span> + FRIEND2_NAME, <span class="green">"an access card"</span>]<br/>       <span class="gray">}</span><br/><br/><span class="ent">➍</span> items_player_may_carry = <span class="purple">list</span>(<span class="purple">range</span>(53, 82))<br/>   <span class="red"># Numbers below are for floor, pressure pad, soil, toxic floor.</span><br/><span class="ent">➎</span> items_player_may_stand_on = items_player_may_carry + [0, 39, 2, 48]<br/><br/>   <span class="gray">###############</span><br/>   <span class="gray">## MAKE MAP  ##</span><br/>   <span class="gray">###############</span><br/>   <span class="gray">--<span class="codeitalic1">snip</span>--</span></pre>
<p class="listing" id="ch05list8"><em>Listing 5-8: Completing the objects data for the</em> Escape <em>game</em></p>
<p class="indent">Some of the lists for objects extend over more than one line in the program <span class="ent">➊</span>. This is fine because Python knows the list isn’t complete until it sees a closing bracket. To break a string (or any other piece of code) over more than one line, you can use a <code>\</code> at the end of the line <span class="ent">➋</span>. The line breaks in <em>listing5-8.py</em> are just there to make the code fit onto the book page neatly: onscreen, the code can extend to the right if you want it to.</p>
<p class="indent">Object 27 is a map showing the Poodle’s crash site. Its long description includes the variables that you set in <a href="ch05.xhtml#ch05list5">Listing 5-5</a> for the Poodle’s position. The <code>str()</code> function is used to convert the numbers in those variables into strings so they can be combined with other strings to make up the long description <span class="ent">➌</span>.</p>
<p class="indent">We’ve also set up some additional lists we’ll need in the game: <code>items_player_may_carry</code> stores the numbers of the objects the player can pick up <span class="ent">➍</span>. These are objects 53 to 81. Because they’re grouped together, we can set up the <code>items_player_may_carry</code> list using a range. A <em>range</em> is a sequence of numbers that starts from the first number given and finishes at the one <em>before</em> the last number. (We used ranges in <a href="ch03.xhtml#ch03">Chapter 3</a>.) We turn that range into a list using <code>list(range(53 to 82))</code>, which makes a list of all the numbers from 53 to 81.</p>
<p class="indent">If you add more objects that a player can carry later, you can add them to the end of this list. For example, to add new objects numbered 89 and 93 <span epub:type="pagebreak" id="page_95"/>that the player can carry, use <code>items_player_may_carry = list(range(54, 82)) + [89, 93]</code>. You can also add new objects to the end of the <code>objects</code> list and just extend the range used to set up <code>items_player_may_carry</code>.</p>
<p class="indent">The other new list is <code>items_player_may_stand_on</code>, which specifies whether a player is allowed to stand on a particular item <span class="ent">➎</span>. Players can only stand on objects small enough to be picked up and on the different types of floor. We make this list by adding the object numbers for the different floor types to the <code>items_player_may_carry</code> list.</p>
<p class="indent">After you’ve entered <a href="ch05.xhtml#ch05list8">Listing 5-8</a>, you’ve completed the <code>OBJECTS</code> section of the <em>Escape</em> game! But we haven’t put the objects into the game map yet. We’ll start to do that in <a href="ch06.xhtml#ch06">Chapter 6</a>.</p>
<div class="sidebar">
<p class="sidebart" id="ch05sb4"><strong>TRAINING MISSION #4</strong></p>
<p class="spara">Experiment with some of the new objects you just added to the game. By modifying the code, can you . . .</p>
<ul>
<li class="noindent">Swap the tall bookcase for a bin (object 62)?</li>
<li class="noindent">Swap the spaceberry plant for a small rock (object 29)?</li>
<li class="noindent">Swap the chair on the right for a patch of toxic floor (object 48)?</li>
</ul>
<p class="spara1">To understand which instruction places which object, you can either use the coordinates in your existing code or look up the object numbers in the <code>objects</code> dictionary (onscreen or in the listings in this chapter). Run your program to make sure it works.</p>
</div>
<h3 class="h3" id="lev84"><strong>ARE YOU FIT TO FLY?</strong></h3>
<p class="noindentb">Check the following boxes to confirm that you’ve learned the key lessons in this chapter.</p>
<p class="square"><img src="../images/box.jpg" alt="Images"/>  To get information from a dictionary, you use the key for that information. The key can be a word or a number and can also be stored in a variable.</p>
<p class="square"><img src="../images/box.jpg" alt="Images"/>  If you try to use a key that isn’t in the dictionary, you’ll cause an error.</p>
<p class="square"><img src="../images/box.jpg" alt="Images"/>  To avoid an error, check whether the key is in the dictionary before the program tries to use it.</p>
<p class="square"><img src="../images/box.jpg" alt="Images"/>  You can put lists inside dictionaries. Then you can use the dictionary key followed by the list index to get a particular item from the list. For example: <code>planets["Earth"][1]</code>.</p>
<p class="square"><img src="../images/box.jpg" alt="Images"/>  The <em>Escape</em> game uses the <code>objects</code> dictionary to store information about all the objects in the game. Each item in the dictionary is a list.</p>
<p class="square"><img src="../images/box.jpg" alt="Images"/>  You can use the index number of that list to access the object’s image file, shadow image file, and long and short description.</p>
<div class="image" id="ch05sb5"><span epub:type="pagebreak" id="page_96"/><img src="../images/f0096-01.jpg" alt="image"/></div>
</body></html>