<html><head></head><body>
		<section>
			<header>
				<h1 class="chapter"><span class="ChapterNumber"><span epub:type="pagebreak" id="Page_133" title="133"/>7</span><br/><span class="ChapterTitle">Working with Lists and Reading Data</span></h1>
			</header>
			<figure class="opener">
				<img alt="" src="image_fi/book_art/chapterart.png"/>
			</figure>
			<p class="ChapterIntro">When you need to work with multiple values, you can group them into a single variable by using a Python list. The <em>list </em>data type stores any number of items in collections you can manage and manipulate dynamically and efficiently. For example, you could create a list to store the titles of your favorite movies and use built-in methods to insert new favorites, reorder the rankings, or display only titles ranked between 30 and 40.</p>
			<p>In this chapter, you’ll learn to create and manipulate lists, and then you’ll combine them with loops to access and perform actions with each item. In keeping with this book’s visual theme, you’ll generate graphical representations of list data, including a chart that displays brightness and RGB mixtures for a list of colors and another that plots the bestselling video games of all time. You’ll see how to adjust list values to affect visual output, observing how the charts adapt to changing data.</p>
			<p><span epub:type="pagebreak" id="Page_134" title="134"/>You’ll also learn how to read in data from text files and how text-based formats differ from other file formats. You’ll move your Python list data into CSV-formatted text files and load it in when your sketch runs, allowing you to prepare data with other tools, such as spreadsheets.</p>
			<h2 id="h1-500969c07-0001">Introducing Lists</h2>
			<p class="BodyFirst">Lists hold multiple values that are related or belong together. For example, consider programming a video game in which players wander about collecting various objects—keys, weapons, armor upgrades, and so forth—to advance to a new level. Your game needs to track those items, which you can store in an inventory list.</p>
			<p>To denote a list, use square brackets and separate each element with a comma. As an example, here’s a simple list for some game items:</p>
			<pre><code>inventory = [<span class="ProcessingPurple">'key'</span>, <span class="ProcessingPurple">'gem'</span>, <span class="ProcessingPurple">'sword', 'apple', 'book'</span>]</code></pre>
			<p>
				This list contains five strings and is assigned to a variable named <code>inventory</code>.</p>
			<p>
				Performing repetitive operations on collections of items is a common programming challenge. Suppose you want to display a grid with all the objects a player has collected (<a href="#figure7-1" id="figureanchor7-1">Figure 7-1</a>). You can write a <code>loop</code> statement to access each item in the inventory and draw it in a cell. If the size of the list changes—because the player has added or dropped items—the loop will adapt, so you can write the code once and then have the program fill the appropriate number of cells to depict the inventory items.</p>
			<figure>
				<img alt="f07001" src="image_fi/500969c07/f07001.png"/>
				<figcaption>
					<p><a id="figure7-1">Figure 7-1</a>: A player inventory from the game <em>Minetest</em></p>
				</figcaption>
			</figure>
			<p>In Python, a single list can contain any mix of data types and duplicate values. For example, this top-score entry stores multiple types of data:</p>
			<pre><code>topscore = [<span class="ProcessingPurple">'LEO'</span>, 54120] </code></pre>
			<p><span epub:type="pagebreak" id="Page_135" title="135"/>The player name <code>LEO</code> is a string, and the high score is an integer.</p>
			<p>Lists can include as many elements as you want, and you can even define an empty list by using just a pair of square brackets with nothing within them, which is useful if you intend to add items while your program is running.</p>
			<p>Lists are ordered, and ordering is significant in many situations—for example, in this sequence of rainbow colors:</p>
			<pre><code>rainbow = [ <span class="ProcessingPurple">'red'</span>, <span class="ProcessingPurple">'orange'</span>, <span class="ProcessingPurple">'yellow'</span>, <span class="ProcessingPurple">'green'</span>, <span class="ProcessingPurple">'blue'</span>, <span class="ProcessingPurple">'indigo'</span>, <span class="ProcessingPurple">'violet'</span>,
]</code></pre>
			<p>When defining a list, you can write it across multiple lines, as shown here, to make your code easier to read and edit. Python also permits an optional trailing comma after the last element. Having this extra comma can help when you want to add or shuffle list values; just be careful not to forget a comma where necessary.</p>
			<h3 id="h2-500969c07-0001">Creating and Accessing Lists</h3>
			<p class="BodyFirst">To familiarize yourself with defining, accessing, and modifying lists, create a new sketch. Save it as <em>rainbow_list</em> and add the following code:</p>
			<pre><code>rainbow = [<span class="ProcessingPurple">'blue'</span>, <span class="ProcessingPurple">'orange'</span>, <span class="ProcessingPurple">'yellow'</span>]<span class="ProcessingBlue">print</span>(rainbow)</code></pre>
			<p>For now, this rainbow is missing a few colors, and the sequence is incorrect, so you’ll use various list operations to add and shuffle colors as you progress through this section. First, run the code to verify the following console output:</p>
			<pre><code>['blue', 'orange', 'yellow']</code></pre>
			<p>
				Printing the <code>rainbow</code> variable displays all three values, complete with square brackets and commas.</p>
			<p>
				In many instances, you’ll want to retrieve an individual element instead of a whole list. To display a given color, specify its position, or <em>index</em>, in square brackets. Note that Python list indices start at 0, so to print the first element, enter the following:</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="ProcessingBlue">print</span>(rainbow[0])</code></pre>
			<p>
				Run the sketch to confirm that the console displays <code>blue</code>.</p>
			<p><span epub:type="pagebreak" id="Page_136" title="136"/>The second element, <code>orange</code>, has an index of <code>1</code>, and the last element in this list, <code>yellow</code>, has an index of <code>2</code>. To print items 1 and 2, enter the following (note that throughout this chapter, the comments alongside the <code>print</code> lines indicate what should appear in your console):</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="ProcessingBlue">print</span>(rainbow[1]) <span class="ProcessingGray"># displays: orange</span><span class="ProcessingBlue">print</span>(rainbow[2]) <span class="ProcessingGray"># displays: yellow</span></code></pre>
			<p>
				This syntax may remind you of slice notation from working with strings in <span class="xref">Chapter 3</span>, and it should, because it works the same way. Just as with slice notation, use <code>-1 </code>to access the last element of the list, and extract a subset of elements by using a range defined with a colon. Try the following code:</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="ProcessingBlue">print</span>(rainbow[-1]) <span class="ProcessingGray"># displays: yellow</span><span class="ProcessingBlue">print</span>(rainbow[-2]) <span class="ProcessingGray"># displays: orange</span><span class="ProcessingBlue">print</span>(rainbow[0:2]) <span class="ProcessingGray"># displays: ['blue', 'orange']</span></code></pre>
			<p>
				If you specify any index beyond the bounds of the list, such as <code>rainbow[3]</code> or higher, Processing will display an <code>IndexError</code> message.</p>
			<h3 id="h2-500969c07-0002">Modifying Lists</h3>
			<p class="BodyFirst">Lists can be dynamic in behavior, changing while your program runs. You can overwrite any element with a new value and use different list methods to insert new elements or remove existing ones. For a game inventory, you might replace a weapon if a player finds a more powerful one, and add or remove elements as the player trades items.</p>
			<p>
				Returning to the rainbow example, you need to replace blue with red as the first color in the <code>rainbow</code> list. To modify an existing list element, reassign it a new value as you would any other variable, but with lists, you need to specify the element index in square brackets. Add the following line to the end of your <em>rainbow_list</em> sketch:</p>
			<pre><code><span class="LiteralGray">. . .</span>
rainbow[0] = <span class="ProcessingPurple">'red'</span></code></pre>
			<p>
				The <code>red</code> string now replaces <code>blue</code>, overwriting it as the first item in the list. Printing the <code>rainbow</code> list should confirm this:</p>
			<pre><code><span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># ['red', 'orange', 'yellow']</span></code></pre>
			<p>
				Blue is no longer in the <code>rainbow</code> list.</p>
			<p>Let’s look at several of the most useful list methods, along with code to add to your working sketch. Each example builds on the code before it, so work through all of them sequentially, entering the lines as you progress.</p>
			<h4 id="h3-500969c07-0001"><span epub:type="pagebreak" id="Page_137" title="137"/>The append() Method</h4>
			<p class="BodyFirst">The <code>append()</code> method adds an element to the very end of a list, whatever its length. Add blue to the end of the <code>rainbow</code> list:</p>
			<pre><code>rainbow.<span class="ProcessingBlue">append</span>(<span class="ProcessingPurple">'blue'</span>)<span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, blue</span></code></pre>
			<p>
				Note that the comments after the <code>print()</code> function in these examples contain only the sequence of colors; when you actually print the list, the console will display <code>['red', ...,'blue']</code> with all of the brackets and quotation marks.</p>
			<h4 id="h3-500969c07-0002">The extend() Method</h4>
			<p class="BodyFirst">To add all the elements in one list to the end of another, use the <code>extend()</code> method:</p>
			<pre><code>colors = [<span class="ProcessingPurple">'indigo'</span>, <span class="ProcessingPurple">'violet'</span>]
rainbow.<span class="ProcessingBlue">extend</span>(colors)<span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, blue, indigo, violet</span></code></pre>
			<p>
				The <code>colors</code> list, which contains indigo and violet, is now added to the original <code>rainbow</code> list.</p>
			<h4 id="h3-500969c07-0003">The index() Method</h4>
			<p class="BodyFirst">The <code>index()</code> method returns the index (the position in the list as an integer) for any element that matches the argument provided. If there are multiple matches, this method detects the first instance. Use an argument of <code>'yellow'</code> to test this:</p>
			<pre><code>yellowindex = rainbow.<span class="ProcessingBlue">index</span>(<span class="ProcessingPurple">'yellow'</span>)<span class="ProcessingBlue">print</span>(yellowindex) <span class="ProcessingGray"># 2</span></code></pre>
			<p>
				Try different color arguments. If no matching value exists, Processing displays a <code>ValueError</code> message.</p>
			<h4 id="h3-500969c07-0004">The insert() Method</h4>
			<p class="BodyFirst">The <code>insert()</code> method accepts two arguments: the first is the index at which to insert the element; the second is the value. Insert <code>green</code> into the middle of the list with an index argument of <code>3</code>:</p>
			<pre><code>rainbow.<span class="ProcessingBlue">insert</span>(3, <span class="ProcessingPurple">'green'</span>)<span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, green, blue, . . .</span></code></pre>
			<p>Green is now in the position that blue used to occupy, shifting blue one index higher along with every color to the right of it.</p>
			<h4 id="h3-500969c07-0005"><span epub:type="pagebreak" id="Page_138" title="138"/>The pop() Method</h4>
			<p class="BodyFirst">The <code>pop()</code> method accepts a single argument: the index of an element to remove. The “popped” value is returned should you need to use it for another operation. Pop indigo from the list and assign it to a variable named <code>i</code>; then print <code>i</code> and <code>rainbow</code> to confirm that your console output matches the comments shown here:</p>
			<pre><code>i = rainbow.<span class="ProcessingBlue">pop</span>(5)<span class="ProcessingBlue">print</span>(i) <span class="ProcessingGray"># indigo</span><span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, green, blue, violet</span></code></pre>
			<p>
				If you aren’t concerned with using the popped value, remove the <code>i =</code> part.</p>
			<p>
				Now, use <code>pop()</code> with no argument to remove the last item in the list:</p>
			<pre><code>i = rainbow.<span class="ProcessingBlue">pop</span>()<span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, green, blue</span></code></pre>
			<p>The console output should confirm that violet is removed from the list.</p>
			<h4 id="h3-500969c07-0006">The remove() Method</h4>
			<p class="BodyFirst">The <code>remove()</code> method removes the first element with a value that matches the argument provided. Re-add indigo and violet by using the <code>extend()</code> method, and then remove indigo with the <code>remove()</code> method:</p>
			<pre><code>rainbow.<span class="ProcessingBlue">extend</span>(colors)<span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, green, blue, indigo, violet</span>
rainbow.<span class="ProcessingBlue">remove</span>(<span class="ProcessingPurple">'indigo'</span>)<span class="ProcessingBlue">print</span>(rainbow) <span class="ProcessingGray"># red, orange, yellow, green, blue, violet</span></code></pre>
			<p>
				After extending the list, <code>rainbow</code> is back to a seven-color list. After the <code>remove</code> line, the list is down to six colors again, with no indigo.</p>
			<p>
				Python provides other list methods, but these should suffice for you to start manipulating lists. Any decent Python reference or internet search should cover the rest. For example, if you want to reorder list elements, look up the <code>reverse()</code> and alphanumerical <code>sort()</code> methods. The Processing reference also includes several list methods, which are standard Python (as opposed to Processing) features, and they are functional in any Python environment.</p>
			<h2 id="h1-500969c07-0002">Combining Loops and Lists</h2>
			<p class="BodyFirst">You can program loops to work on lists, potentially saving countless lines of manual instruction. As an example, say you want to create a <em>Breakout</em>-style game (<a href="#figure7-2" id="figureanchor7-2">Figure 7-2</a>). In this type of game, the player controls the paddle at the bottom of the screen with the goal of bouncing the ball upward to destroy all the bricks. You could create a list to store the bricks so that when <span epub:type="pagebreak" id="Page_139" title="139"/>the player hits a brick with the ball, that brick would be removed from the list. In some levels, you could have additional bricks appear during play, which would mean you’d need to insert new list elements.</p>
			<figure>
				<img alt="f07002" src="image_fi/500969c07/f07002.png"/>
				<figcaption>
					<p><a id="figure7-2">Figure 7-2</a>: <em>LBreakout2</em>, an open source <em>Breakout </em>clone</p>
				</figcaption>
			</figure>
			<p>
				You’ve likely played a variant of this game and are probably aware that, upon destruction, certain bricks drop power-ups. You also know that the bricks come in different colors, and that some may be invisible but solid, while others may take multiple hits to destroy. You can program all of those additional properties by using lists of lists. Lists can contain other lists, which, in turn, can contain further nested lists (see <span class="xref">“Creating Lists of Lists” on page 144</span>).</p>
			<p>
				If your list is named <code>bricks</code> and contains the fills for 60 bricks, rendering each brick would require at least as many lines of code as you have elements. For instance, you might use the following code to draw each brick with a <code>rect()</code> function:</p>
			<pre><code>bricks = [ <span class="ProcessingPurple">'#FF0000'</span>,<var>  </var><span class="ProcessingPurple">'#FF0000'</span><var>,</var><span class="LiteralGray">  . . .</span><span class="ProcessingGray"># brick A1</span><span class="ProcessingBlue">fill</span>(bricks[0])<span class="ProcessingBlue">rect</span>(0, 0, 30, 10)<span class="ProcessingGray"># brick A2</span><span epub:type="pagebreak" id="Page_140" title="140"/><span class="ProcessingBlue">fill</span>(bricks[1])<span class="ProcessingBlue">rect</span>(30, 0, 30, 10)<span class="LiteralGray">. . .</span><span class="ProcessingGray"># brick F10</span><span class="ProcessingBlue">fill</span>(bricks[59])<span class="ProcessingBlue">rect</span>(270, 50, 30, 10)</code></pre>
			<p>
				Notice that every brick rendered requires a <code>fill()</code> and <code>rect()</code> function. Even if you remove the comments, that’s 120 lines (60 × 2) of code to draw the complete list. This is hardly efficient, nor can the code handle a list that might fluctuate in length.</p>
			<h3 id="h2-500969c07-0003">Drawing Shapes by Using a List of Color Values</h3>
			<p class="BodyFirst">For this exercise, you’ll draw a rainbow-colored sequence of bands from a list of hexadecimal values, beginning with a single band using a <code>fill()</code> and <code>rect()</code> function. You’ll then adapt the code to use a loop that draws the entire list. To begin, add the following code to your <em>rainbow_list</em> sketch:</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="ProcessingBlue">size</span>(500, 500)<span class="ProcessingBlue">noStroke</span>()<span class="ProcessingBlue">background</span>(<span class="ProcessingPurple">'#004477'</span>)
bands = [ <span class="ProcessingPurple">'#FF0000'</span>, <span class="ProcessingGray"># red</span> <span class="ProcessingPurple">'#FF9900'</span>, <span class="ProcessingGray"># orange</span> <span class="ProcessingPurple">'#FFFF00'</span>, <span class="ProcessingGray"># yellow</span> <span class="ProcessingPurple">'#00FF00'</span>, <span class="ProcessingGray"># green</span> <span class="ProcessingPurple">'#0099FF'</span>, <span class="ProcessingGray"># blue</span> <span class="ProcessingPurple">'#6633FF'</span> <span class="ProcessingGray"># violet</span>
]<span class="ProcessingGray"># red band</span><span class="ProcessingBlue">translate</span>(0, 100)<span class="ProcessingBlue">fill</span>(bands[0])<span class="ProcessingBlue">rect</span>(0, 0, <span class="ProcessingRaspberry">width</span>, 50)</code></pre>
			<p>
				Up until this point, the sketch has relied exclusively on the console for output. This code begins by defining a display window size, no stroke, and a background color. The <code>bands</code> list holds hexadecimal values for a six-color rainbow with comments to identify each color value. The first (red) band is drawn using <code>translate()</code>, <code>fill()</code>, and <code>rect()</code> functions. Run the sketch. The result should be a single, horizontal red band on a blue background (<a href="#figure7-3" id="figureanchor7-3">Figure 7-3</a>).</p>
				<span epub:type="pagebreak" id="Page_141" title="141"/>
				<figure>
				<img alt="f07003" src="image_fi/500969c07/f07003.png"/>
				<figcaption>
					<p><a id="figure7-3">Figure 7-3</a>: The result of running the sketch is a single red band.</p>
				</figcaption>
			</figure>
			<p>
				You’ve drawn the first band in the list, and the next step is to adapt the code to use a <code>for</code> loop that draws all six bands.</p>
			<p>
				When you combine a <code>for</code> loop with a list, Python assigns each successive list value to the loop variable, using the length of the list to determine the number of iterations required. To make your program draw every band in the <code>bands</code> list, comment out the existing <code>fill()</code> and <code>rect()</code> functions, and then add a loop that draws the complete rainbow for you:</p>
			<pre><code><span class="LiteralGray">. . .</span><b>#</b><span class="ProcessingGray">fill(bands[0])</span><b>#</b><span class="ProcessingGray">rect(0, 0, width, 50)</span><span class="ProcessingOlive">for</span> band<span aria-label="annotation1" class="CodeAnnotation">1</span> <span class="ProcessingTealGreen">in</span> bands: <span class="ProcessingBlue">fill</span>(band) <span class="ProcessingBlue">rect</span>(0, 0, <span class="ProcessingRaspberry">width</span>, 50) <span class="ProcessingBlue">translate</span>(0, 50<span aria-label="annotation2" class="CodeAnnotation">2</span>)</code></pre>
			<p>
				In this instance, the code is easier to understand if you name the loop variable <code>band</code> <span aria-label="annotation1" class="CodeAnnotation">1</span> instead of something like <code>i</code>. The <code>band</code> variable is equal to <code>'#FF0000'</code> on the first iteration, <code>'#FF9900'</code> on the second, and so forth. A <code>translate()</code> function moves the coordinate system down the height of a band <span aria-label="annotation2" class="CodeAnnotation">2</span>. With each iteration, Processing applies the next fill in the list and draws a new rectangle below the last one. The result is a stack of six rainbow-colored bands that span the width of the display window (<a href="#figure7-4" id="figureanchor7-4">Figure 7-4</a>). Note that the green band will be brighter on a computer screen than it is in a printed book. Standard printing inks (cyan, magenta, yellow, and key/black—CMYK) cannot replicate the intensity of the shades of green on a digital display.</p>
				<span epub:type="pagebreak" id="Page_142" title="142"/>
				<figure>
				<img alt="f07004" src="image_fi/500969c07/f07004.png"/>
				<figcaption>
					<p><a id="figure7-4">Figure 7-4</a>: A rainbow sequence of six color bands</p>
				</figcaption>
			</figure>
			<p>
				In this example, Python retrieves each element in the list, so you don’t need to specify any index values. In the next section, you’ll use the <code>enumerate()</code> function to retrieve the index for each element as well as the value.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Six-Color Rainbows?</h2>
					<p class="BoxBodyFirst">Hold on! What happened to indigo? According to Wictionary.org, indigo is a “purplish-blue color,” and violet is a “blueish-purple color.” So, why is there indigo and violet, but no purple band in a rainbow?</p>
					<p>Purple is a combination of two spectral colors. There is no wavelength of purple light; it exists only as a combination of red and blue waves. Violet, however, is an actual spectral color with its own wavelength of approximately 380 to 420 nanometers. Indigo lies somewhere between blue and violet, but exactly where, if at all, is a matter for debate. In his famous prism experiments, Isaac Newton defined seven rainbow colors, squeezing in indigo just before violet. You may wonder, why seven colors from a blended array spanning the visible spectrum? It’s because the number seven has occult significance. It’s no coincidence that there are seven colors in the rainbow, seven days of the week, and seven musical notes that make up the Western major scale. Today, however, color scientists are inclined to divide the spectrum at blue and violet, leaving no room for indigo.</p>
					<p>
						Pink Floyd’s iconic <em>The Dark Side of the Moon</em> album cover depicts a prism that splits a white beam into an array of rainbow-like bands. Have you ever counted the color bands in this design?</p>
					<p>In this book, we’ll drop indigo in favor of the six-color rainbow.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<h3 id="h2-500969c07-0004"><span epub:type="pagebreak" id="Page_143" title="143"/>Looping with enumerate()</h3>
			<p class="BodyFirst">For some looping tasks, you need each element’s index and value. For instance, say you have an ordered list of your favorite movies and want to print each title alongside its rank (the index). You can do so with the <code>enumerate()</code> function.</p>
			<p>
				To use the <code>enumerate()</code> function to get the index of each color band in your rainbow, provide two variable names between the <code>for</code> and <code>in</code>. These two variables will hold your index and a corresponding value, respectively, for any iteration. Modify the code in your <em>rainbow_list </em>sketch:</p>
			<pre><code><span class="LiteralGray">. . .</span><b>#</b><span class="ProcessingGray">for band in bands:</span><span aria-label="annotation1" class="CodeAnnotationHang">1</span> <b>for i, band in enumerate(bands):</b> <span class="LiteralGray">fill(band)</span> <span class="LiteralGray">rect(0, 0, width, 50)</span> <span aria-label="annotation2" class="CodeAnnotation">2</span> <b>fill('#FFFFFF')</b> <b>textSize(25)</b> <b>text(i, 20, 35)</b> <span class="LiteralGray">translate(0, 50)</span></code></pre>
			<p>
				The <code>i</code> and <code>band</code> variables represent the index and fill value, respectively <span aria-label="annotation1" class="CodeAnnotation">1</span>. The extra <code>fill</code> and the two <code>text</code> lines below it draw index numbers over each rectangle <span aria-label="annotation2" class="CodeAnnotation">2</span>.</p>
			<p>
				Run the sketch. You should now see a white number in each band (<a href="#figure7-5" id="figureanchor7-5">Figure 7-5</a>), although the 2 doesn’t show up particularly well over the yellow.</p>
			<figure>
				<img alt="f07005" src="image_fi/500969c07/f07005.png"/>
				<figcaption>
					<p><a id="figure7-5">Figure 7-5</a>: A numbered sequence of rainbow bands</p>
				</figcaption>
			</figure>
			<p>
				Use an <code>enumerate()</code> function wherever you need to work with list indices or keep count of loop iterations. For any other loop operations on lists, a plain <code>for</code> loop should suffice.</p>
			<h2 id="h1-500969c07-0003"><span epub:type="pagebreak" id="Page_144" title="144"/>Creating Lists of Lists</h2>
			<p class="BodyFirst">Although the concept of having lists within lists may seem complicated, appropriately nested lists make complex datasets easier to manage. In this practical data visualization task, you’ll create a variation of a bar chart. This chart will measure the relative brightness of six colors. <a href="#figure7-6" id="figureanchor7-6">Figure 7-6</a> shows a simplified representation of what you’re working toward. Notice that yellow, the brightest color, has the longest bar.</p>
			<figure>
				<img alt="f07006" src="image_fi/500969c07/f07006.png"/>
				<figcaption>
					<p><a id="figure7-6">Figure 7-6</a>: A simplified, outlined representation of the bar chart</p>
				</figcaption>
			</figure>
			<p>The final chart will include color, and the bars will be further divided into segments of red, green, and blue to represent the RGB mixture of each color (more on this later).</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Data Visualization</h2>
					<p class="BoxBodyFirst"><em>Data visualization</em> is the graphical representation of data using charts, graphs, maps, and other diagrams. This topic relates neatly to many coding concepts, and it makes for some intriguing and enlightening visual output. A good example is Frederic Brodbeck’s <em>Cinemetrics</em><em> </em>project (see <span class="xref">“What Is Creative Coding?” on page xviii</span>) that analyzes DVD movie data to generate visual fingerprints of films. For many inspiring data visualizations, you can peruse the collection of works showcased at <a class="LinkURL" href="https://informationisbeautiful.net/">https://informationisbeautiful.net/</a>. When writing Processing code, you’re no longer limited to whatever your spreadsheet software can conjure. Instead, you can explore novel ways to visualize data, ranging from highly abstract or playful to highly informative to anything in between.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				The first step in creating the bar chart is to start a new sketch and save it as <em>lists_of_lists</em>. Add the following setup code:</p>
			<pre><code><span class="ProcessingBlue">size</span>(500, 380)<span class="ProcessingBlue">background</span>(<span class="ProcessingPurple">'#004477'</span>)<span class="ProcessingBlue">noFill</span>()<span class="ProcessingBlue">stroke</span>(<span class="ProcessingPurple">'#FFFFFF'</span>)<span epub:type="pagebreak" id="Page_145" title="145"/><span class="ProcessingBlue">strokeWeight</span>(3)
h = 50<span class="ProcessingBlue">translate</span>(100, 40)
bands = 6<span class="ProcessingBlue">rect</span>(0, 0, 40, h*bands)</code></pre>
			<p>
				The <code>h</code> variable defines the bar height, and the <code>translate()</code> function defines the upper left corner. The visual result should appear as a vertical bar; this represents a total number of six bands (<a href="#figure7-7" id="figureanchor7-7">Figure 7-7</a>). The height of the bar represents a single integer value: 6. If <code>bands</code> were equal to 7, the rectangle that defines the bar would extend beyond the bottom of the display window.</p>
			<figure>
				<img alt="f07007" src="image_fi/500969c07/f07007.png"/>
				<figcaption>
					<p><a id="figure7-7">Figure 7-7</a>: A bar 6 × 50 pixels tall</p>
				</figcaption>
			</figure>
			<p>
				The next step is to split the existing bar into six segments, which will later form the horizontal bars. Add a new <code>bands1</code> list of rainbow colors to the end of your sketch, along with a loop that draws a rectangle using each color:</p>
			<pre><code><span class="LiteralGray">. . .</span>
bands1 = [ <span class="ProcessingPurple">'#FF0000'</span>, <span class="ProcessingPurple">'#FF9900'</span>, <span class="ProcessingPurple">'#FFFF00'</span>, <span class="ProcessingPurple">'#00FF00'</span>, <span class="ProcessingPurple">'#0099FF'</span>, <span class="ProcessingPurple">'#6633FF'</span>
]<span class="ProcessingOlive">for</span> band <span class="ProcessingTealGreen">in</span> bands1: <span class="ProcessingBlue">fill</span>(band) <span class="ProcessingBlue">rect</span>(0, 0, 40, h) <span class="ProcessingBlue">translate</span>(0, h)</code></pre>
			<p><span epub:type="pagebreak" id="Page_146" title="146"/>This <code>bands1</code> list contains a series of six hexadecimal color values. These define the fills for each segment. The <code>for</code> loop draws the rainbow-colored segments in a column arrangement that conceals the first bar (<a href="#figure7-8" id="figureanchor7-8">Figure 7-8</a>).</p>
			<figure>
				<img alt="f07008" src="image_fi/500969c07/f07008.png"/>
				<figcaption>
					<p><a id="figure7-8">Figure 7-8</a>: Rainbow-colored rectangles placed over the original bar</p>
				</figcaption>
			</figure>
			<p>
				The next step is to extend each block of color toward the right to form horizontal bars. The width of each bar will be determined by the brightness of its respective color. To calculate brightness, add together the red, green, and blue values that make up any color. For example, consider white. It’s the brightest “color” on your screen; it’s represented in hexadecimal as <code>#FFFFFF</code>, and if converted to percentages, expressed as 100 percent red, 100 percent green, and 100 percent blue. That’s an overall brightness of 300 percent, or if you prefer to average it out, it’s 300 ÷ 3 = 100 percent bright.</p>
			<p>
				To manage the colors as RGB percentages, you’ll need an integer value for each R/G/B primary, as opposed to a single hexadecimal string value. Add a new <code>bands2</code> list to the end of your code, wherein each element contains a list of three integers representing the red/green/blue mix of each color:</p>
			<pre><code><span class="LiteralGray">. . .</span>
bands2 = [ [100, 0, 0], [100, 60, 0], [100, 100, 0], [0, 100, 0], [0, 60, 100], [40, 20, 100]
]</code></pre>
			<p><span epub:type="pagebreak" id="Page_147" title="147"/>To access any list element within another list element directly, include a second pair of square brackets. For example, to retrieve the percentage of green in the second (orange) band, enter the following:</p>
			<pre><code><span class="ProcessingBlue">print</span>(bands2[1][1]) <span class="ProcessingGray"># 60</span></code></pre>
			<p>In this case, the green value is 60, which you can confirm in the console.</p>
			<p>
				To work with the percentages in the <code>bands2</code> list, set <code>colorMode()</code> to use RGB values between 0 and 100. To draw the bars, reset and translate the coordinate system, and then add a loop that draws rectangles filled in with various shades of gray:</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="ProcessingBlue">colorMode</span>(<span class="ProcessingKhaki">RGB</span>, 100)<span class="ProcessingBlue">resetMatrix</span>()<span class="ProcessingBlue">translate</span>(100, 40)<span class="ProcessingOlive">for</span> band<span aria-label="annotation1" class="CodeAnnotation">1</span> <span class="ProcessingTealGreen">in</span> bands2: r = band[0] g = band[1] b = band[2] <span aria-label="annotation2" class="CodeAnnotation">2</span> sum = r + g + b <span aria-label="annotation3" class="CodeAnnotation">3</span> avg = sum / 3 <span aria-label="annotation4" class="CodeAnnotation">4</span> <span class="ProcessingBlue">fill</span>(avg, avg, avg) <span class="ProcessingBlue">rect</span>(0, 0, sum<span aria-label="annotation5" class="CodeAnnotation">5</span>, h) <span class="ProcessingBlue">translate</span>(0, h)</code></pre>
			<p>
				With each iteration, <code>band</code> is assigned the next list of RGB percentage values <span aria-label="annotation1" class="CodeAnnotation">1</span>. These values are added together <span aria-label="annotation2" class="CodeAnnotation">2</span>, averaged to calculate a brightness value <span aria-label="annotation3" class="CodeAnnotation">3</span>, and the bar fill is set to a shade of gray using equal quantities of red/green/blue based on this average <span aria-label="annotation4" class="CodeAnnotation">4</span>. The brightness value also determines the width of the bar <span aria-label="annotation5" class="CodeAnnotation">5</span>. Run the sketch to view the result (<a href="#figure7-9" id="figureanchor7-9">Figure 7-9</a>).</p>
			<p>
				Oddly, the green bar (fourth from the top) is indicated as equivalent in brightness to the red (top) bar. Recall also that the green is even brighter on your screen than in print. The math is correct, but the human eye has a greater number of green receptors, making us more sensitive to green light, so the green band appears brighter. There are ways to compensate for this mathematically. If you’d like to test it out, you can multiply the <code>r</code>, <code>g</code>, <code>b</code> variables using the following values:</p>
			<pre><code><var>    </var><span class="LiteralGray">. . .</span> r = band[0] <b>* 0.64</b> g = band[1] <b>* 2.15</b> b = band[2] <b>* 0.22</b> <span class="LiteralGray">. . .</span></code></pre>
			<span epub:type="pagebreak" id="Page_148" title="148"/>
			<figure><img alt="f07009" src="image_fi/500969c07/f07009.png"/><figcaption>
					<p><a id="figure7-9">Figure 7-9</a>: The widths of each bar represent the relative brightness of each color.</p>
				</figcaption>
			</figure>
			<p>Now, the yellow bar (third from the top) is the only bar wider/brighter than the green one. For this task, however, I want to work with the averaging formula, so remove any multipliers to revert to the averaged values.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>
							This list-of-lists structure is called a <em>two-dimensional</em> <em>list</em>. You might even refer to the list of hexadecimal values (<code>bands1</code>) as a <em>one-dimensional list</em>, but it’s less common to hear that term unless programmers are contrasting one type with the other. List structures actually reflect the dimensionality of the data. So, adding data to <code>bands1</code> affects the y-axis; with <code>bands2</code>, the data controls both the x- and y-axes (a two-dimensional system).</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>Next, adapt the existing loop so that each bar indicates the different quantities of primary color that make up its fill:</p>
			<pre><code> <span class="LiteralGray">. . .</span> <span class="LiteralGray">r = band[0]</span> <span class="LiteralGray">g = band[1]</span> <span class="LiteralGray">b = band[2]</span> <b>#</b><span class="LiteralGray">sum = r + g + b</span> <b>#</b><span class="LiteralGray">avg = sum / 3</span> <b>#</b>fill(avg, avg, avg) <b>#</b>rect(0, 0, sum, h) <span aria-label="annotation1" class="CodeAnnotation">1</span> <span class="ProcessingBlue">fill</span>(<span class="ProcessingPurple">'#FF0000'</span>) <span class="ProcessingBlue">rect</span>(0, 0, r, h) <span aria-label="annotation2" class="CodeAnnotation">2</span> <span class="ProcessingBlue">fill</span>(<span class="ProcessingPurple">'#00FF00'</span>) <span class="ProcessingBlue">rect</span>(r, 0, g, h) <span aria-label="annotation3" class="CodeAnnotation">3</span> <span class="ProcessingBlue">fill</span>(<span class="ProcessingPurple">'#0099FF'</span>) <span class="ProcessingBlue">rect</span>(r+g, 0, b, h) <span class="LiteralGray">translate(0, h)</span></code></pre>
			<p><span epub:type="pagebreak" id="Page_149" title="149"/>The <code>rect()</code> functions form horizontal bars containing up to three segments each. The size and fill of each segment are governed by how much red <span aria-label="annotation1" class="CodeAnnotation">1</span>, green <span aria-label="annotation2" class="CodeAnnotation">2</span>, and blue <span aria-label="annotation3" class="CodeAnnotation">3</span> the color band contains. Even with the <code>colorMode()</code> set to <code>RGB</code>, Processing can still interpret fill arguments in quotes as hexadecimal.</p>
			<p>
				Run the sketch to view the result (<a href="#figure7-10" id="figureanchor7-10">Figure 7-10</a>). Red, the top bar, is mixed using nothing but red. Violet, the bottom bar, is predominantly blue, but also contains some red and a little green.</p>
			<figure>
				<img alt="f07010" src="image_fi/500969c07/f07010.png"/>
				<figcaption>
					<p><a id="figure7-10">Figure 7-10</a>: Each bar displays its proportion of RGB primaries.</p>
				</figcaption>
			</figure>
			<p>If you show the chart to others, they likely will have no idea what color each bar represents, so adding labels will help elucidate matters. Add a label element to each band:</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="LiteralGray">bands2 = [</span> <span class="LiteralGray">[100, 0, 0,</span> <b>'red'</b><span class="LiteralGray">],</span> <span class="LiteralGray">[100, 60, 0,</span> <b>'orange'</b><span class="LiteralGray">],</span> <span class="LiteralGray">[100, 100, 0,</span> <b>'yellow'</b><span class="LiteralGray">],</span> <span class="LiteralGray">[0, 100, 0,</span> <b>'green'</b><span class="LiteralGray">],</span> <span class="LiteralGray">[0, 60, 100, </span><b>'blue'</b><span class="LiteralGray">],</span> <span class="LiteralGray">[40, 20, 100,</span> <b>'violet'</b><span class="LiteralGray">]</span><span class="LiteralGray">]</span><span class="LiteralGray">. . .</span></code></pre>
			<p>Then, add some lines to your loop to draw each label:</p>
			<pre><code><span class="LiteralGray">. . .</span><span class="LiteralGray">for band in bands2:</span> <span class="LiteralGray">. . .</span> <span class="ProcessingBlue">fill</span>(<span class="ProcessingPurple">'#FFFFFF'</span>) <span class="ProcessingBlue">textAlign</span>(<span class="ProcessingKhaki">RIGHT</span>) <span class="ProcessingBlue">text</span>(band[3], -20, 30) <span class="LiteralGray">translate(0, h)</span></code></pre>
			<p><span epub:type="pagebreak" id="Page_150" title="150"/>This sets the text fill to white, right-aligns it, and writes a color label alongside the bar. Run the code to view the result (<a href="#figure7-11" id="figureanchor7-11">Figure 7-11</a>).</p>
			<figure>
				<img alt="f07011" src="image_fi/500969c07/f07011.png"/>
				<figcaption>
					<p><a id="figure7-11">Figure 7-11</a>: Completed graph with labels</p>
				</figcaption>
			</figure>
			<p>Many lists work just fine with a single dimension, such as shopping lists. You can think of two-dimensional lists as grids or tables, which makes them useful for plotting 2D graphics. Three-dimensional and other higher-dimensional lists have their places, but before employing such a structure, consider whether adding another position to your two-dimensional list may be more sensible.</p>
			<h4 class="HeadProject"><span>Challenge #7: Breakout Level</span></h4>
			<p class="BodyFirst">In this challenge, you’ll recreate a <em>Breakout</em> level. The setup code will include a three-dimensional list. Working with such a list requires a nested loop—that is, a loop inside another loop.</p>
			<p>
				The result should look like <a href="#figure7-12" id="figureanchor7-12">Figure 7-12</a>. Note that you’re not creating a playable game with working inputs; it’s more like a screenshot grabbed during play.</p>
			<p>
				Create a new sketch and save it as <em>breakout_level</em>. Add the following code to draw the ball and paddle:</p>
			<pre><code><span class="ProcessingBlue">size</span>(600, 600)<span class="ProcessingBlue">noStroke</span>()<span class="ProcessingBlue">background</span>(<span class="ProcessingPurple">'#000000'</span>)<span class="ProcessingGray"># ball and paddle</span><span class="ProcessingBlue">fill</span>(<span class="ProcessingPurple">'#FFFFFF'</span>)<span class="ProcessingBlue">circle</span>(350, 440, 18)<span class="ProcessingBlue">rect</span>(300, 520, 190, 40)</code></pre>
			<span epub:type="pagebreak" id="Page_151" title="151"/>
			<figure><img alt="f07012" src="image_fi/500969c07/f07012.png"/><figcaption>
					<p><a id="figure7-12">Figure 7-12</a>: Completed <em>Breakout</em> task</p>
				</figcaption>
			</figure>
			<p>This code should render an empty black stage with the white ball and paddle, but no bricks yet.</p>
			<p>Now add the data for the bricks. To save time, copy and paste the code from my GitHub repository:</p>
			<ol class="decimal">
				<li value="1">Open your browser and go to <a class="LinkURL" href="https://github.com/tabreturn/processing.py-book/.">https://github.com/tabreturn/processing.py-book/.</a></li>
				<li value="2">Navigate to <em>chapter-07-working_with_lists_and_reading_data</em>.</li>
				<li value="3">Locate and open the <em>bricks.txt</em> file.</li>
				<li value="4">Copy and paste the contents of <em>bricks.txt</em> into your sketch.<em> </em></li>
			</ol>
			<p>Here’s the code if you’d prefer to type it in:</p>
			<pre><code>r = <span class="ProcessingPurple">'#FF0000'</span> <span class="ProcessingGray"># red</span>
o = <span class="ProcessingPurple">'#FF9900'</span> <span class="ProcessingGray"># orange</span>
y = <span class="ProcessingPurple">'#FFFF00'</span> <span class="ProcessingGray"># yellow</span>
g = <span class="ProcessingPurple">'#00FF00'</span> <span class="ProcessingGray"># green</span>
b = <span class="ProcessingPurple">'#0099FF'</span> <span class="ProcessingGray"># blue</span>
p = <span class="ProcessingPurple">'#6633FF'</span> <span class="ProcessingGray"># violet</span>
bricks = [ <span class="ProcessingGray"># col 0  col 1  col 2  col 3</span> [ [r,1], [o,1], [y,1], [g,1] ], <span class="ProcessingGray"># row 0</span> [ [o,1], [y,1], [g,1], [b,1] ], <span class="ProcessingGray"># row 1</span> [ [y,1], [g,1], [b,1], [p,1] ], <span class="ProcessingGray"># row 2</span> [ [g,1], [b,2], [p,2], [b,1] ], <span class="ProcessingGray"># row 3</span> [ [b,1], [p,2], [   ], [g,1] ], <span class="ProcessingGray"># row 4</span><span epub:type="pagebreak" id="Page_152" title="152"/>  [ [p,1], [   ], [   ], [y,1] ], <span class="ProcessingGray"># row 5</span> [ [   ], [   ], [   ], [o,1] ], <span class="ProcessingGray"># row 6</span> [ [g,1], [   ], [   ], [   ] ] <span class="ProcessingGray"># row 7</span>
]</code></pre>
			<p>
				To make this more readable, I’ve entered the <code>bricks</code> list in a way that reflects the visual positioning of each brick. In the following order, each brick has a fill color and hit count (indicating the number of hits required to destroy it). I represent each missing brick by using an empty list.</p>
			<p>
				Take the first brick as an example: <code>[r,1]</code>. This brick has a fill of red and requires one (remaining) hit to destroy. You can infer the column and row positions from the lists in which the brick resides; in this case, it’s row 0, column 0. Add two <code>print()</code> statements to confirm this information:</p>
			<pre><code><span class="LiteralGray">. . .</span><span aria-label="annotation1" class="CodeAnnotationHang">1</span> <span class="ProcessingBlue">print</span>(bricks[0]) <span class="ProcessingGray"># displays row 0 items</span><span aria-label="annotation2" class="CodeAnnotationHang">2</span> <span class="ProcessingBlue">print</span>(bricks[0][0]) <span class="ProcessingGray"># displays the very first brick</span></code></pre>
			<p>
				These <code>print</code> lines display the first element in <code>bricks</code>, a list of the four bricks that make up row 0 <span aria-label="annotation1" class="CodeAnnotation">1</span>, and the first brick in row 0 <span aria-label="annotation2" class="CodeAnnotation">2</span>. If you want to retrieve the color of the first brick, enter the following:</p>
			<pre><code><span class="ProcessingBlue">print</span>(bricks[0][0][0]) <span class="ProcessingGray"># displays #FF0000</span></code></pre>
			<p>
				Note that the color variable <code>r</code> holds a hexadecimal value, so what you see in the console is the hexadecimal value for red.</p>
			<p>As I mentioned previously, you’ll need to employ a nested loop for this task. The following lines will help you get started:</p>
			<pre><code><span class="LiteralGray">. . .</span>
bw = <span class="ProcessingRaspberry">width </span>/ 4
bh = <span class="ProcessingRaspberry">height </span>/ 15<span class="ProcessingBlue">translate</span>(0, bh)<span class="ProcessingOlive">for</span> row <span class="ProcessingTealGreen">in</span> bricks: <span class="ProcessingOlive">for</span> col, brick <span class="ProcessingTealGreen">in</span> <span class="ProcessingBlue">enumerate</span>(row): <span class="ProcessingOlive">if</span> <span class="ProcessingBlue">len</span>(brick): <span class="ProcessingGray"># code to draw a brick</span> x = col * bw</code></pre>
			<p>
				The <code>bw</code> variable defines a brick width based on fitting four columns into the display window; <code>bh</code> calculates the brick height. The outer <code>for</code> loops through the rows; the inner <code>for</code> loops through the bricks within each row. The <code>col</code> and <code>brick</code> variables hold the column number and brick, respectively. You use the <code>len()</code> function to determine whether this brick is a placeholder (an empty list). A <code>brick</code> with a length of 0 is equivalent to <code>False</code>, and Python skips the <code>x = col * bw</code> line. The <code>x</code> variable will hold the x-coordinate to draw each brick. Complete the task to match the result shown in <a href="#figure7-12">Figure 7-12</a>. Note that the bricks located roughly in the center <span epub:type="pagebreak" id="Page_153" title="153"/>have a hit count of <code>2</code> and must include a shine effect. If you need help, you can access the code at <a class="LinkURL" href="https://github.com/tabreturn/processing.py-book/tree/master/chapter-07-working_with_lists_and_reading_data/breakout_level/">https://github.com/tabreturn/processing.py-book/tree/master/chapter-07-working_with_lists_and_reading_data/breakout_level/</a>.</p>
			<p>In the next section, you’ll learn how to work with data from external files, and you’ll use list techniques with Processing functions that read in the contents of text files.</p>
			<h2 id="h1-500969c07-0004">Reading Data</h2>
			<p class="BodyFirst">Python—and by extension, Processing—can handle many types of file data. For instance, you could use Processing to create a game that incorporates various audio and video files, storing these multimedia assets in your <em>data</em> subfolder. You’ve loaded image data from PNG files into your Processing sketches in previous chapters; this section focuses on loading data stored in text-based files.</p>
			<p>You’ve also worked with values stored in lists, but using Python’s list syntax to retype data from other sources can be tedious, especially for large and swappable datasets. An alternative is to manage and prepare data outside Processing by using something like a spreadsheet, save it in a text-based format, and then read in the file contents when you run your sketch. To understand what separates text-based files from other files, and how you might use them to store data, let’s start with a brief introduction to file formats.</p>
			<h3 id="h2-500969c07-0005">File Formats</h3>
			<p class="BodyFirst">A <em>file format</em> is a standardized means of encoding information for storage on a digital medium. Many formats exist, and each is interpreted differently. For example, applications are encoded in <em>executable formats</em>, such as Android Package Kit (APK) files for Android or executable (EXE) files for Windows. Some <em>multimedia formats</em> include MPEG-1/2 Audio Layer III (MP3) for music or JPG for images.</p>
			<p>
				You can identify a file’s format by its <em>file extension</em>. File extensions typically comprise three letters, always preceded by a dot, and tacked onto the end of a filename. To simplify user interaction, many operating systems hide file extensions, but if you dig around in your Windows File Explorer or Mac Finder settings, you can make your file manager show the extensions. Your system relies on these file extensions to open files with the appropriate app and to display icons or generate thumbnails (<a href="#figure7-13" id="figureanchor7-13">Figure 7-13</a>).</p>
			<figure>
				<img alt="f07013" src="image_fi/500969c07/f07013.png"/>
				<figcaption>
					<p><a id="figure7-13">Figure 7-13</a>: A file manager in icon view with file extensions revealed</p>
				</figcaption>
			</figure>
			<p><span epub:type="pagebreak" id="Page_154" title="154"/>When you remove or rename a file extension, this association is lost. Perhaps you’ve tried to open an MP3 file in a text editor and gotten a bunch of garbled characters, something like this:</p>
			<pre><code><span class="LiteralGray">. . .</span>
���:����zc��E9���yoO��F�;#C��@##�&amp;�#�##HV�D��#���X���#�&amp;2XNf�##M�#�#���#J��,8,#`}##�#�4R�f�#E��V���d@��P������G��rjS#gbx�:P+�A��'��Q�IF��5�0�i.�A���sG�P"����oA~�#<span class="LiteralGray">. . .</span></code></pre>
			<p>Text editors are designed for editing text-encoded files; therefore, they attempt to interpret the audio data as characters. Although you might be able to spot some intelligible metadata in there somewhere, it’s 99 percent gobbledygook. If you open this same file with iTunes, Windows Media Player, or VLC, you’ll hear music.</p>
			<p>
				Some file formats are text based, which means you can open them in any text or code editor and make some sense of the content. To clarify, by <em>text based</em>, I mean <em>plaintext</em>, not a Microsoft Word document with fonts of varying colors and sizes in bold and italic. You may be wondering why people even use plaintext, but it’s appropriate for simple to-do lists and writing just about any programming language, Python included. For instance, Processing files are plaintext, albeit with a <em>.pyde</em> file extension.</p>
			<h3 id="h2-500969c07-0006">CSV</h3>
			<p class="BodyFirst"><em>Comma-separated values (CSV)</em> files, which have the <em>.csv</em> extension, provide a simple approach to formatting plaintext data. You’ll download a CSV that contains a track list of Pink Floyd’s album <em>The Dark Side of the Moon</em>.</p>
			<p>
				Each line of a CSV file is one entry, and each entry consists of one or more fields separated by commas. Here’s an abridged track listing of <em>The Dark Side of the Moon</em> in CSV format:</p>
			<pre><code>location,title,creator,album,trackNum
file:///music/SpeakToMe.mp3,Speak to Me,Pink Floyd,The Dark Side of the Moon,1
file:///music/Breathe.mp3,Breathe,Pink Floyd,The Dark Side of the Moon,2<span class="LiteralGray">. . .</span></code></pre>
			<p>
				The first line of this file contains the field headings, and the following lines provide the details of each track. Your spreadsheet software (Microsoft Excel, LibreOffice Calc, or similar) will associate itself with any files bearing the <em>.csv</em> extension. Opening any CSV file in a spreadsheet displays the information in the typical row-and-column arrangement (<a href="#figure7-14" id="figureanchor7-14">Figure 7-14</a>). This is useful for preparing CSV data, but be aware that none of the styling (cell sizes, font colors, and so on) is retained once you save back to CSV.</p>
				<span epub:type="pagebreak" id="Page_155" title="155"/>
				<figure>
				<img alt="f07014" src="image_fi/500969c07/f07014.png"/>
				<figcaption>
					<p><a id="figure7-14">Figure 7-14</a>: The full <em>playlist.csv</em> file open in LibreOffice Calc</p>
				</figcaption>
			</figure>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>	CSV files don’t always rely on a comma to delimit each field. For instance, tab- and space-separated values are common as well.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				You’ll now write code that loads the track-list data from a CSV file. Create a new sketch named <em>csv</em> with a <em>data</em> subfolder and complete the following steps:</p>
			<ol class="decimal">
				<li value="1">Open your browser and go to <a class="LinkURL" href="https://github.com/tabreturn/processing.py-book/">https://github.com/tabreturn/processing.py-book/</a>.</li>
				<li value="2">Navigate to <em>chapter-07-working_with_lists_and_reading_data</em>.</li>
				<li value="3">Download the <em>data.zip</em> file.</li>
				<li value="4">Extract the ZIP archive, and move <em>playlist.csv</em> to the sketch <em>data</em> subfolder.</li>
			</ol>
			<p>
				Processing provides the <code>loadStrings()</code> function to read in text-based files. It accepts a single argument (a path) that points to your text file and returns the contents as a list of strings, each element representing a line of text. Add the following code to test the function:</p>
			<pre><code>csv = <span class="ProcessingBlue">loadStrings</span>(<span class="ProcessingPurple">'playlist.csv'</span>)<span class="ProcessingOlive">for</span> entry <span class="ProcessingTealGreen">in</span> csv: <span class="ProcessingBlue">print</span>(entry)</code></pre>
			<p>
				The <em>playlist.csv</em> data is assigned to a list named <code>csv</code>. Each <code>csv</code> element holds a line of text representing a single track. The <code>for</code> loop prints each entry on a new line in the console:</p>
			<pre><code>location,title,creator,album,trackNum
file:///music/SpeakToMe.mp3,Speak to Me,Pink Floyd,The Dark Side of the Moon,1
file:///music/Breathe.mp3,Breathe,Pink Floyd,The Dark Side of the Moon,2<span class="LiteralGray">. . .</span></code></pre>
			<p><span epub:type="pagebreak" id="Page_156" title="156"/>The <code>loadStrings()</code> function cannot distinguish between different plaintext formats; this could be a bestselling novel or the latest stock market figures.</p>
			<p>
				To interpret the CSV data, use the <code>split()</code> method to break each line into further lists. In this case, you’re splitting each entry so you can extract the number and title of each track; you don’t need the file location, creator, or album. The <code>split()</code> method works by using a delimiter argument of your preference. In this case, you’ll use a comma. Amend your <code>for</code> loop code like this:</p>
			<pre><code><span class="LiteralGray">. . .</span><span aria-label="annotation1" class="CodeAnnotationHang">1</span> <span class="ProcessingOlive">for</span> entry <span class="ProcessingTealGreen">in</span> csv[1:]: <span aria-label="annotation2" class="CodeAnnotation">2</span> track = entry.<span class="ProcessingBlue">split</span>(<span class="ProcessingPurple">','</span>) <span class="ProcessingBlue">print</span>(<span class="ProcessingPurple">'{}. {}'</span>.<span class="ProcessingBlue">format</span>(track[4], track[1]))</code></pre>
			<p>
				By adding <code>[1:]</code>, the <code>for</code> loop skips the first item in the <code>csv</code> list <span aria-label="annotation1" class="CodeAnnotation">1</span> to avoid printing the field headings. With each iteration, the <code>split()</code> method assigns a new list to the <code>track</code> variable <span aria-label="annotation2" class="CodeAnnotation">2</span>. The elements <code>tracks[4]</code> and <code>track[1]</code> hold the entry track number and title, respectively.</p>
			<p>Run the sketch to confirm that the console displays a list of 10 numbered tracks:</p>
			<pre><code>1. Speak to Me
2. Breathe<span class="LiteralGray">. . .</span></code></pre>
			<p>
				If you want to write text to a file, look up the <code>saveStrings()</code> function in the online Processing reference; it’s effectively an inverse <code>loadStrings()</code>.</p>
			<p>
				Formatting plaintext data in CSV files is a good way to avoid having to manage your data in the Processing editor. The beauty of CSV lies in its simplicity, but it isn’t great for dealing with hierarchically structured data. In <span class="xref">Chapter 8</span>, you’ll learn about other text-based formats (XML and JSON).</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>
							Python provides a <em>csv</em> module to deal with CSV data, and it’s worth exploring if you want to do more advanced CSV processing.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<h4 class="HeadProject"><span>Challenge #8: Games Sales Chart</span></h4>
			<p class="BodyFirst">In this final challenge, you’ll generate a bar chart of the bestselling video games of all time. <a href="#figure7-15" id="figureanchor7-15">Figure 7-15</a> presents the final result (left) along with a zoomed-in version to provide more detail (right).</p>
			<span epub:type="pagebreak" id="Page_157" title="157"/>
			<figure>
				<img alt="f07015" src="image_fi/500969c07/f07015.png"/>
				<figcaption>
					<p><a id="figure7-15">Figure 7-15</a>: Completed chart (left) and chart detail (right)</p>
				</figcaption>
			</figure>
			<p>
				The data has been sourced from a Wikipedia article titled “List of best-selling video games” (<a class="LinkURL" href="https://en.wikipedia.org/wiki/List_of_best-selling_video_games">https://en.wikipedia.org/wiki/List_of_best-selling_video_games</a>) and converted from an HTML table to a tab-separated file. The rankings likely have shuffled since this book was published, but that doesn’t matter for the purpose of this exercise.</p>
			<p>
				You’ll read in the sales data by using a <code>loadStrings()</code> function, and then plot the chart by using the techniques you’ve learned in this chapter. Create a new sketch named <em>game_sales_chart </em>with a <em>data</em> subfolder. In the preceding exercise, you downloaded a <em>data.zip</em> file, which also contains a <em>list_of_best-selling_video_games.tsv</em> file; place this in the sketch <em>data</em> subfolder.</p>
			<p>
				This file uses tab-separated values, hence the <em>.tsv</em> file extension. I used tabs because it’s highly unlikely that any game titles or studio/publisher names will contain tab characters, but there may be commas that could interfere with a <code>split(',')</code> style approach. You may want to open the TSV file in your preferred spreadsheet application to inspect the values. There are 50 games in all, ordered with the bestselling game at the top. If you use a text editor to open the file, you should see something like this:</p>
			<pre><code>Rank	Title	Sales	Developer(s)	Publisher(s)
1	Minecraft	180000000	Mojang	Xbox Game Studios
2	Tetris	170000000	Elektronorgtechnica	Various<span class="LiteralGray">. . .</span></code></pre>
			<p>A single, invisible tab character separates each field. Note that tab sizes may vary among editors and will not always form visually aligned columns, so the file may look a little different, depending on the editor you use.</p>
			<p><span epub:type="pagebreak" id="Page_158" title="158"/>Add basic setup code to your sketch that will define the display window size and background color, as well as read in the TSV data:</p>
			<pre><code><span class="ProcessingBlue">size</span>(800, 800)<span class="ProcessingBlue">background</span>(<span class="ProcessingPurple">'#004477'</span>)
tsv = <span class="ProcessingBlue">loadStrings</span>(<span class="ProcessingPurple">'list_of_best-selling_video_games.tsv'</span>)<span class="ProcessingBlue">noStroke</span>()</code></pre>
			<p>
				A list named <code>tsv</code> holds the game sales entries. None of the graphic elements have strokes, so I’ve included a <code>noStroke()</code> line.</p>
			<p>
				You’ll need to perform calculations to scale the bars relative to the display window. Although the sales figures appear to be numbers, Processing treats them as text. Recall that you cannot perform mathematical operations on string data. Fortunately, there’s an easy fix. The <code>int()</code> and <code>float()</code> functions convert various data types to integer and floating-point values, respectively. Here’s an example:</p>
			<pre><code>entry1 = tsv[1].<span class="ProcessingBlue">split</span>(<span class="ProcessingPurple">'\t'</span>) <span class="ProcessingGray"># Minecraft entry</span>
sales1 = entry1[2] <span class="ProcessingGray"># 180000000</span><span class="ProcessingBlue">print</span>(<span class="ProcessingBlue">int</span>(sales1) + 1) <span class="ProcessingGray"># 180000001</span></code></pre>
			<p>
				The <code>split()</code> method must create a list from the first entry (Minecraft) using a tab character as a delimiter; to specify a tab, use <code>'\t'</code> as an argument. The variable <code>sales1</code> is equal to the value at index 2, the Sales column. Despite looking like a number, this value is a string, so the <code>print</code> line wraps <code>sales1</code> with an <code>int()</code> function to convert it to an integer before adding 1 to it.</p>
			<p>
				Now, complete the chart as shown in <a href="#figure7-15">Figure 7-15</a>. It’s probably best to start with a loop that prints each entry. Then, get the labels to display before creating the bars. Once you have the labels, create plain white bars of the correct width, and finish it off with the rainbow sequence effect. If you need help, you can access the solution at <a class="LinkURL" href="https://github.com/tabreturn/processing.py-book/tree/master/chapter-07-working_with_lists_and_reading_data/game_sales_chart/">https://github.com/tabreturn/processing.py-book/tree/master/chapter-07-working_with_lists_and_reading_data/game_sales_chart/</a>.</p>
			<h2 id="h1-500969c07-0005">Summary</h2>
			<p class="BodyFirst">In this chapter, you learned about Python’s suite of methods for various list operations, how to manage collections of items using lists, and how lists are particularly powerful when combined with loops. You also learned to harness nested lists in order to manage more complex data and practiced a few data visualization techniques.</p>
			<p>In addition, you saw how to work with data stored in plaintext formats, like CSV and TSV, allowing you to read in values from external files when you run a sketch. This means you don’t need to manage values in the Processing editor, making it easier to swap out datasets.</p>
			<p>The next chapter moves on to dictionaries, which are similar to lists in that they store collections of items. With dictionaries, however, you access values by using a word instead of an index. Once again, you’ll create novel data visualizations with your new skills.</p>
		</section>
	</body></html>